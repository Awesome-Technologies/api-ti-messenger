ifdef::env-github[]
:tip-caption: :bulb:
:note-caption: :information_source:
:important-caption: :heavy_exclamation_mark:
:caution-caption: :fire:
:warning-caption: :warning:
endif::[]

:imagesdir: ../../images

image:gematik_logo.svg[width=70%]

=== Authorisation check
The following figure describes how to check the entitlement of incoming Matrix requests on the messenger proxy. The authorisation concept is based on a three-stage check, which is described in the "Authorisation concept" section. The mention of necessary authentications is omitted here.

.use case description
[%collapsible%open]
====
[caption=]
Authorisation Check
[%header, cols="1,1"]
|===
| |description
|Actor |messenger proxy
|Trigger |-
|Components a|
              * Messenger proxy A+B,
              * Matrix home server A+B,
              * registration service,
              * FHIR-proxy
              * VZD-FHIR directory 
|Preconditions a| none
|Input data |actual version number
|Result a|The messenger proxy retrieves a status if the current list is not outdated or a new federation list in case the proxy owns an older one
|Output data |status, federation list
|===
====
.sequence diagram 
[%collapsible%open]
====
++++
<p align="center">
  <img width="60%" src=../../images/diagrams/TI-Messenger-Dienst/Ressourcen/UC_Approvel_List_Seq.svg>
</p>
++++
====