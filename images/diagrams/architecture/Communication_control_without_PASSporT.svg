<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1428.7929px" preserveAspectRatio="none" style="width:2048px;height:1428px;background:#FFFFFF;" version="1.1" viewBox="0 0 2048 1428" width="2048.4759px" zoomAndPan="magnify"><defs><filter height="300%" id="ftvboagfh6nez" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="1.9037880548454567"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="3.8075761096909133" dy="3.8075761096909133" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#DCDCDC" filter="url(#ftvboagfh6nez)" height="1161.1769" style="stroke:#000000;stroke-width:0.9518940274227283;" width="9.5189" x="288.8998" y="166.574"/><rect fill="#DCDCDC" filter="url(#ftvboagfh6nez)" height="829.8954" style="stroke:#000000;stroke-width:0.9518940274227283;" width="9.5189" x="573.5162" y="497.8554"/><rect fill="#DCDCDC" filter="url(#ftvboagfh6nez)" height="32.1636" style="stroke:#000000;stroke-width:0.9518940274227283;" width="9.5189" x="793.8796" y="198.7376"/><rect fill="#DCDCDC" filter="url(#ftvboagfh6nez)" height="51.0007" style="stroke:#000000;stroke-width:0.9518940274227283;" width="9.5189" x="793.8796" y="866.6251"/><rect fill="#DCDCDC" filter="url(#ftvboagfh6nez)" height="478.059" style="stroke:#000000;stroke-width:0.9518940274227283;" width="9.5189" x="1136.5615" y="752.2491"/><rect fill="#DCDCDC" filter="url(#ftvboagfh6nez)" height="803.4432" style="stroke:#000000;stroke-width:0.9518940274227283;" width="9.5189" x="1468.7725" y="459.0286"/><rect fill="#DCDCDC" filter="url(#ftvboagfh6nez)" height="789.3507" style="stroke:#000000;stroke-width:0.9518940274227283;" width="9.5189" x="1753.3888" y="394.7014"/><rect fill="#FFFFFF" filter="url(#ftvboagfh6nez)" height="131.6365" style="stroke:#000000;stroke-width:1.9037880548454567;" width="902.3955" x="9.5189" y="106.8799"/><rect fill="#FFFFFF" filter="url(#ftvboagfh6nez)" height="214.8008" style="stroke:#000000;stroke-width:1.9037880548454567;" width="2026.1064" x="9.5189" y="251.8429"/><rect fill="#FFFFFF" filter="url(#ftvboagfh6nez)" height="712.4629" style="stroke:#000000;stroke-width:1.9037880548454567;" width="1691.0397" x="180.3839" y="608.6247"/><rect fill="#FFFFFF" height="534.5703" style="stroke:none;stroke-width:0.9518940274227283;" width="1691.0397" x="180.3839" y="657.0969"/><rect fill="#FFFFFF" height="129.4204" style="stroke:none;stroke-width:0.9518940274227283;" width="1691.0397" x="180.3839" y="1191.6672"/><line style="stroke:#000000;stroke-width:0.9518940274227283;stroke-dasharray:5.0,5.0;" x1="62.825" x2="62.825" y1="90.6977" y2="1337.2698"/><line style="stroke:#000000;stroke-width:0.9518940274227283;stroke-dasharray:5.0,5.0;" x1="293.6593" x2="293.6593" y1="90.6977" y2="1337.2698"/><line style="stroke:#000000;stroke-width:0.9518940274227283;stroke-dasharray:5.0,5.0;" x1="577.7997" x2="577.7997" y1="90.6977" y2="1337.2698"/><line style="stroke:#000000;stroke-width:0.9518940274227283;stroke-dasharray:5.0,5.0;" x1="798.6391" x2="798.6391" y1="90.6977" y2="1337.2698"/><line style="stroke:#000000;stroke-width:0.9518940274227283;stroke-dasharray:5.0,5.0;" x1="1141.3209" x2="1141.3209" y1="90.6977" y2="1337.2698"/><line style="stroke:#000000;stroke-width:0.9518940274227283;stroke-dasharray:5.0,5.0;" x1="1473.056" x2="1473.056" y1="90.6977" y2="1337.2698"/><line style="stroke:#000000;stroke-width:0.9518940274227283;stroke-dasharray:5.0,5.0;" x1="1758.1483" x2="1758.1483" y1="90.6977" y2="1337.2698"/><line style="stroke:#000000;stroke-width:0.9518940274227283;stroke-dasharray:5.0,5.0;" x1="1981.3674" x2="1981.3674" y1="90.6977" y2="1337.2698"/><text fill="#000000" font-family="Aapex" font-size="19.0379" lengthAdjust="spacing" textLength="82.8148" x="19.0379" y="86.2078">Nutzer A</text><ellipse cx="63.301" cy="14.2784" fill="#DCDCDC" filter="url(#ftvboagfh6nez)" rx="7.6152" ry="7.6152" style="stroke:#000000;stroke-width:1.9037880548454567;"/><path d="M63.301,21.8936 L63.301,47.5947 M50.9263,29.5087 L75.6756,29.5087 M63.301,47.5947 L50.9263,61.8731 M63.301,47.5947 L75.6756,61.8731 " fill="none" filter="url(#ftvboagfh6nez)" style="stroke:#000000;stroke-width:1.9037880548454567;"/><text fill="#000000" font-family="Aapex" font-size="19.0379" lengthAdjust="spacing" textLength="82.8148" x="19.0379" y="1353.9893">Nutzer A</text><ellipse cx="63.301" cy="1367.9981" fill="#DCDCDC" filter="url(#ftvboagfh6nez)" rx="7.6152" ry="7.6152" style="stroke:#000000;stroke-width:1.9037880548454567;"/><path d="M63.301,1375.6133 L63.301,1401.3144 M50.9263,1383.2284 L75.6756,1383.2284 M63.301,1401.3144 L50.9263,1415.5928 M63.301,1401.3144 L75.6756,1415.5928 " fill="none" filter="url(#ftvboagfh6nez)" style="stroke:#000000;stroke-width:1.9037880548454567;"/><rect fill="#EFEFFF" filter="url(#ftvboagfh6nez)" height="35.4878" style="stroke:#000000;stroke-width:1.4278410411340925;" width="203.7053" x="189.9029" y="50.4504"/><text fill="#000000" font-family="Impact" font-size="19.0379" lengthAdjust="spacing" textLength="120.8905" x="231.3102" y="74.785">TI-M Client A</text><rect fill="#EFEFFF" filter="url(#ftvboagfh6nez)" height="35.4878" style="stroke:#000000;stroke-width:1.4278410411340925;" width="203.7053" x="189.9029" y="1336.3179"/><text fill="#000000" font-family="Impact" font-size="19.0379" lengthAdjust="spacing" textLength="120.8905" x="231.3102" y="1360.6526">TI-M Client A</text><rect fill="#EFEFFF" filter="url(#ftvboagfh6nez)" height="79.8104" style="stroke:#000000;stroke-width:1.4278410411340925;" width="210.3686" x="471.1875" y="6.1278"/><text fill="#000000" font-family="Impact" font-size="19.0379" lengthAdjust="spacing" textLength="197.0421" x="477.8508" y="30.4625">Messenger-Service A</text><text fill="#000000" font-family="Impact" font-size="19.0379" lengthAdjust="spacing" textLength="189.4269" x="481.6584" y="52.6238">(Messenger-Proxy +</text><text fill="#000000" font-family="Impact" font-size="19.0379" lengthAdjust="spacing" textLength="121.8424" x="515.4506" y="74.785">Homeserver)</text><rect fill="#EFEFFF" filter="url(#ftvboagfh6nez)" height="79.8104" style="stroke:#000000;stroke-width:1.4278410411340925;" width="210.3686" x="471.1875" y="1336.3179"/><text fill="#000000" font-family="Impact" font-size="19.0379" lengthAdjust="spacing" textLength="197.0421" x="477.8508" y="1360.6526">Messenger-Service A</text><text fill="#000000" font-family="Impact" font-size="19.0379" lengthAdjust="spacing" textLength="189.4269" x="481.6584" y="1382.8139">(Messenger-Proxy +</text><text fill="#000000" font-family="Impact" font-size="19.0379" lengthAdjust="spacing" textLength="121.8424" x="515.4506" y="1404.9751">Homeserver)</text><rect fill="#EFEFFF" filter="url(#ftvboagfh6nez)" height="35.4878" style="stroke:#000000;stroke-width:1.4278410411340925;" width="203.7053" x="694.8826" y="50.4504"/><text fill="#000000" font-family="Impact" font-size="19.0379" lengthAdjust="spacing" textLength="138.0246" x="727.723" y="74.785">FHIR-Directory</text><rect fill="#EFEFFF" filter="url(#ftvboagfh6nez)" height="35.4878" style="stroke:#000000;stroke-width:1.4278410411340925;" width="203.7053" x="694.8826" y="1336.3179"/><text fill="#000000" font-family="Impact" font-size="19.0379" lengthAdjust="spacing" textLength="138.0246" x="727.723" y="1360.6526">FHIR-Directory</text><rect fill="#EFEFFF" filter="url(#ftvboagfh6nez)" height="35.4878" style="stroke:#000000;stroke-width:1.4278410411340925;" width="230.3584" x="1024.238" y="50.4504"/><text fill="#000000" font-family="Impact" font-size="19.0379" lengthAdjust="spacing" textLength="217.0318" x="1030.9012" y="74.785">Registrierungsdienst B</text><rect fill="#EFEFFF" filter="url(#ftvboagfh6nez)" height="35.4878" style="stroke:#000000;stroke-width:1.4278410411340925;" width="230.3584" x="1024.238" y="1336.3179"/><text fill="#000000" font-family="Impact" font-size="19.0379" lengthAdjust="spacing" textLength="217.0318" x="1030.9012" y="1360.6526">Registrierungsdienst B</text><rect fill="#EFEFFF" filter="url(#ftvboagfh6nez)" height="79.8104" style="stroke:#000000;stroke-width:1.4278410411340925;" width="210.3686" x="1366.4439" y="6.1278"/><text fill="#000000" font-family="Impact" font-size="19.0379" lengthAdjust="spacing" textLength="197.0421" x="1373.1071" y="30.4625">Messenger-Service B</text><text fill="#000000" font-family="Impact" font-size="19.0379" lengthAdjust="spacing" textLength="189.4269" x="1376.9147" y="52.6238">(Messenger-Proxy +</text><text fill="#000000" font-family="Impact" font-size="19.0379" lengthAdjust="spacing" textLength="121.8424" x="1410.7069" y="74.785">Homeserver)</text><rect fill="#EFEFFF" filter="url(#ftvboagfh6nez)" height="79.8104" style="stroke:#000000;stroke-width:1.4278410411340925;" width="210.3686" x="1366.4439" y="1336.3179"/><text fill="#000000" font-family="Impact" font-size="19.0379" lengthAdjust="spacing" textLength="197.0421" x="1373.1071" y="1360.6526">Messenger-Service B</text><text fill="#000000" font-family="Impact" font-size="19.0379" lengthAdjust="spacing" textLength="189.4269" x="1376.9147" y="1382.8139">(Messenger-Proxy +</text><text fill="#000000" font-family="Impact" font-size="19.0379" lengthAdjust="spacing" textLength="121.8424" x="1410.7069" y="1404.9751">Homeserver)</text><rect fill="#EFEFFF" filter="url(#ftvboagfh6nez)" height="35.4878" style="stroke:#000000;stroke-width:1.4278410411340925;" width="203.7053" x="1654.3918" y="50.4504"/><text fill="#000000" font-family="Impact" font-size="19.0379" lengthAdjust="spacing" textLength="120.8905" x="1695.7992" y="74.785">TI-M Client B</text><rect fill="#EFEFFF" filter="url(#ftvboagfh6nez)" height="35.4878" style="stroke:#000000;stroke-width:1.4278410411340925;" width="203.7053" x="1654.3918" y="1336.3179"/><text fill="#000000" font-family="Impact" font-size="19.0379" lengthAdjust="spacing" textLength="120.8905" x="1695.7992" y="1360.6526">TI-M Client B</text><text fill="#000000" font-family="Aapex" font-size="19.0379" lengthAdjust="spacing" textLength="82.8148" x="1937.5803" y="86.2078">Nutzer B</text><ellipse cx="1981.8434" cy="14.2784" fill="#DCDCDC" filter="url(#ftvboagfh6nez)" rx="7.6152" ry="7.6152" style="stroke:#000000;stroke-width:1.9037880548454567;"/><path d="M1981.8434,21.8936 L1981.8434,47.5947 M1969.4687,29.5087 L1994.218,29.5087 M1981.8434,47.5947 L1969.4687,61.8731 M1981.8434,47.5947 L1994.218,61.8731 " fill="none" filter="url(#ftvboagfh6nez)" style="stroke:#000000;stroke-width:1.9037880548454567;"/><text fill="#000000" font-family="Aapex" font-size="19.0379" lengthAdjust="spacing" textLength="82.8148" x="1937.5803" y="1353.9893">Nutzer B</text><ellipse cx="1981.8434" cy="1367.9981" fill="#DCDCDC" filter="url(#ftvboagfh6nez)" rx="7.6152" ry="7.6152" style="stroke:#000000;stroke-width:1.9037880548454567;"/><path d="M1981.8434,1375.6133 L1981.8434,1401.3144 M1969.4687,1383.2284 L1994.218,1383.2284 M1981.8434,1401.3144 L1969.4687,1415.5928 M1981.8434,1401.3144 L1994.218,1415.5928 " fill="none" filter="url(#ftvboagfh6nez)" style="stroke:#000000;stroke-width:1.9037880548454567;"/><rect fill="#DCDCDC" filter="url(#ftvboagfh6nez)" height="1161.1769" style="stroke:#000000;stroke-width:0.9518940274227283;" width="9.5189" x="288.8998" y="166.574"/><rect fill="#DCDCDC" filter="url(#ftvboagfh6nez)" height="829.8954" style="stroke:#000000;stroke-width:0.9518940274227283;" width="9.5189" x="573.5162" y="497.8554"/><rect fill="#DCDCDC" filter="url(#ftvboagfh6nez)" height="32.1636" style="stroke:#000000;stroke-width:0.9518940274227283;" width="9.5189" x="793.8796" y="198.7376"/><rect fill="#DCDCDC" filter="url(#ftvboagfh6nez)" height="51.0007" style="stroke:#000000;stroke-width:0.9518940274227283;" width="9.5189" x="793.8796" y="866.6251"/><rect fill="#DCDCDC" filter="url(#ftvboagfh6nez)" height="478.059" style="stroke:#000000;stroke-width:0.9518940274227283;" width="9.5189" x="1136.5615" y="752.2491"/><rect fill="#DCDCDC" filter="url(#ftvboagfh6nez)" height="803.4432" style="stroke:#000000;stroke-width:0.9518940274227283;" width="9.5189" x="1468.7725" y="459.0286"/><rect fill="#DCDCDC" filter="url(#ftvboagfh6nez)" height="789.3507" style="stroke:#000000;stroke-width:0.9518940274227283;" width="9.5189" x="1753.3888" y="394.7014"/><path d="M9.5189,106.8799 L70.4402,106.8799 L70.4402,113.5431 L60.9212,123.062 L9.5189,123.062 L9.5189,106.8799 " fill="#EEEEEE" style="stroke:#000000;stroke-width:0.9518940274227283;"/><rect fill="none" height="131.6365" style="stroke:#000000;stroke-width:1.9037880548454567;" width="902.3955" x="9.5189" y="106.8799"/><text fill="#000000" font-family="sans-serif" font-size="12.3746" font-weight="bold" lengthAdjust="spacing" textLength="18.086" x="23.7974" y="119.3182">alt</text><text fill="#000000" font-family="sans-serif" font-size="10.4708" font-weight="bold" lengthAdjust="spacing" textLength="156.1106" x="84.7186" y="118.5029">[Suche im FHIR-Directory]</text><polygon fill="#000000" points="277.4771,162.7664,286.996,166.574,277.4771,170.3816,281.2847,166.574" style="stroke:#000000;stroke-width:0.9518940274227283;"/><line style="stroke:#000000;stroke-width:0.9518940274227283;" x1="63.301" x2="283.1885" y1="166.574" y2="166.574"/><text fill="#000000" font-family="sans-serif" font-size="16.1822" lengthAdjust="spacing" textLength="207.5129" x="69.9642" y="142.0167">möchte TI-M Kontakt zum</text><text fill="#000000" font-family="sans-serif" font-size="16.1822" lengthAdjust="spacing" textLength="116.1311" x="69.9642" y="160.8538">chatten finden</text><polygon fill="#000000" points="782.4569,194.93,791.9758,198.7376,782.4569,202.5452,786.2645,198.7376" style="stroke:#000000;stroke-width:0.9518940274227283;"/><line style="stroke:#000000;stroke-width:0.9518940274227283;" x1="298.4188" x2="788.1683" y1="198.7376" y2="198.7376"/><text fill="#000000" font-family="sans-serif" font-size="16.1822" lengthAdjust="spacing" textLength="159.9182" x="305.082" y="193.0174">FHIR search request</text><polygon fill="#000000" points="308.8896,227.0937,299.3707,230.9012,308.8896,234.7088,305.082,230.9012" style="stroke:#000000;stroke-width:0.9518940274227283;"/><line style="stroke:#000000;stroke-width:0.9518940274227283;stroke-dasharray:2.0,2.0;" x1="303.1782" x2="797.6872" y1="230.9012" y2="230.9012"/><text fill="#000000" font-family="sans-serif" font-size="16.1822" lengthAdjust="spacing" textLength="304.6061" x="487.3697" y="225.181">FHIR response mit MXID von Nutzer B</text><path d="M9.5189,251.8429 L70.4402,251.8429 L70.4402,258.5062 L60.9212,268.0251 L9.5189,268.0251 L9.5189,251.8429 " fill="#EEEEEE" style="stroke:#000000;stroke-width:0.9518940274227283;"/><rect fill="none" height="214.8008" style="stroke:#000000;stroke-width:1.9037880548454567;" width="2026.1064" x="9.5189" y="251.8429"/><text fill="#000000" font-family="sans-serif" font-size="12.3746" font-weight="bold" lengthAdjust="spacing" textLength="18.086" x="23.7974" y="264.2812">alt</text><text fill="#000000" font-family="sans-serif" font-size="10.4708" font-weight="bold" lengthAdjust="spacing" textLength="354.1046" x="84.7186" y="263.466">[Tauscht bei persönlichem Treffen MXID mit Nutzer B aus]</text><polygon fill="#000000" points="1970.4206,288.8924,1979.9396,292.7,1970.4206,296.5076,1974.2282,292.7" style="stroke:#000000;stroke-width:0.9518940274227283;"/><line style="stroke:#000000;stroke-width:0.9518940274227283;" x1="63.301" x2="1976.132" y1="292.7" y2="292.7"/><text fill="#000000" font-family="sans-serif" font-size="16.1822" lengthAdjust="spacing" textLength="278.905" x="69.9642" y="286.9798">Kontaktdaten austauschen per App</text><polygon fill="#000000" points="277.4771,339.8931,286.996,343.7007,277.4771,347.5083,281.2847,343.7007" style="stroke:#000000;stroke-width:0.9518940274227283;"/><line style="stroke:#000000;stroke-width:0.9518940274227283;" x1="63.301" x2="283.1885" y1="343.7007" y2="343.7007"/><text fill="#000000" font-family="sans-serif" font-size="16.1822" lengthAdjust="spacing" textLength="153.2549" x="69.9642" y="319.1434">MXID von Nutzer B</text><text fill="#000000" font-family="sans-serif" font-size="16.1822" lengthAdjust="spacing" textLength="200.8496" x="69.9642" y="337.9805">zu Kontakten hinzufügen</text><polygon fill="#000000" points="1773.3786,390.8938,1763.8596,394.7014,1773.3786,398.5089,1769.571,394.7014" style="stroke:#000000;stroke-width:0.9518940274227283;"/><line style="stroke:#000000;stroke-width:0.9518940274227283;" x1="1767.6672" x2="1980.8915" y1="394.7014" y2="394.7014"/><text fill="#000000" font-family="sans-serif" font-size="16.1822" lengthAdjust="spacing" textLength="152.303" x="1822.8771" y="370.1441">MXID von Nutzer A</text><text fill="#000000" font-family="sans-serif" font-size="16.1822" lengthAdjust="spacing" textLength="200.8496" x="1774.3305" y="388.9812">zu Kontakten hinzufügen</text><polygon fill="#000000" points="566.8529,423.0574,576.3718,426.865,566.8529,430.6726,570.6605,426.865" style="stroke:#000000;stroke-width:0.9518940274227283;"/><line style="stroke:#000000;stroke-width:0.9518940274227283;" x1="298.4188" x2="572.5643" y1="426.865" y2="426.865"/><text fill="#000000" font-family="sans-serif" font-size="16.1822" lengthAdjust="spacing" textLength="239.8773" x="305.082" y="421.1448">invite von Nutzer B ist erlaubt</text><polygon fill="#000000" points="1488.7623,455.221,1479.2433,459.0286,1488.7623,462.8362,1484.9547,459.0286" style="stroke:#000000;stroke-width:0.9518940274227283;"/><line style="stroke:#000000;stroke-width:0.9518940274227283;" x1="1483.0509" x2="1752.4369" y1="459.0286" y2="459.0286"/><text fill="#000000" font-family="sans-serif" font-size="16.1822" lengthAdjust="spacing" textLength="238.9254" x="1507.8001" y="453.3084">invite von Nutzer A ist erlaubt</text><polygon fill="#000000" points="562.0934,494.0479,571.6124,497.8554,562.0934,501.663,565.901,497.8554" style="stroke:#000000;stroke-width:0.9518940274227283;"/><line style="stroke:#000000;stroke-width:0.9518940274227283;" x1="298.4188" x2="567.8048" y1="497.8554" y2="497.8554"/><text fill="#000000" font-family="sans-serif" font-size="16.1822" lengthAdjust="spacing" textLength="96.1413" x="305.082" y="492.1353">create room</text><polygon fill="#000000" points="308.8896,526.2115,299.3707,530.0191,308.8896,533.8266,305.082,530.0191" style="stroke:#000000;stroke-width:0.9518940274227283;"/><line style="stroke:#000000;stroke-width:0.9518940274227283;stroke-dasharray:2.0,2.0;" x1="303.1782" x2="572.5643" y1="530.0191" y2="530.0191"/><text fill="#000000" font-family="sans-serif" font-size="16.1822" lengthAdjust="spacing" textLength="105.6602" x="461.1927" y="524.2989">room created</text><polygon fill="#000000" points="562.0934,558.3751,571.6124,562.1827,562.0934,565.9902,565.901,562.1827" style="stroke:#000000;stroke-width:0.9518940274227283;"/><line style="stroke:#000000;stroke-width:0.9518940274227283;" x1="298.4188" x2="567.8048" y1="562.1827" y2="562.1827"/><text fill="#000000" font-family="sans-serif" font-size="16.1822" lengthAdjust="spacing" textLength="252.2519" x="305.082" y="556.4625">invite von Nutzer A an Nutzer B</text><polygon fill="#000000" points="1457.3498,590.5387,1466.8687,594.3463,1457.3498,598.1538,1461.1573,594.3463" style="stroke:#000000;stroke-width:0.9518940274227283;"/><line style="stroke:#000000;stroke-width:0.9518940274227283;" x1="583.0351" x2="1463.0611" y1="594.3463" y2="594.3463"/><text fill="#000000" font-family="sans-serif" font-size="16.1822" lengthAdjust="spacing" textLength="252.2519" x="589.6983" y="588.6261">invite von Nutzer A an Nutzer B</text><path d="M180.3839,608.6247 L241.3051,608.6247 L241.3051,615.2879 L231.7862,624.8069 L180.3839,624.8069 L180.3839,608.6247 " fill="#EEEEEE" style="stroke:#000000;stroke-width:0.9518940274227283;"/><rect fill="none" height="712.4629" style="stroke:#000000;stroke-width:1.9037880548454567;" width="1691.0397" x="180.3839" y="608.6247"/><text fill="#000000" font-family="sans-serif" font-size="12.3746" font-weight="bold" lengthAdjust="spacing" textLength="18.086" x="194.6623" y="621.063">alt</text><text fill="#000000" font-family="sans-serif" font-size="10.4708" font-weight="bold" lengthAdjust="spacing" textLength="191.3307" x="255.5835" y="620.2477">[invite von Nutzer A ist erlaubt]</text><polygon fill="#000000" points="1741.9661,645.6742,1751.485,649.4818,1741.9661,653.2893,1745.7736,649.4818" style="stroke:#000000;stroke-width:0.9518940274227283;"/><line style="stroke:#000000;stroke-width:0.9518940274227283;" x1="1478.2914" x2="1747.6774" y1="649.4818" y2="649.4818"/><text fill="#000000" font-family="sans-serif" font-size="16.1822" lengthAdjust="spacing" textLength="252.2519" x="1484.9547" y="643.7616">invite von Nutzer A an Nutzer B</text><line style="stroke:#000000;stroke-width:0.9518940274227283;stroke-dasharray:2.0,2.0;" x1="180.3839" x2="1871.4237" y1="658.0488" y2="658.0488"/><text fill="#000000" font-family="sans-serif" font-size="10.4708" font-weight="bold" lengthAdjust="spacing" textLength="206.561" x="185.1434" y="667.7681">[invite von Nutzer A nicht erlaubt]</text><polygon fill="#000000" points="1156.5512,748.4416,1147.0323,752.2491,1156.5512,756.0567,1152.7437,752.2491" style="stroke:#000000;stroke-width:0.9518940274227283;"/><line style="stroke:#000000;stroke-width:0.9518940274227283;" x1="1150.8399" x2="1467.8206" y1="752.2491" y2="752.2491"/><text fill="#000000" font-family="sans-serif" font-size="16.1822" lengthAdjust="spacing" textLength="125.65" x="1336.4592" y="690.0177">REST Operation</text><text fill="#000000" font-family="sans-serif" font-size="16.1822" lengthAdjust="spacing" textLength="203.7053" x="1258.4039" y="708.8548">IsAllowedCommunication</text><text fill="#000000" font-family="sans-serif" font-size="16.1822" lengthAdjust="spacing" textLength="164.6777" x="1297.4316" y="727.6918">(src=MXID Nutzer A,</text><text fill="#000000" font-family="sans-serif" font-size="16.1822" lengthAdjust="spacing" textLength="162.7739" x="1299.3353" y="746.5289">dst=MXID Nutzer B)</text><line style="stroke:#000000;stroke-width:0.9518940274227283;" x1="1146.0804" x2="1186.06" y1="803.2498" y2="803.2498"/><line style="stroke:#000000;stroke-width:0.9518940274227283;" x1="1186.06" x2="1186.06" y1="803.2498" y2="815.6244"/><line style="stroke:#000000;stroke-width:0.9518940274227283;" x1="1147.0323" x2="1186.06" y1="815.6244" y2="815.6244"/><polygon fill="#000000" points="1156.5512,811.8169,1147.0323,815.6244,1156.5512,819.432,1152.7437,815.6244" style="stroke:#000000;stroke-width:0.9518940274227283;"/><text fill="#000000" font-family="sans-serif" font-size="16.1822" lengthAdjust="spacing" textLength="245.5887" x="1152.7437" y="778.6925">hashA = hash(MXID Nutzer A),</text><text fill="#000000" font-family="sans-serif" font-size="16.1822" lengthAdjust="spacing" textLength="242.733" x="1152.7437" y="797.5296">hashB = hash(MXID Nutzer B)</text><polygon fill="#000000" points="813.8694,862.8176,804.3505,866.6251,813.8694,870.4327,810.0618,866.6251" style="stroke:#000000;stroke-width:0.9518940274227283;"/><line style="stroke:#000000;stroke-width:0.9518940274227283;" x1="808.158" x2="1135.6096" y1="866.6251" y2="866.6251"/><text fill="#000000" font-family="sans-serif" font-size="16.1822" lengthAdjust="spacing" textLength="125.65" x="1004.2482" y="842.0679">REST Operation</text><text fill="#000000" font-family="sans-serif" font-size="16.1822" lengthAdjust="spacing" textLength="267.4822" x="862.416" y="860.905">WhereIs(hashA), WhereIs(hashB)</text><polygon fill="#000000" points="1125.1387,913.8183,1134.6577,917.6258,1125.1387,921.4334,1128.9463,917.6258" style="stroke:#000000;stroke-width:0.9518940274227283;"/><line style="stroke:#000000;stroke-width:0.9518940274227283;stroke-dasharray:2.0,2.0;" x1="798.6391" x2="1130.8501" y1="917.6258" y2="917.6258"/><text fill="#000000" font-family="sans-serif" font-size="16.1822" lengthAdjust="spacing" textLength="304.6061" x="805.3023" y="893.0686">Response (hashA is in PractitionerDir),</text><text fill="#000000" font-family="sans-serif" font-size="16.1822" lengthAdjust="spacing" textLength="310.3175" x="805.3023" y="911.9056">Response (hashB is in OrganizationDir)</text><line style="stroke:#000000;stroke-width:0.9518940274227283;" x1="1146.0804" x2="1186.06" y1="949.7894" y2="949.7894"/><line style="stroke:#000000;stroke-width:0.9518940274227283;" x1="1186.06" x2="1186.06" y1="949.7894" y2="962.1641"/><line style="stroke:#000000;stroke-width:0.9518940274227283;" x1="1147.0323" x2="1186.06" y1="962.1641" y2="962.1641"/><polygon fill="#000000" points="1156.5512,958.3565,1147.0323,962.1641,1156.5512,965.9716,1152.7437,962.1641" style="stroke:#000000;stroke-width:0.9518940274227283;"/><text fill="#000000" font-family="sans-serif" font-size="16.1822" lengthAdjust="spacing" textLength="190.3788" x="1152.7437" y="944.0693">Cache Response (1 Tag)</text><line style="stroke:#000000;stroke-width:0.9518940274227283;" x1="1146.0804" x2="1186.06" y1="1107.3502" y2="1107.3502"/><line style="stroke:#000000;stroke-width:0.9518940274227283;" x1="1186.06" x2="1186.06" y1="1107.3502" y2="1119.7248"/><line style="stroke:#000000;stroke-width:0.9518940274227283;" x1="1147.0323" x2="1186.06" y1="1119.7248" y2="1119.7248"/><polygon fill="#000000" points="1156.5512,1115.9173,1147.0323,1119.7248,1156.5512,1123.5324,1152.7437,1119.7248" style="stroke:#000000;stroke-width:0.9518940274227283;"/><text fill="#000000" font-family="sans-serif" font-size="16.1822" lengthAdjust="spacing" textLength="73.2958" x="1152.7437" y="988.6075">Decision[</text><text fill="#000000" font-family="sans-serif" font-size="16.1822" lengthAdjust="spacing" textLength="280.8087" x="1152.7437" y="1007.4446">if hashB is in organization directory</text><text fill="#000000" font-family="sans-serif" font-size="16.1822" lengthAdjust="spacing" textLength="75.1996" x="1152.7437" y="1026.2817">then true</text><text fill="#000000" font-family="sans-serif" font-size="16.1822" lengthAdjust="spacing" textLength="309.3656" x="1152.7437" y="1045.1188">else if hashA is in practitioner directory</text><text fill="#000000" font-family="sans-serif" font-size="16.1822" lengthAdjust="spacing" textLength="293.1834" x="1157.5031" y="1063.9558">and hashB is in practitioner directory</text><text fill="#000000" font-family="sans-serif" font-size="16.1822" lengthAdjust="spacing" textLength="75.1996" x="1152.7437" y="1082.7929">then true</text><text fill="#000000" font-family="sans-serif" font-size="16.1822" lengthAdjust="spacing" textLength="79.9591" x="1152.7437" y="1101.63">else false]</text><polygon fill="#000000" points="1457.3498,1148.0809,1466.8687,1151.8884,1457.3498,1155.696,1461.1573,1151.8884" style="stroke:#000000;stroke-width:0.9518940274227283;"/><line style="stroke:#000000;stroke-width:0.9518940274227283;stroke-dasharray:2.0,2.0;" x1="1146.0804" x2="1463.0611" y1="1151.8884" y2="1151.8884"/><text fill="#000000" font-family="sans-serif" font-size="16.1822" lengthAdjust="spacing" textLength="113.2754" x="1152.7437" y="1146.1683">Response true</text><polygon fill="#000000" points="1746.7255,1180.2445,1756.2445,1184.0521,1746.7255,1187.8596,1750.5331,1184.0521" style="stroke:#000000;stroke-width:0.9518940274227283;"/><line style="stroke:#000000;stroke-width:0.9518940274227283;" x1="1478.2914" x2="1752.4369" y1="1184.0521" y2="1184.0521"/><text fill="#000000" font-family="sans-serif" font-size="16.1822" lengthAdjust="spacing" textLength="252.2519" x="1484.9547" y="1178.3319">invite von Nutzer A an Nutzer B</text><line style="stroke:#000000;stroke-width:0.9518940274227283;stroke-dasharray:2.0,2.0;" x1="180.3839" x2="1871.4237" y1="1192.6191" y2="1192.6191"/><text fill="#000000" font-family="sans-serif" font-size="10.4708" font-weight="bold" lengthAdjust="spacing" textLength="144.6879" x="185.1434" y="1202.3384">[Invite ist nicht erlaubt]</text><polygon fill="#000000" points="1457.3498,1226.5006,1466.8687,1230.3082,1457.3498,1234.1157,1461.1573,1230.3082" style="stroke:#000000;stroke-width:0.9518940274227283;"/><line style="stroke:#000000;stroke-width:0.9518940274227283;stroke-dasharray:2.0,2.0;" x1="1141.3209" x2="1463.0611" y1="1230.3082" y2="1230.3082"/><text fill="#000000" font-family="sans-serif" font-size="16.1822" lengthAdjust="spacing" textLength="117.083" x="1147.9842" y="1224.588">Response false</text><polygon fill="#000000" points="593.5059,1258.6642,583.987,1262.4718,593.5059,1266.2793,589.6983,1262.4718" style="stroke:#000000;stroke-width:0.9518940274227283;"/><line style="stroke:#000000;stroke-width:0.9518940274227283;" x1="587.7946" x2="1472.5801" y1="1262.4718" y2="1262.4718"/><text fill="#000000" font-family="sans-serif" font-size="16.1822" lengthAdjust="spacing" textLength="426.4485" x="1040.4202" y="1256.7516">ERROR: invite von Nutzer A an Nutzer B nicht erlaubt</text><polygon fill="#000000" points="308.8896,1309.6649,299.3707,1313.4725,308.8896,1317.28,305.082,1313.4725" style="stroke:#000000;stroke-width:0.9518940274227283;"/><line style="stroke:#000000;stroke-width:0.9518940274227283;stroke-dasharray:2.0,2.0;" x1="303.1782" x2="572.5643" y1="1313.4725" y2="1313.4725"/><text fill="#000000" font-family="sans-serif" font-size="16.1822" lengthAdjust="spacing" textLength="220.8394" x="346.0135" y="1288.9152">ERROR: invite von Nutzer A</text><text fill="#000000" font-family="sans-serif" font-size="16.1822" lengthAdjust="spacing" textLength="200.8496" x="366.0033" y="1307.7523">an Nutzer B nicht erlaubt</text><!--MD5=[7764adf8f94a989be904ac289f4f4d58]
@startuml
skinparam sequenceMessageAlign direction
skinparam minClassWidth 200
skinparam BoxPadding 1
skinparam sequenceReferenceHeaderBackgroundColor palegreen
scale max 2048 width

skinparam sequence {
ArrowColor black
ArrowFontSize 17
ActorBorderColor black
LifeLineBorderColor black
LifeLineBackgroundColor Gainsboro

ParticipantBorderColor Motivation
ParticipantBackgroundColor Motivation
ParticipantFontName Impact
ParticipantFontSize 20
ParticipantFontColor black
ParticipantBorderColor Black
ParticipantBackgroundColor MOTIVATION

ActorBackgroundColor Gainsboro
ActorFontColor black
ActorFontSize 20
ActorFontName Aapex
}

actor a as "Nutzer A"
participant cl as "TI-M Client A"
participant mp as "Messenger-Service A\n(Messenger-Proxy +\nHomeserver)"
participant fd as "FHIR-Directory"
participant rdb as "Registrierungsdienst B"
participant mpb as "Messenger-Service B\n(Messenger-Proxy +\nHomeserver)"
participant clb as "TI-M Client B"
actor b as "Nutzer B"

alt Suche im FHIR-Directory
a -> cl: möchte TI-M Kontakt zum\nchatten finden
activate cl
cl -> fd: FHIR search request
activate fd
fd - -> cl: FHIR response mit MXID von Nutzer B
deactivate fd
end
alt Tauscht bei persönlichem Treffen MXID mit Nutzer B aus
a -> b: Kontaktdaten austauschen per App
a -> cl: MXID von Nutzer B\nzu Kontakten hinzufügen
b -> clb: MXID von Nutzer A\nzu Kontakten hinzufügen
activate clb
cl -> mp: invite von Nutzer B ist erlaubt
clb -> mpb: invite von Nutzer A ist erlaubt
activate mpb
end
cl -> mp: create room
activate mp
mp - -> cl: room created

' Invite
cl -> mp: invite von Nutzer A an Nutzer B
mp -> mpb: invite von Nutzer A an Nutzer B
alt invite von Nutzer A ist erlaubt
mpb -> clb: invite von Nutzer A an Nutzer B
else invite von Nutzer A nicht erlaubt
mpb -> rdb: REST Operation\nIsAllowedCommunication\n(src=MXID Nutzer A,\n dst=MXID Nutzer B)
activate rdb
rdb -> rdb: hashA = hash(MXID Nutzer A),\nhashB = hash(MXID Nutzer B)
rdb -> fd: REST Operation\nWhereIs(hashA), WhereIs(hashB)
activate fd
fd - -> rdb: Response (hashA is in PractitionerDir),\nResponse (hashB is in OrganizationDir)
deactivate fd
rdb -> rdb: Cache Response (1 Tag)
rdb -> rdb: Decision[\nif hashB is in organization directory\nthen true\nelse if hashA is in practitioner directory\n and hashB is in practitioner directory\nthen true\nelse false]
rdb - -> mpb: Response true
mpb -> clb: invite von Nutzer A an Nutzer B
deactivate clb
else Invite ist nicht erlaubt
rdb - -> mpb: Response false
deactivate rdb
mpb -> mp: ERROR: invite von Nutzer A an Nutzer B nicht erlaubt
deactivate mpb
mp - -> cl: ERROR: invite von Nutzer A\nan Nutzer B nicht erlaubt
end
deactivate mp
deactivate cl
@enduml

@startuml
skinparam sequenceMessageAlign direction
skinparam minClassWidth 200
skinparam BoxPadding 1
skinparam sequenceReferenceHeaderBackgroundColor palegreen
scale max 2048 width

skinparam sequence {
ArrowColor black
ArrowFontSize 17
ActorBorderColor black
LifeLineBorderColor black
LifeLineBackgroundColor Gainsboro

ParticipantBorderColor Motivation
ParticipantBackgroundColor Motivation
ParticipantFontName Impact
ParticipantFontSize 20
ParticipantFontColor black
ParticipantBorderColor Black
ParticipantBackgroundColor MOTIVATION

ActorBackgroundColor Gainsboro
ActorFontColor black
ActorFontSize 20
ActorFontName Aapex
}

actor a as "Nutzer A"
participant cl as "TI-M Client A"
participant mp as "Messenger-Service A\n(Messenger-Proxy +\nHomeserver)"
participant fd as "FHIR-Directory"
participant rdb as "Registrierungsdienst B"
participant mpb as "Messenger-Service B\n(Messenger-Proxy +\nHomeserver)"
participant clb as "TI-M Client B"
actor b as "Nutzer B"

alt Suche im FHIR-Directory
a -> cl: möchte TI-M Kontakt zum\nchatten finden
activate cl
cl -> fd: FHIR search request
activate fd
fd - -> cl: FHIR response mit MXID von Nutzer B
deactivate fd
end
alt Tauscht bei persönlichem Treffen MXID mit Nutzer B aus
a -> b: Kontaktdaten austauschen per App
a -> cl: MXID von Nutzer B\nzu Kontakten hinzufügen
b -> clb: MXID von Nutzer A\nzu Kontakten hinzufügen
activate clb
cl -> mp: invite von Nutzer B ist erlaubt
clb -> mpb: invite von Nutzer A ist erlaubt
activate mpb
end
cl -> mp: create room
activate mp
mp - -> cl: room created

cl -> mp: invite von Nutzer A an Nutzer B
mp -> mpb: invite von Nutzer A an Nutzer B
alt invite von Nutzer A ist erlaubt
mpb -> clb: invite von Nutzer A an Nutzer B
else invite von Nutzer A nicht erlaubt
mpb -> rdb: REST Operation\nIsAllowedCommunication\n(src=MXID Nutzer A,\n dst=MXID Nutzer B)
activate rdb
rdb -> rdb: hashA = hash(MXID Nutzer A),\nhashB = hash(MXID Nutzer B)
rdb -> fd: REST Operation\nWhereIs(hashA), WhereIs(hashB)
activate fd
fd - -> rdb: Response (hashA is in PractitionerDir),\nResponse (hashB is in OrganizationDir)
deactivate fd
rdb -> rdb: Cache Response (1 Tag)
rdb -> rdb: Decision[\nif hashB is in organization directory\nthen true\nelse if hashA is in practitioner directory\n and hashB is in practitioner directory\nthen true\nelse false]
rdb - -> mpb: Response true
mpb -> clb: invite von Nutzer A an Nutzer B
deactivate clb
else Invite ist nicht erlaubt
rdb - -> mpb: Response false
deactivate rdb
mpb -> mp: ERROR: invite von Nutzer A an Nutzer B nicht erlaubt
deactivate mpb
mp - -> cl: ERROR: invite von Nutzer A\nan Nutzer B nicht erlaubt
end
deactivate mp
deactivate cl
@enduml

PlantUML version 1.2021.16(Wed Dec 08 17:25:22 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>