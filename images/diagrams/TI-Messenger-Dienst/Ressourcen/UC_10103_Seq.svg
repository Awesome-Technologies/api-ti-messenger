<<<<<<< HEAD
<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1061px" preserveAspectRatio="none" style="width:1460px;height:1061px;background:#FFFFFF;" version="1.1" viewBox="0 0 1460 1061" width="1460px" zoomAndPan="magnify"><defs/><g><rect fill="#F5F5F5" height="1049.2891" style="stroke:#181818;stroke-width:0.5;" width="435" x="220" y="6"/><text fill="#000000" font-family="sans-serif" font-size="19" font-weight="bold" lengthAdjust="spacing" textLength="99" x="385.5" y="23.6362">Endgerät</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="5" x="484.5" y="25.0513"> </text><rect fill="#DCDCDC" height="730.375" style="stroke:#000000;stroke-width:1.0;" width="10" x="345.5" y="172.3516"/><rect fill="#DCDCDC" height="270.1172" style="stroke:#000000;stroke-width:1.0;" width="10" x="564" y="298.7188"/><rect fill="#DCDCDC" height="101.3672" style="stroke:#000000;stroke-width:1.0;" width="10" x="739" y="366.2969"/><rect fill="#DCDCDC" height="14" style="stroke:#000000;stroke-width:1.0;" width="10" x="913" y="400.0859"/><rect fill="#DCDCDC" height="33.7891" style="stroke:#000000;stroke-width:1.0;" width="10" x="1120.5" y="206.1406"/><rect fill="#DCDCDC" height="207.5234" style="stroke:#000000;stroke-width:1.0;" width="10" x="1120.5" y="661.4141"/><rect fill="#DCDCDC" height="303.9063" style="stroke:#000000;stroke-width:1.0;" width="10" x="1367.5" y="298.7188"/><rect fill="#DCDCDC" height="53.5781" style="stroke:#000000;stroke-width:1.0;" width="10" x="1367.5" y="714.9922"/><rect fill="#FFE4E1" height="53.3828" style="stroke:#000000;stroke-width:1.5;" width="651" x="10" y="482.6641"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="116" x2="116" y1="111.5625" y2="945.7266"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="350" x2="350" y1="111.5625" y2="945.7266"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="569" x2="569" y1="111.5625" y2="945.7266"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="744" x2="744" y1="111.5625" y2="945.7266"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="918" x2="918" y1="111.5625" y2="945.7266"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1125" x2="1125" y1="111.5625" y2="945.7266"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1372.5" x2="1372.5" y1="111.5625" y2="945.7266"/><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="187" x="20" y="83.5645">Akteur in der Rolle</text><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="110" x="58.5" y="106.8457">Org-Admin</text><ellipse cx="116.5" cy="13.5" fill="#DCDCDC" rx="8" ry="8" style="stroke:#000000;stroke-width:0.5;"/><path d="M116.5,21.5 L116.5,48.5 M103.5,29.5 L129.5,29.5 M116.5,48.5 L103.5,63.5 M116.5,48.5 L129.5,63.5 " fill="none" style="stroke:#000000;stroke-width:0.5;"/><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="187" x="20" y="963.291">Akteur in der Rolle</text><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="110" x="58.5" y="986.5723">Org-Admin</text><ellipse cx="116.5" cy="999.7891" fill="#DCDCDC" rx="8" ry="8" style="stroke:#000000;stroke-width:0.5;"/><path d="M116.5,1007.7891 L116.5,1034.7891 M103.5,1015.7891 L129.5,1015.7891 M116.5,1034.7891 L103.5,1049.7891 M116.5,1034.7891 L129.5,1049.7891 " fill="none" style="stroke:#000000;stroke-width:0.5;"/><rect fill="#EFEFFF" height="60.5625" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="253" x="224" y="50"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="132" x="281.5" y="75.5645">Frontend des</text><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="239" x="231" y="98.8457">Registrierungs-Dienstes</text><rect fill="#EFEFFF" height="60.5625" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="253" x="224" y="944.7266"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="132" x="281.5" y="970.291">Frontend des</text><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="239" x="231" y="993.5723">Registrierungs-Dienstes</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="164" x="487" y="73.2813"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="138" x="500" y="98.8457">Authenticator</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="164" x="487" y="944.7266"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="138" x="500" y="970.291">Authenticator</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="164" x="662" y="73.2813"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="103" x="692.5" y="98.8457">Konnektor</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="164" x="662" y="944.7266"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="103" x="692.5" y="970.291">Konnektor</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="164" x="836" y="73.2813"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="109" x="863.5" y="98.8457">eHealth KT</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="164" x="836" y="944.7266"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="109" x="863.5" y="970.291">eHealth KT</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="231" x="1010" y="73.2813"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="217" x="1017" y="98.8457">Registrierungs-Dienst</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="231" x="1010" y="944.7266"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="217" x="1017" y="970.291">Registrierungs-Dienst</text><rect fill="#EFEFFF" height="60.5625" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="164" x="1290.5" y="50"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="90" x="1324.5" y="75.5645">zentraler</text><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="104" x="1320.5" y="98.8457">IDP-Dienst</text><rect fill="#EFEFFF" height="60.5625" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="164" x="1290.5" y="944.7266"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="90" x="1324.5" y="970.291">zentraler</text><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="104" x="1320.5" y="993.5723">IDP-Dienst</text><rect fill="#DCDCDC" height="730.375" style="stroke:#000000;stroke-width:1.0;" width="10" x="345.5" y="172.3516"/><rect fill="#DCDCDC" height="270.1172" style="stroke:#000000;stroke-width:1.0;" width="10" x="564" y="298.7188"/><rect fill="#DCDCDC" height="101.3672" style="stroke:#000000;stroke-width:1.0;" width="10" x="739" y="366.2969"/><rect fill="#DCDCDC" height="14" style="stroke:#000000;stroke-width:1.0;" width="10" x="913" y="400.0859"/><rect fill="#DCDCDC" height="33.7891" style="stroke:#000000;stroke-width:1.0;" width="10" x="1120.5" y="206.1406"/><rect fill="#DCDCDC" height="207.5234" style="stroke:#000000;stroke-width:1.0;" width="10" x="1120.5" y="661.4141"/><rect fill="#DCDCDC" height="303.9063" style="stroke:#000000;stroke-width:1.0;" width="10" x="1367.5" y="298.7188"/><rect fill="#DCDCDC" height="53.5781" style="stroke:#000000;stroke-width:1.0;" width="10" x="1367.5" y="714.9922"/><polygon fill="#000000" points="333.5,168.3516,343.5,172.3516,333.5,176.3516,337.5,172.3516" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="116.5" x2="339.5" y1="172.3516" y2="172.3516"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="206" x="123.5" y="166.3423">Organisation verifizieren</text><polygon fill="#000000" points="1108.5,202.1406,1118.5,206.1406,1108.5,210.1406,1112.5,206.1406" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="355.5" x2="1114.5" y1="206.1406" y2="206.1406"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="119" x="362.5" y="200.1313">POST /register</text><polygon fill="#000000" points="366.5,235.9297,356.5,239.9297,366.5,243.9297,362.5,239.9297" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="360.5" x2="1124.5" y1="239.9297" y2="239.9297"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="323" x="795.5" y="233.9204">Redirect to IDP Authorization Endpoint</text><polygon fill="#000000" points="1355.5,294.7188,1365.5,298.7188,1355.5,302.7188,1359.5,298.7188" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="355.5" x2="1361.5" y1="298.7188" y2="298.7188"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="124" x="362.5" y="292.7095">GET /authorize</text><polygon fill="#000000" points="585,328.5078,575,332.5078,585,336.5078,581,332.5078" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="579" x2="1366.5" y1="332.5078" y2="332.5078"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="209" x="1151.5" y="326.4985">Authentication challenge</text><polygon fill="#000000" points="727,362.2969,737,366.2969,727,370.2969,731,366.2969" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="574" x2="733" y1="366.2969" y2="366.2969"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="124" x="581" y="360.2876">SignDocument</text><polygon fill="#000000" points="901,396.0859,911,400.0859,901,404.0859,905,400.0859" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="749" x2="907" y1="400.0859" y2="400.0859"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="139" x="756" y="394.0767">SICCT command</text><polygon fill="#000000" points="760,410.0859,750,414.0859,760,418.0859,756,414.0859" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="754" x2="917" y1="414.0859" y2="414.0859"/><polygon fill="#000000" points="585,463.6641,575,467.6641,585,471.6641,581,467.6641" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="579" x2="743" y1="467.6641" y2="467.6641"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="79" x="596" y="441.8657">Response</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="141" x="596" y="461.6548">signedDocument</text><path d="M10,482.6641 L80,482.6641 L80,489.7969 L70,499.7969 L10,499.7969 L10,482.6641 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="53.3828" style="stroke:#000000;stroke-width:1.5;" width="651" x="10" y="482.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="25" x="25" y="495.731">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="95" y="499.5308">[</text><text fill="#000000" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="67" x="100" y="498.5874">Abbruch</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="167" y="499.5308">]</text><polygon fill="#000000" points="127.5,524.0469,117.5,528.0469,127.5,532.0469,123.5,528.0469" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="121.5" x2="563" y1="528.0469" y2="528.0469"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="222" x="335" y="522.0376">SMC-B nicht freigeschaltet</text><polygon fill="#000000" points="1355.5,564.8359,1365.5,568.8359,1355.5,572.8359,1359.5,568.8359" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="569" x2="1361.5" y1="568.8359" y2="568.8359"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="203" x="576" y="562.8267">Authentication response</text><polygon fill="#000000" points="366.5,598.625,356.5,602.625,366.5,606.625,362.5,602.625" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="360.5" x2="1371.5" y1="602.625" y2="602.625"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="156" x="1209.5" y="596.6157">Authorization code</text><polygon fill="#000000" points="1108.5,657.4141,1118.5,661.4141,1108.5,665.4141,1112.5,661.4141" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="355.5" x2="1114.5" y1="661.4141" y2="661.4141"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="294" x="362.5" y="655.4048">POST /register (Authorization code)</text><polygon fill="#000000" points="1355.5,710.9922,1365.5,714.9922,1355.5,718.9922,1359.5,714.9922" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="1130.5" x2="1361.5" y1="714.9922" y2="714.9922"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="178" x="1137.5" y="689.1938">POST /tokenEndpoint</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="177" x="1137.5" y="708.9829">{authorization code}</text><polygon fill="#000000" points="1141.5,764.5703,1131.5,768.5703,1141.5,772.5703,1137.5,768.5703" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1135.5" x2="1371.5" y1="768.5703" y2="768.5703"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="79" x="1152.5" y="742.772">Response</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="213" x="1152.5" y="762.561">{id_token, access_token}</text><line style="stroke:#000000;stroke-width:1.0;" x1="1130.5" x2="1172.5" y1="822.1484" y2="822.1484"/><line style="stroke:#000000;stroke-width:1.0;" x1="1172.5" x2="1172.5" y1="822.1484" y2="835.1484"/><line style="stroke:#000000;stroke-width:1.0;" x1="1131.5" x2="1172.5" y1="835.1484" y2="835.1484"/><polygon fill="#000000" points="1141.5,831.1484,1131.5,835.1484,1141.5,839.1484,1137.5,835.1484" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="107" x="1137.5" y="796.3501">Organisation</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="134" x="1137.5" y="816.1392">authentifizieren</text><polygon fill="#000000" points="366.5,864.9375,356.5,868.9375,366.5,872.9375,362.5,868.9375" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="360.5" x2="1124.5" y1="868.9375" y2="868.9375"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="252" x="866.5" y="862.9282">status, id_token, access_token</text><polygon fill="#000000" points="127.5,898.7266,117.5,902.7266,127.5,906.7266,123.5,902.7266" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="121.5" x2="349.5" y1="902.7266" y2="902.7266"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="200" x="143.5" y="896.7173">Verifizierung erfolgreich</text><!--MD5=[0fb37074b8ded2c62668000a712cc3ab]
=======
<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1895px" preserveAspectRatio="none" style="width:1502px;height:1895px;background:#FFFFFF;" version="1.1" viewBox="0 0 1502 1895" width="1502px" zoomAndPan="magnify"><defs/><g><rect fill="#F5F5F5" height="1883.9844" style="stroke:#181818;stroke-width:0.5;" width="435" x="290" y="6"/><text fill="#000000" font-family="sans-serif" font-size="19" font-weight="bold" lengthAdjust="spacing" textLength="99" x="455.5" y="23.6362">Endgerät</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="5" x="554.5" y="25.0513"> </text><rect fill="#DCDCDC" height="1116.375" style="stroke:#000000;stroke-width:1.0;" width="10" x="415.5" y="225.1094"/><rect fill="#DCDCDC" height="259.5234" style="stroke:#000000;stroke-width:1.0;" width="10" x="415.5" y="1445.8984"/><rect fill="#DCDCDC" height="345.1172" style="stroke:#000000;stroke-width:1.0;" width="10" x="634" y="374.9375"/><rect fill="#DCDCDC" height="101.3672" style="stroke:#000000;stroke-width:1.0;" width="10" x="809" y="442.5156"/><rect fill="#DCDCDC" height="14" style="stroke:#000000;stroke-width:1.0;" width="10" x="983" y="476.3047"/><rect fill="#DCDCDC" height="45.5195" style="stroke:#000000;stroke-width:1.0;" width="10" x="1190.5" y="270.6289"/><rect fill="#DCDCDC" height="495.0625" style="stroke:#000000;stroke-width:1.0;" width="10" x="1190.5" y="812.6328"/><rect fill="#DCDCDC" height="191.9453" style="stroke:#000000;stroke-width:1.0;" width="10" x="1190.5" y="1479.6875"/><rect fill="#DCDCDC" height="378.9063" style="stroke:#000000;stroke-width:1.0;" width="10" x="1398" y="374.9375"/><rect fill="#DCDCDC" height="33.7891" style="stroke:#000000;stroke-width:1.0;" width="10" x="1398" y="866.2109"/><rect fill="#F0F8FF" height="1584.8594" style="stroke:#000000;stroke-width:1.5;" width="1485" x="10" y="153.5625"/><rect fill="#FFE4E1" height="78.3828" style="stroke:#000000;stroke-width:1.5;" width="711" x="20" y="583.8828"/><rect fill="#FFE4E1" height="112.1719" style="stroke:#000000;stroke-width:1.5;" width="1301" x="20" y="1071.1563"/><rect fill="#F0F8FF" height="363.9375" style="stroke:none;stroke-width:1.0;" width="1485" x="10" y="1374.4844"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="126" x2="126" y1="111.5625" y2="1780.4219"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="420" x2="420" y1="111.5625" y2="1780.4219"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="639" x2="639" y1="111.5625" y2="1780.4219"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="814" x2="814" y1="111.5625" y2="1780.4219"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="988" x2="988" y1="111.5625" y2="1780.4219"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1195" x2="1195" y1="111.5625" y2="1780.4219"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1403" x2="1403" y1="111.5625" y2="1780.4219"/><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="187" x="30" y="83.5645">Akteur in der Rolle</text><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="110" x="68.5" y="106.8457">Org-Admin</text><ellipse cx="126.5" cy="13.5" fill="#DCDCDC" rx="8" ry="8" style="stroke:#000000;stroke-width:0.5;"/><path d="M126.5,21.5 L126.5,48.5 M113.5,29.5 L139.5,29.5 M126.5,48.5 L113.5,63.5 M126.5,48.5 L139.5,63.5 " fill="none" style="stroke:#000000;stroke-width:0.5;"/><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="187" x="30" y="1797.9863">Akteur in der Rolle</text><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="110" x="68.5" y="1821.2676">Org-Admin</text><ellipse cx="126.5" cy="1834.4844" fill="#DCDCDC" rx="8" ry="8" style="stroke:#000000;stroke-width:0.5;"/><path d="M126.5,1842.4844 L126.5,1869.4844 M113.5,1850.4844 L139.5,1850.4844 M126.5,1869.4844 L113.5,1884.4844 M126.5,1869.4844 L139.5,1884.4844 " fill="none" style="stroke:#000000;stroke-width:0.5;"/><rect fill="#EFEFFF" height="60.5625" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="253" x="294" y="50"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="132" x="351.5" y="75.5645">Frontend des</text><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="239" x="301" y="98.8457">Registrierungs-Dienstes</text><rect fill="#EFEFFF" height="60.5625" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="253" x="294" y="1779.4219"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="132" x="351.5" y="1804.9863">Frontend des</text><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="239" x="301" y="1828.2676">Registrierungs-Dienstes</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="164" x="557" y="73.2813"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="138" x="570" y="98.8457">Authenticator</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="164" x="557" y="1779.4219"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="138" x="570" y="1804.9863">Authenticator</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="164" x="732" y="73.2813"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="103" x="762.5" y="98.8457">Konnektor</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="164" x="732" y="1779.4219"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="103" x="762.5" y="1804.9863">Konnektor</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="164" x="906" y="73.2813"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="109" x="933.5" y="98.8457">eHealth KT</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="164" x="906" y="1779.4219"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="109" x="933.5" y="1804.9863">eHealth KT</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="231" x="1080" y="73.2813"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="217" x="1087" y="98.8457">Registrierungs-Dienst</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="231" x="1080" y="1779.4219"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="217" x="1087" y="1804.9863">Registrierungs-Dienst</text><rect fill="#EFEFFF" height="60.5625" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="164" x="1321" y="50"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="90" x="1355" y="75.5645">zentraler</text><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="104" x="1351" y="98.8457">IDP-Dienst</text><rect fill="#EFEFFF" height="60.5625" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="164" x="1321" y="1779.4219"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="90" x="1355" y="1804.9863">zentraler</text><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="104" x="1351" y="1828.2676">IDP-Dienst</text><rect fill="#DCDCDC" height="1116.375" style="stroke:#000000;stroke-width:1.0;" width="10" x="415.5" y="225.1094"/><rect fill="#DCDCDC" height="259.5234" style="stroke:#000000;stroke-width:1.0;" width="10" x="415.5" y="1445.8984"/><rect fill="#DCDCDC" height="345.1172" style="stroke:#000000;stroke-width:1.0;" width="10" x="634" y="374.9375"/><rect fill="#DCDCDC" height="101.3672" style="stroke:#000000;stroke-width:1.0;" width="10" x="809" y="442.5156"/><rect fill="#DCDCDC" height="14" style="stroke:#000000;stroke-width:1.0;" width="10" x="983" y="476.3047"/><rect fill="#DCDCDC" height="45.5195" style="stroke:#000000;stroke-width:1.0;" width="10" x="1190.5" y="270.6289"/><rect fill="#DCDCDC" height="495.0625" style="stroke:#000000;stroke-width:1.0;" width="10" x="1190.5" y="812.6328"/><rect fill="#DCDCDC" height="191.9453" style="stroke:#000000;stroke-width:1.0;" width="10" x="1190.5" y="1479.6875"/><rect fill="#DCDCDC" height="378.9063" style="stroke:#000000;stroke-width:1.0;" width="10" x="1398" y="374.9375"/><rect fill="#DCDCDC" height="33.7891" style="stroke:#000000;stroke-width:1.0;" width="10" x="1398" y="866.2109"/><path d="M10,153.5625 L74,153.5625 L74,160.6953 L64,170.6953 L10,170.6953 L10,153.5625 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="1584.8594" style="stroke:#000000;stroke-width:1.5;" width="1485" x="10" y="153.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="25" y="166.6294">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="89" y="171.5933">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="515" x="94" y="170.4141">Organisation nicht am Registrierungs-Dienst authentisiert</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="609" y="171.5933">]</text><polygon fill="#000000" points="403.5,221.1094,413.5,225.1094,403.5,229.1094,407.5,225.1094" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="126.5" x2="409.5" y1="225.1094" y2="225.1094"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="206" x="133.5" y="219.1001">Organisation verifizieren</text><polygon fill="#000000" points="1178.5,266.6289,1188.5,270.6289,1178.5,274.6289,1182.5,270.6289" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="425.5" x2="1184.5" y1="270.6289" y2="270.6289"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="119" x="432.5" y="264.6196">POST /register</text><path d="M1205,238.1094 L1205,285.1094 L1453,285.1094 L1453,248.1094 L1443,238.1094 L1205,238.1094 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1443,238.1094 L1443,248.1094 L1453,248.1094 L1443,238.1094 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="174" x="1211" y="257.9609">Schnittstelle wird nicht</text><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="227" x="1211" y="276.5859">durch die gematik spezifiziert</text><polygon fill="#000000" points="436.5,312.1484,426.5,316.1484,436.5,320.1484,432.5,316.1484" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="430.5" x2="1194.5" y1="316.1484" y2="316.1484"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="323" x="865.5" y="310.1392">Redirect to IDP Authorization Endpoint</text><polygon fill="#000000" points="1386,370.9375,1396,374.9375,1386,378.9375,1390,374.9375" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="425.5" x2="1392" y1="374.9375" y2="374.9375"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="124" x="432.5" y="368.9282">GET /authorize</text><polygon fill="#000000" points="655,404.7266,645,408.7266,655,412.7266,651,408.7266" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="649" x2="1397" y1="408.7266" y2="408.7266"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="209" x="1182" y="402.7173">Authentication challenge</text><polygon fill="#000000" points="797,438.5156,807,442.5156,797,446.5156,801,442.5156" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="644" x2="803" y1="442.5156" y2="442.5156"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="124" x="651" y="436.5063">SignDocument</text><polygon fill="#000000" points="971,472.3047,981,476.3047,971,480.3047,975,476.3047" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="819" x2="977" y1="476.3047" y2="476.3047"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="139" x="826" y="470.2954">SICCT command</text><polygon fill="#000000" points="830,486.3047,820,490.3047,830,494.3047,826,490.3047" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="824" x2="987" y1="490.3047" y2="490.3047"/><polygon fill="#000000" points="655,539.8828,645,543.8828,655,547.8828,651,543.8828" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="649" x2="813" y1="543.8828" y2="543.8828"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="79" x="666" y="518.0845">Response</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="141" x="666" y="537.8735">signedDocument</text><path d="M20,583.8828 L90,583.8828 L90,591.0156 L80,601.0156 L20,601.0156 L20,583.8828 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="78.3828" style="stroke:#000000;stroke-width:1.5;" width="711" x="20" y="583.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="25" x="35" y="596.9497">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="105" y="600.7495">[</text><text fill="#000000" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="67" x="110" y="599.8062">Abbruch</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="177" y="600.7495">]</text><polygon fill="#000000" points="137.5,625.2656,127.5,629.2656,137.5,633.2656,133.5,629.2656" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="131.5" x2="633" y1="629.2656" y2="629.2656"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="222" x="405" y="623.2563">SMC-B nicht freigeschaltet</text><polygon fill="#000000" points="1386,716.0547,1396,720.0547,1386,724.0547,1390,720.0547" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="639" x2="1392" y1="720.0547" y2="720.0547"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="203" x="646" y="714.0454">Authentication response</text><polygon fill="#000000" points="436.5,749.8438,426.5,753.8438,436.5,757.8438,432.5,753.8438" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="430.5" x2="1402" y1="753.8438" y2="753.8438"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="156" x="1240" y="747.8345">Authorization code</text><polygon fill="#000000" points="1178.5,808.6328,1188.5,812.6328,1178.5,816.6328,1182.5,812.6328" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="425.5" x2="1184.5" y1="812.6328" y2="812.6328"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="294" x="432.5" y="806.6235">POST /register (Authorization code)</text><polygon fill="#000000" points="1386,862.2109,1396,866.2109,1386,870.2109,1390,866.2109" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="1200.5" x2="1392" y1="866.2109" y2="866.2109"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="178" x="1207.5" y="840.4126">POST /tokenEndpoint</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="177" x="1207.5" y="860.2017">{authorization code}</text><polygon fill="#000000" points="1211.5,896,1201.5,900,1211.5,904,1207.5,900" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1205.5" x2="1402" y1="900" y2="900"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="72" x="1324" y="893.9907">id_token</text><line style="stroke:#000000;stroke-width:1.0;" x1="1200.5" x2="1242.5" y1="1018.1563" y2="1018.1563"/><line style="stroke:#000000;stroke-width:1.0;" x1="1242.5" x2="1242.5" y1="1018.1563" y2="1031.1563"/><line style="stroke:#000000;stroke-width:1.0;" x1="1201.5" x2="1242.5" y1="1031.1563" y2="1031.1563"/><polygon fill="#000000" points="1211.5,1027.1563,1201.5,1031.1563,1211.5,1035.1563,1207.5,1031.1563" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="92" x="1207.5" y="952.7798">enthaltene</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="149" x="1207.5" y="972.5688">ProfessionOID auf</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="170" x="1207.5" y="992.3579">gültige Organisation</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="55" x="1207.5" y="1012.147">prüfen</text><path d="M20,1071.1563 L90,1071.1563 L90,1078.2891 L80,1088.2891 L20,1088.2891 L20,1071.1563 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="112.1719" style="stroke:#000000;stroke-width:1.5;" width="1301" x="20" y="1071.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="25" x="35" y="1084.2231">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="105" y="1088.0229">[</text><text fill="#000000" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="67" x="110" y="1087.0796">Abbruch</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="177" y="1088.0229">]</text><polygon fill="#000000" points="436.5,1112.5391,426.5,1116.5391,436.5,1120.5391,432.5,1116.5391" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="430.5" x2="1189.5" y1="1116.5391" y2="1116.5391"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="315" x="868.5" y="1110.5298">keine gültige ProfessionOID gefunden</text><polygon fill="#000000" points="137.5,1146.3281,127.5,1150.3281,137.5,1154.3281,133.5,1150.3281" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="131.5" x2="414.5" y1="1150.3281" y2="1150.3281"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="265" x="143.5" y="1144.3188">Authentisierung fehlgeschlagen</text><line style="stroke:#000000;stroke-width:1.0;" x1="1200.5" x2="1242.5" y1="1260.9063" y2="1260.9063"/><line style="stroke:#000000;stroke-width:1.0;" x1="1242.5" x2="1242.5" y1="1260.9063" y2="1273.9063"/><line style="stroke:#000000;stroke-width:1.0;" x1="1201.5" x2="1242.5" y1="1273.9063" y2="1273.9063"/><polygon fill="#000000" points="1211.5,1269.9063,1201.5,1273.9063,1211.5,1277.9063,1207.5,1273.9063" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="107" x="1207.5" y="1235.1079">Organisation</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="134" x="1207.5" y="1254.897">authentifizieren</text><polygon fill="#000000" points="436.5,1303.6953,426.5,1307.6953,436.5,1311.6953,432.5,1307.6953" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="430.5" x2="1194.5" y1="1307.6953" y2="1307.6953"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="133" x="1055.5" y="1301.686">status, id_token</text><polygon fill="#000000" points="137.5,1337.4844,127.5,1341.4844,137.5,1345.4844,133.5,1341.4844" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="131.5" x2="419.5" y1="1341.4844" y2="1341.4844"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="200" x="213.5" y="1335.4751">Verifizierung erfolgreich</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="1495" y1="1375.4844" y2="1375.4844"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="15" y="1391.5151">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="465" x="20" y="1390.3359">Organisation am Registrierungs-Dienst authentisiert</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="485" y="1391.5151">]</text><polygon fill="#000000" points="403.5,1441.8984,413.5,1445.8984,403.5,1449.8984,407.5,1445.8984" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="126.5" x2="409.5" y1="1445.8984" y2="1445.8984"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="197" x="133.5" y="1439.8892">Admin Account anlegen</text><polygon fill="#000000" points="1178.5,1475.6875,1188.5,1479.6875,1178.5,1483.6875,1182.5,1479.6875" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="425.5" x2="1184.5" y1="1479.6875" y2="1479.6875"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="371" x="432.5" y="1473.6782">POST /register (id_token, Client-Credentials)</text><line style="stroke:#000000;stroke-width:1.0;" x1="1200.5" x2="1242.5" y1="1513.4766" y2="1513.4766"/><line style="stroke:#000000;stroke-width:1.0;" x1="1242.5" x2="1242.5" y1="1513.4766" y2="1526.4766"/><line style="stroke:#000000;stroke-width:1.0;" x1="1201.5" x2="1242.5" y1="1526.4766" y2="1526.4766"/><polygon fill="#000000" points="1211.5,1522.4766,1201.5,1526.4766,1211.5,1530.4766,1207.5,1526.4766" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="132" x="1207.5" y="1507.4673">id_token prüfen</text><line style="stroke:#000000;stroke-width:1.0;" x1="1200.5" x2="1242.5" y1="1624.8438" y2="1624.8438"/><line style="stroke:#000000;stroke-width:1.0;" x1="1242.5" x2="1242.5" y1="1624.8438" y2="1637.8438"/><line style="stroke:#000000;stroke-width:1.0;" x1="1201.5" x2="1242.5" y1="1637.8438" y2="1637.8438"/><polygon fill="#000000" points="1211.5,1633.8438,1201.5,1637.8438,1211.5,1641.8438,1207.5,1637.8438" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="125" x="1207.5" y="1579.2563">Admin Account</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="166" x="1207.5" y="1599.0454">für die Organisation</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="67" x="1207.5" y="1618.8345">anlegen</text><polygon fill="#000000" points="436.5,1667.6328,426.5,1671.6328,436.5,1675.6328,432.5,1671.6328" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="430.5" x2="1194.5" y1="1671.6328" y2="1671.6328"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="187" x="1001.5" y="1665.6235">status, Admin-Account</text><polygon fill="#000000" points="137.5,1701.4219,127.5,1705.4219,137.5,1709.4219,133.5,1705.4219" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="131.5" x2="419.5" y1="1705.4219" y2="1705.4219"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="144" x="269.5" y="1699.4126">Account angelegt</text><!--MD5=[704188570b2e3cbfd4af94ec3177b1d7]
>>>>>>> master
@startuml
skinparam sequenceMessageAlign direction
skinparam WrapWidth 300
skinparam minClassWidth 150
skinparam BoxPadding 1
scale max 2048 width

skinparam sequence {
ArrowColor black
ArrowFontSize 17
ActorBorderColor black
LifeLineBorderColor black
LifeLineBackgroundColor Gainsboro

ParticipantBorderColor Motivation
ParticipantBackgroundColor Motivation
ParticipantFontName Impact
ParticipantFontSize 20
ParticipantFontColor black
ParticipantBorderColor Black
ParticipantBackgroundColor MOTIVATION

ActorBackgroundColor Gainsboro
ActorFontColor black
ActorFontSize 20
ActorFontName Aapex
}

  actor oa as "Akteur in der Rolle\nOrg-Admin"
    box <size:19>Endgerät</size> #WhiteSmoke
    participant wb as "Frontend des \nRegistrierungs-Dienstes"
    participant au as "Authenticator"
    end box
  participant ko as "Konnektor"
  participant kt as "eHealth KT"
  participant rd as "Registrierungs-Dienst"
  participant ip as "zentraler \nIDP-Dienst"

<<<<<<< HEAD
  |||
  oa -> wb: Organisation verifizieren
    activate wb
  wb -> rd:POST /register 
    activate rd
  rd - -> wb: Redirect to IDP Authorization Endpoint
    deactivate rd
  |||
  wb -> ip: GET /authorize
    activate au
    activate ip
  ip -> au: Authentication challenge
  au -> ko: SignDocument
    activate ko
  ko -> kt: SICCT command
    activate kt
  kt - -> ko
    deactivate kt
  ko - -> au: Response \nsignedDocument
    deactivate ko

opt #MistyRose <size:15>Abbruch</size>
  au -> oa: SMC-B nicht freigeschaltet 
end

  au - ->ip: Authentication response
    deactivate au
  ip - -> wb: Authorization code
    deactivate ip
  |||
  wb -> rd: POST /register (Authorization code)
    activate rd
  rd -> ip: POST /tokenEndpoint\n{authorization code}
    activate ip
  ip - -> rd: Response\n{id_token, access_token}
    deactivate ip
  rd -> rd: Organisation \nauthentifizieren
  rd - -> wb: status, id_token, access_token
    deactivate rd
  wb - -> oa: Verifizierung erfolgreich
    deactivate wb
  |||  
=======
|||
alt#LightGrey #AliceBlue <size:16>Organisation nicht am Registrierungs-Dienst authentisiert</size>
|||
      oa -> wb: Organisation verifizieren
        activate wb
      wb -> rd:POST /register 
      note right: <size:16>Schnittstelle wird nicht \n<size:16>durch die gematik spezifiziert</size>
        activate rd
      rd - -> wb: Redirect to IDP Authorization Endpoint
        deactivate rd
      |||
      wb -> ip: GET /authorize
        activate au
        activate ip
      ip -> au: Authentication challenge
      au -> ko: SignDocument
        activate ko
      ko -> kt: SICCT command
        activate kt
      kt - -> ko
        deactivate kt
      ko - -> au: Response \nsignedDocument
      |||
        deactivate ko
    
    opt #MistyRose <size:15>Abbruch</size>
      au -> oa: SMC-B nicht freigeschaltet 
      |||
    end
      |||
      au - ->ip: Authentication response
        deactivate au
      ip - -> wb: Authorization code
        deactivate ip
      |||
      wb -> rd: POST /register (Authorization code)
        activate rd
      rd -> ip: POST /tokenEndpoint\n{authorization code}
        activate ip
      ip - -> rd: id_token
        deactivate ip
      |||
      rd -> rd: enthaltene \nProfessionOID auf \ngültige Organisation \nprüfen
      |||
      
    opt #MistyRose <size:15>Abbruch</size>
      rd -> wb: keine gültige ProfessionOID gefunden
      wb -> oa: Authentisierung fehlgeschlagen
      |||
    end  
    
      |||
      rd-> rd: Organisation \nauthentifizieren
      rd - -> wb: status, id_token
        deactivate rd
      wb - -> oa: Verifizierung erfolgreich
        deactivate wb
      |||  
      
      else <size:16>Organisation am Registrierungs-Dienst authentisiert</size>
        |||
        oa -> wb: Admin Account anlegen
          activate wb
        wb -> rd: POST /register (id_token, Client-Credentials)
          activate rd
        rd -> rd: id_token prüfen
        |||
        rd -> rd: Admin Account \nfür die Organisation \nanlegen
        rd - -> wb: status, Admin-Account
          deactivate rd
        wb - -> oa: Account angelegt
          deactivate wb
        |||
end
|||
>>>>>>> master
@enduml

PlantUML version 1.2022.5(Sat Apr 30 10:55:52 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>