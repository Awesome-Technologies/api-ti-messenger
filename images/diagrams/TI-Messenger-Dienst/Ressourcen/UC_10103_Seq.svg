<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1061px" preserveAspectRatio="none" style="width:1460px;height:1061px;background:#FFFFFF;" version="1.1" viewBox="0 0 1460 1061" width="1460px" zoomAndPan="magnify"><defs/><g><rect fill="#F5F5F5" height="1049.2891" style="stroke:#181818;stroke-width:0.5;" width="435" x="220" y="6"/><text fill="#000000" font-family="sans-serif" font-size="19" font-weight="bold" lengthAdjust="spacing" textLength="99" x="385.5" y="23.6362">Endgerät</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="5" x="484.5" y="25.0513"> </text><rect fill="#DCDCDC" height="730.375" style="stroke:#000000;stroke-width:1.0;" width="10" x="345.5" y="172.3516"/><rect fill="#DCDCDC" height="270.1172" style="stroke:#000000;stroke-width:1.0;" width="10" x="564" y="298.7188"/><rect fill="#DCDCDC" height="101.3672" style="stroke:#000000;stroke-width:1.0;" width="10" x="739" y="366.2969"/><rect fill="#DCDCDC" height="14" style="stroke:#000000;stroke-width:1.0;" width="10" x="913" y="400.0859"/><rect fill="#DCDCDC" height="33.7891" style="stroke:#000000;stroke-width:1.0;" width="10" x="1120.5" y="206.1406"/><rect fill="#DCDCDC" height="207.5234" style="stroke:#000000;stroke-width:1.0;" width="10" x="1120.5" y="661.4141"/><rect fill="#DCDCDC" height="303.9063" style="stroke:#000000;stroke-width:1.0;" width="10" x="1367.5" y="298.7188"/><rect fill="#DCDCDC" height="53.5781" style="stroke:#000000;stroke-width:1.0;" width="10" x="1367.5" y="714.9922"/><rect fill="#FFE4E1" height="53.3828" style="stroke:#000000;stroke-width:1.5;" width="651" x="10" y="482.6641"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="116" x2="116" y1="111.5625" y2="945.7266"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="350" x2="350" y1="111.5625" y2="945.7266"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="569" x2="569" y1="111.5625" y2="945.7266"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="744" x2="744" y1="111.5625" y2="945.7266"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="918" x2="918" y1="111.5625" y2="945.7266"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1125" x2="1125" y1="111.5625" y2="945.7266"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1372.5" x2="1372.5" y1="111.5625" y2="945.7266"/><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="187" x="20" y="83.5645">Akteur in der Rolle</text><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="110" x="58.5" y="106.8457">Org-Admin</text><ellipse cx="116.5" cy="13.5" fill="#DCDCDC" rx="8" ry="8" style="stroke:#000000;stroke-width:0.5;"/><path d="M116.5,21.5 L116.5,48.5 M103.5,29.5 L129.5,29.5 M116.5,48.5 L103.5,63.5 M116.5,48.5 L129.5,63.5 " fill="none" style="stroke:#000000;stroke-width:0.5;"/><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="187" x="20" y="963.291">Akteur in der Rolle</text><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="110" x="58.5" y="986.5723">Org-Admin</text><ellipse cx="116.5" cy="999.7891" fill="#DCDCDC" rx="8" ry="8" style="stroke:#000000;stroke-width:0.5;"/><path d="M116.5,1007.7891 L116.5,1034.7891 M103.5,1015.7891 L129.5,1015.7891 M116.5,1034.7891 L103.5,1049.7891 M116.5,1034.7891 L129.5,1049.7891 " fill="none" style="stroke:#000000;stroke-width:0.5;"/><rect fill="#EFEFFF" height="60.5625" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="253" x="224" y="50"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="132" x="281.5" y="75.5645">Frontend des</text><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="239" x="231" y="98.8457">Registrierungs-Dienstes</text><rect fill="#EFEFFF" height="60.5625" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="253" x="224" y="944.7266"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="132" x="281.5" y="970.291">Frontend des</text><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="239" x="231" y="993.5723">Registrierungs-Dienstes</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="164" x="487" y="73.2813"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="138" x="500" y="98.8457">Authenticator</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="164" x="487" y="944.7266"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="138" x="500" y="970.291">Authenticator</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="164" x="662" y="73.2813"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="103" x="692.5" y="98.8457">Konnektor</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="164" x="662" y="944.7266"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="103" x="692.5" y="970.291">Konnektor</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="164" x="836" y="73.2813"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="109" x="863.5" y="98.8457">eHealth KT</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="164" x="836" y="944.7266"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="109" x="863.5" y="970.291">eHealth KT</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="231" x="1010" y="73.2813"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="217" x="1017" y="98.8457">Registrierungs-Dienst</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="231" x="1010" y="944.7266"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="217" x="1017" y="970.291">Registrierungs-Dienst</text><rect fill="#EFEFFF" height="60.5625" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="164" x="1290.5" y="50"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="90" x="1324.5" y="75.5645">zentraler</text><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="104" x="1320.5" y="98.8457">IDP-Dienst</text><rect fill="#EFEFFF" height="60.5625" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="164" x="1290.5" y="944.7266"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="90" x="1324.5" y="970.291">zentraler</text><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="104" x="1320.5" y="993.5723">IDP-Dienst</text><rect fill="#DCDCDC" height="730.375" style="stroke:#000000;stroke-width:1.0;" width="10" x="345.5" y="172.3516"/><rect fill="#DCDCDC" height="270.1172" style="stroke:#000000;stroke-width:1.0;" width="10" x="564" y="298.7188"/><rect fill="#DCDCDC" height="101.3672" style="stroke:#000000;stroke-width:1.0;" width="10" x="739" y="366.2969"/><rect fill="#DCDCDC" height="14" style="stroke:#000000;stroke-width:1.0;" width="10" x="913" y="400.0859"/><rect fill="#DCDCDC" height="33.7891" style="stroke:#000000;stroke-width:1.0;" width="10" x="1120.5" y="206.1406"/><rect fill="#DCDCDC" height="207.5234" style="stroke:#000000;stroke-width:1.0;" width="10" x="1120.5" y="661.4141"/><rect fill="#DCDCDC" height="303.9063" style="stroke:#000000;stroke-width:1.0;" width="10" x="1367.5" y="298.7188"/><rect fill="#DCDCDC" height="53.5781" style="stroke:#000000;stroke-width:1.0;" width="10" x="1367.5" y="714.9922"/><polygon fill="#000000" points="333.5,168.3516,343.5,172.3516,333.5,176.3516,337.5,172.3516" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="116.5" x2="339.5" y1="172.3516" y2="172.3516"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="206" x="123.5" y="166.3423">Organisation verifizieren</text><polygon fill="#000000" points="1108.5,202.1406,1118.5,206.1406,1108.5,210.1406,1112.5,206.1406" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="355.5" x2="1114.5" y1="206.1406" y2="206.1406"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="119" x="362.5" y="200.1313">POST /register</text><polygon fill="#000000" points="366.5,235.9297,356.5,239.9297,366.5,243.9297,362.5,239.9297" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="360.5" x2="1124.5" y1="239.9297" y2="239.9297"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="323" x="795.5" y="233.9204">Redirect to IDP Authorization Endpoint</text><polygon fill="#000000" points="1355.5,294.7188,1365.5,298.7188,1355.5,302.7188,1359.5,298.7188" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="355.5" x2="1361.5" y1="298.7188" y2="298.7188"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="124" x="362.5" y="292.7095">GET /authorize</text><polygon fill="#000000" points="585,328.5078,575,332.5078,585,336.5078,581,332.5078" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="579" x2="1366.5" y1="332.5078" y2="332.5078"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="209" x="1151.5" y="326.4985">Authentication challenge</text><polygon fill="#000000" points="727,362.2969,737,366.2969,727,370.2969,731,366.2969" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="574" x2="733" y1="366.2969" y2="366.2969"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="124" x="581" y="360.2876">SignDocument</text><polygon fill="#000000" points="901,396.0859,911,400.0859,901,404.0859,905,400.0859" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="749" x2="907" y1="400.0859" y2="400.0859"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="139" x="756" y="394.0767">SICCT command</text><polygon fill="#000000" points="760,410.0859,750,414.0859,760,418.0859,756,414.0859" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="754" x2="917" y1="414.0859" y2="414.0859"/><polygon fill="#000000" points="585,463.6641,575,467.6641,585,471.6641,581,467.6641" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="579" x2="743" y1="467.6641" y2="467.6641"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="79" x="596" y="441.8657">Response</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="141" x="596" y="461.6548">signedDocument</text><path d="M10,482.6641 L80,482.6641 L80,489.7969 L70,499.7969 L10,499.7969 L10,482.6641 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="53.3828" style="stroke:#000000;stroke-width:1.5;" width="651" x="10" y="482.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="25" x="25" y="495.731">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="95" y="499.5308">[</text><text fill="#000000" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="67" x="100" y="498.5874">Abbruch</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="167" y="499.5308">]</text><polygon fill="#000000" points="127.5,524.0469,117.5,528.0469,127.5,532.0469,123.5,528.0469" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="121.5" x2="563" y1="528.0469" y2="528.0469"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="222" x="335" y="522.0376">SMC-B nicht freigeschaltet</text><polygon fill="#000000" points="1355.5,564.8359,1365.5,568.8359,1355.5,572.8359,1359.5,568.8359" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="569" x2="1361.5" y1="568.8359" y2="568.8359"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="203" x="576" y="562.8267">Authentication response</text><polygon fill="#000000" points="366.5,598.625,356.5,602.625,366.5,606.625,362.5,602.625" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="360.5" x2="1371.5" y1="602.625" y2="602.625"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="156" x="1209.5" y="596.6157">Authorization code</text><polygon fill="#000000" points="1108.5,657.4141,1118.5,661.4141,1108.5,665.4141,1112.5,661.4141" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="355.5" x2="1114.5" y1="661.4141" y2="661.4141"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="294" x="362.5" y="655.4048">POST /register (Authorization code)</text><polygon fill="#000000" points="1355.5,710.9922,1365.5,714.9922,1355.5,718.9922,1359.5,714.9922" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="1130.5" x2="1361.5" y1="714.9922" y2="714.9922"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="178" x="1137.5" y="689.1938">POST /tokenEndpoint</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="177" x="1137.5" y="708.9829">{authorization code}</text><polygon fill="#000000" points="1141.5,764.5703,1131.5,768.5703,1141.5,772.5703,1137.5,768.5703" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1135.5" x2="1371.5" y1="768.5703" y2="768.5703"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="79" x="1152.5" y="742.772">Response</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="213" x="1152.5" y="762.561">{id_token, access_token}</text><line style="stroke:#000000;stroke-width:1.0;" x1="1130.5" x2="1172.5" y1="822.1484" y2="822.1484"/><line style="stroke:#000000;stroke-width:1.0;" x1="1172.5" x2="1172.5" y1="822.1484" y2="835.1484"/><line style="stroke:#000000;stroke-width:1.0;" x1="1131.5" x2="1172.5" y1="835.1484" y2="835.1484"/><polygon fill="#000000" points="1141.5,831.1484,1131.5,835.1484,1141.5,839.1484,1137.5,835.1484" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="107" x="1137.5" y="796.3501">Organisation</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="134" x="1137.5" y="816.1392">authentifizieren</text><polygon fill="#000000" points="366.5,864.9375,356.5,868.9375,366.5,872.9375,362.5,868.9375" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="360.5" x2="1124.5" y1="868.9375" y2="868.9375"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="252" x="866.5" y="862.9282">status, id_token, access_token</text><polygon fill="#000000" points="127.5,898.7266,117.5,902.7266,127.5,906.7266,123.5,902.7266" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="121.5" x2="349.5" y1="902.7266" y2="902.7266"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="200" x="143.5" y="896.7173">Verifizierung erfolgreich</text><!--MD5=[0fb37074b8ded2c62668000a712cc3ab]
@startuml
skinparam sequenceMessageAlign direction
skinparam WrapWidth 300
skinparam minClassWidth 150
skinparam BoxPadding 1
scale max 2048 width

skinparam sequence {
ArrowColor black
ArrowFontSize 17
ActorBorderColor black
LifeLineBorderColor black
LifeLineBackgroundColor Gainsboro

ParticipantBorderColor Motivation
ParticipantBackgroundColor Motivation
ParticipantFontName Impact
ParticipantFontSize 20
ParticipantFontColor black
ParticipantBorderColor Black
ParticipantBackgroundColor MOTIVATION

ActorBackgroundColor Gainsboro
ActorFontColor black
ActorFontSize 20
ActorFontName Aapex
}

  actor oa as "Akteur in der Rolle\nOrg-Admin"
    box <size:19>Endgerät</size> #WhiteSmoke
    participant wb as "Frontend des \nRegistrierungs-Dienstes"
    participant au as "Authenticator"
    end box
  participant ko as "Konnektor"
  participant kt as "eHealth KT"
  participant rd as "Registrierungs-Dienst"
  participant ip as "zentraler \nIDP-Dienst"

  |||
  oa -> wb: Organisation verifizieren
    activate wb
  wb -> rd:POST /register 
    activate rd
  rd - -> wb: Redirect to IDP Authorization Endpoint
    deactivate rd
  |||
  wb -> ip: GET /authorize
    activate au
    activate ip
  ip -> au: Authentication challenge
  au -> ko: SignDocument
    activate ko
  ko -> kt: SICCT command
    activate kt
  kt - -> ko
    deactivate kt
  ko - -> au: Response \nsignedDocument
    deactivate ko

opt #MistyRose <size:15>Abbruch</size>
  au -> oa: SMC-B nicht freigeschaltet 
end

  au - ->ip: Authentication response
    deactivate au
  ip - -> wb: Authorization code
    deactivate ip
  |||
  wb -> rd: POST /register (Authorization code)
    activate rd
  rd -> ip: POST /tokenEndpoint\n{authorization code}
    activate ip
  ip - -> rd: Response\n{id_token, access_token}
    deactivate ip
  rd -> rd: Organisation \nauthentifizieren
  rd - -> wb: status, id_token, access_token
    deactivate rd
  wb - -> oa: Verifizierung erfolgreich
    deactivate wb
  |||  
@enduml

PlantUML version 1.2022.5(Sat Apr 30 10:55:52 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>