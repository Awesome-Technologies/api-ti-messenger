<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1173px" preserveAspectRatio="none" style="width:1075px;height:1173px;background:#FFFFFF;" version="1.1" viewBox="0 0 1075 1173" width="1075px" zoomAndPan="magnify"><defs><filter height="300%" id="fhl3defm3db3z" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#F5F5F5" height="1161.5703" style="stroke:#A80036;stroke-width:1.0;" width="800" x="26" y="6"/><text fill="#000000" font-family="sans-serif" font-size="18" font-weight="bold" lengthAdjust="spacing" textLength="193" x="329.5" y="22.708">Messenger-Service</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="0" x="428.5" y="39.02"/><rect fill="#DCDCDC" filter="url(#fhl3defm3db3z)" height="948.9219" style="stroke:#000000;stroke-width:1.0;" width="10" x="134" y="98.3672"/><rect fill="#DCDCDC" filter="url(#fhl3defm3db3z)" height="33.7891" style="stroke:#000000;stroke-width:1.0;" width="10" x="463" y="843.2969"/><rect fill="#DCDCDC" filter="url(#fhl3defm3db3z)" height="33.7891" style="stroke:#000000;stroke-width:1.0;" width="10" x="463" y="1013.5"/><rect fill="#F0F8FF" filter="url(#fhl3defm3db3z)" height="699.9219" style="stroke:#000000;stroke-width:2.0;" width="1051" x="10" y="380.3672"/><rect fill="#ADD8E6" filter="url(#fhl3defm3db3z)" height="255.75" style="stroke:#000000;stroke-width:2.0;" width="596" x="20" y="654.3359"/><rect fill="#ADD8E6" height="138.2031" style="stroke:none;stroke-width:1.0;" width="596" x="20" y="771.8828"/><rect fill="#F0F8FF" height="138.2031" style="stroke:none;stroke-width:1.0;" width="1051" x="10" y="942.0859"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="139" x2="139" y1="88.3672" y2="1122.2891"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="468" x2="468" y1="88.3672" y2="1122.2891"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="704" x2="704" y1="88.3672" y2="1122.2891"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="942" x2="942" y1="88.3672" y2="1122.2891"/><rect fill="#EFEFFF" filter="url(#fhl3defm3db3z)" height="37.2813" style="stroke:#000000;stroke-width:1.5;" width="214" x="30" y="46.0859"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="168" x="53" y="71.6504">Messenger-Proxy</text><rect fill="#EFEFFF" filter="url(#fhl3defm3db3z)" height="37.2813" style="stroke:#000000;stroke-width:1.5;" width="214" x="30" y="1121.2891"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="168" x="53" y="1146.8535">Messenger-Proxy</text><rect fill="#EFEFFF" filter="url(#fhl3defm3db3z)" height="37.2813" style="stroke:#000000;stroke-width:1.5;" width="214" x="359" y="46.0859"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="189" x="371.5" y="71.6504">Matrix-Homeserver</text><rect fill="#EFEFFF" filter="url(#fhl3defm3db3z)" height="37.2813" style="stroke:#000000;stroke-width:1.5;" width="214" x="359" y="1121.2891"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="189" x="371.5" y="1146.8535">Matrix-Homeserver</text><rect fill="#EFEFFF" filter="url(#fhl3defm3db3z)" height="37.2813" style="stroke:#000000;stroke-width:1.5;" width="231" x="587" y="46.0859"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="217" x="594" y="71.6504">Registrierungs-Dienst</text><rect fill="#EFEFFF" filter="url(#fhl3defm3db3z)" height="37.2813" style="stroke:#000000;stroke-width:1.5;" width="231" x="587" y="1121.2891"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="217" x="594" y="1146.8535">Registrierungs-Dienst</text><rect fill="#EFEFFF" filter="url(#fhl3defm3db3z)" height="37.2813" style="stroke:#000000;stroke-width:1.5;" width="214" x="833" y="46.0859"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="195" x="842.5" y="71.6504">VZD-FHIR-Directory</text><rect fill="#EFEFFF" filter="url(#fhl3defm3db3z)" height="37.2813" style="stroke:#000000;stroke-width:1.5;" width="214" x="833" y="1121.2891"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="195" x="842.5" y="1146.8535">VZD-FHIR-Directory</text><rect fill="#DCDCDC" filter="url(#fhl3defm3db3z)" height="948.9219" style="stroke:#000000;stroke-width:1.0;" width="10" x="134" y="98.3672"/><rect fill="#DCDCDC" filter="url(#fhl3defm3db3z)" height="33.7891" style="stroke:#000000;stroke-width:1.0;" width="10" x="463" y="843.2969"/><rect fill="#DCDCDC" filter="url(#fhl3defm3db3z)" height="33.7891" style="stroke:#000000;stroke-width:1.0;" width="10" x="463" y="1013.5"/><path d="M32,128.3672 L32,207.3672 L574,207.3672 L574,138.3672 L564,128.3672 L32,128.3672 " fill="#FBFB77" filter="url(#fhl3defm3db3z)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M564,128.3672 L564,138.3672 L574,138.3672 L564,128.3672 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="98" y="145.4341"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="400" x="94" y="164.2798">Überprüfe, ob eingehender Matrix-Event an den</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="391" x="94" y="184.0688">Matrix-Homeserver weitergeleitet werden darf</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="98" y="200.145"/><line style="stroke:#000000;stroke-width:1.0;" x1="144" x2="186" y1="327.3672" y2="327.3672"/><line style="stroke:#000000;stroke-width:1.0;" x1="186" x2="186" y1="327.3672" y2="340.3672"/><line style="stroke:#000000;stroke-width:1.0;" x1="145" x2="186" y1="340.3672" y2="340.3672"/><polygon fill="#000000" points="155,336.3672,145,340.3672,155,344.3672,151,340.3672" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="200" x="151" y="261.9907">prüfe ob Matrix-Domain</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="107" x="151" y="281.7798">im PASSporT</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="186" x="151" y="301.5688">in der Föderationsliste</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="115" x="151" y="321.3579">vorhanden ist</text><path d="M10,380.3672 L74,380.3672 L74,387.3672 L64,397.3672 L10,397.3672 L10,380.3672 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="699.9219" style="stroke:#000000;stroke-width:2.0;" width="1051" x="10" y="380.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="25" y="393.4341">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="89" y="398.3979">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="502" x="94" y="397.2188">Matrix-Domain ist nicht in der Föderationsliste enthalten</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="596" y="398.3979">]</text><rect fill="#FFFFFF" filter="url(#fhl3defm3db3z)" height="60.0547" style="stroke:#000000;stroke-width:2.0;" width="1023" x="27" y="426.125"/><path d="M27,426.125 L93,426.125 L93,433.125 L83,443.125 L27,443.125 L27,426.125 " fill="#98FB98" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="40" y="440.1919">ref</text><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="88" x="343" y="462.9048">Anhang B</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="302" x="436" y="462.9048">- Aktualisierung der Föderationsliste</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="347" y="478.981"/><line style="stroke:#000000;stroke-width:1.0;" x1="144" x2="186" y1="601.3359" y2="601.3359"/><line style="stroke:#000000;stroke-width:1.0;" x1="186" x2="186" y1="601.3359" y2="614.3359"/><line style="stroke:#000000;stroke-width:1.0;" x1="145" x2="186" y1="614.3359" y2="614.3359"/><polygon fill="#000000" points="155,610.3359,145,614.3359,155,618.3359,151,614.3359" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="200" x="151" y="535.9595">prüfe ob Matrix-Domain</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="107" x="151" y="555.7485">im PASSporT</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="48" x="151" y="575.5376">in der</text><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="128" x="204" y="575.5376">aktualisierten</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="0" x="337" y="575.5376"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="253" x="151" y="595.3267">Föderationsliste vorhanden ist</text><path d="M20,654.3359 L84,654.3359 L84,661.3359 L74,671.3359 L20,671.3359 L20,654.3359 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="255.75" style="stroke:#000000;stroke-width:2.0;" width="596" x="20" y="654.3359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="35" y="667.4028">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="99" y="672.3667">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="502" x="104" y="671.1875">Matrix-Domain ist nicht in der Föderationsliste enthalten</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="606" y="672.3667">]</text><line style="stroke:#000000;stroke-width:1.0;" x1="144" x2="186" y1="725.8828" y2="725.8828"/><line style="stroke:#000000;stroke-width:1.0;" x1="186" x2="186" y1="725.8828" y2="738.8828"/><line style="stroke:#000000;stroke-width:1.0;" x1="145" x2="186" y1="738.8828" y2="738.8828"/><polygon fill="#000000" points="155,734.8828,145,738.8828,155,742.8828,151,738.8828" style="stroke:#000000;stroke-width:1.0;"/><text fill="#FF0000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="305" x="151" y="719.8735">Abbruch, Verbindung wird abgelehnt</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="20" x2="616" y1="772.8828" y2="772.8828"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="25" y="788.9136">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="452" x="30" y="787.7344">Matrix-Domain ist in der Föderationsliste enthalten</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="482" y="788.9136">]</text><polygon fill="#000000" points="451,839.2969,461,843.2969,451,847.2969,455,843.2969" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="144" x2="457" y1="843.2969" y2="843.2969"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="142" x="151" y="837.2876">HTTP(S) Forward</text><polygon fill="#000000" points="155,873.0859,145,877.0859,155,881.0859,151,877.0859" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="149" x2="467" y1="877.0859" y2="877.0859"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="54" x="407" y="871.0767">Status</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="1061" y1="943.0859" y2="943.0859"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="15" y="959.1167">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="452" x="20" y="957.9375">Matrix-Domain ist in der Föderationsliste enthalten</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="472" y="959.1167">]</text><polygon fill="#000000" points="451,1009.5,461,1013.5,451,1017.5,455,1013.5" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="144" x2="457" y1="1013.5" y2="1013.5"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="142" x="151" y="1007.4907">HTTP(S) Forward</text><polygon fill="#000000" points="150,1043.2891,140,1047.2891,150,1051.2891,146,1047.2891" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="144" x2="467" y1="1047.2891" y2="1047.2891"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="54" x="407" y="1041.2798">Status</text><!--MD5=[bacb9b4cc56f7e1ffef0b42782dae2e6]
@startuml
skinparam sequenceMessageAlign direction
skinparam minClassWidth 200
skinparam BoxPadding 1
skinparam sequenceReferenceHeaderBackgroundColor palegreen
scale max 2048 width

skinparam sequence {
ArrowColor black
ArrowFontSize 17
ActorBorderColor black
LifeLineBorderColor black
LifeLineBackgroundColor Gainsboro

ParticipantBorderColor Motivation
ParticipantBackgroundColor Motivation
ParticipantFontName Impact
ParticipantFontSize 20
ParticipantFontColor black
ParticipantBorderColor Black
ParticipantBackgroundColor MOTIVATION

ActorBackgroundColor Gainsboro
ActorFontColor black
ActorFontSize 20
ActorFontName Aapex
}
    box <size:18>Messenger-Service\n#WhiteSmoke
    participant MP as "Messenger-Proxy"
    participant MH as "Matrix-Homeserver"
    participant RD as "Registrierungs-Dienst"
    end box
    participant VZD as "VZD-FHIR-Directory"

|||
note over MP, MH: \n<size:17>Überprüfe, ob eingehender Matrix-Event an den \n<size:17>Matrix-Homeserver weitergeleitet werden darf</size>\n
|||

    Activate MP
  MP->MP: prüfe ob Matrix-Domain \nim PASSporT \nin der Föderationsliste \nvorhanden ist

|||
alt#LightGrey #AliceBlue <size:16>Matrix-Domain ist nicht in der Föderationsliste enthalten</size>
|||  

  ref over MP, VZD: <size:17>**Anhang B** - Aktualisierung der Föderationsliste</size>\n 
  |||
  MP->MP: prüfe ob Matrix-Domain \nim PASSporT \nin der **aktualisierten** \nFöderationsliste vorhanden ist
  |||

    alt#LightGrey #LightBlue <size:16>Matrix-Domain ist nicht in der Föderationsliste enthalten</size>
      |||
      MP->MP: <font color=red>Abbruch, Verbindung wird abgelehnt</font>
      ||| 
      else <size:16>Matrix-Domain ist in der Föderationsliste enthalten</size>
      |||
         MP->MH: HTTP(S) Forward
          Activate MH
        MH- ->MP: Status
          Deactivate MH
      |||
    end

  |||
  else <size:16>Matrix-Domain ist in der Föderationsliste enthalten</size>
    ||| 
    MP->MH: HTTP(S) Forward
      Activate MH
    MH- ->MP: Status
      Deactivate MH
      Deactivate MP
    ||| 

end
|||
@enduml

PlantUML version 1.2021.16(Wed Dec 08 17:25:22 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>