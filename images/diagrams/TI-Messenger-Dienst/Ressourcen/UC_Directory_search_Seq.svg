<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="2639.7694px" preserveAspectRatio="none" style="width:2048px;height:2639px;background:#FFFFFF;" version="1.1" viewBox="0 0 2048 2639" width="2048.4685px" zoomAndPan="magnify"><defs><filter height="300%" id="f1nvkbmsahfy6g" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="1.8741706703271561"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="3.7483413406543122" dy="3.7483413406543122" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#F5F5F5" height="2629.2272" style="stroke:#A80036;stroke-width:0.9370853351635781;" width="977.38" x="973.1631" y="5.6225"/><text fill="#000000" font-family="sans-serif" font-size="16.8675" font-weight="bold" lengthAdjust="spacing" textLength="187.4171" x="1365.8019" y="21.2793">VZD-FHIR-Directory</text><text fill="#000000" font-family="sans-serif" font-size="12.1821" font-weight="bold" lengthAdjust="spacing" textLength="0" x="1557.9044" y="22.3844"/><rect fill="#DCDCDC" filter="url(#f1nvkbmsahfy6g)" height="2364.852" style="stroke:#000000;stroke-width:0.9370853351635781;" width="9.3709" x="325.6372" y="120.474"/><rect fill="#DCDCDC" filter="url(#f1nvkbmsahfy6g)" height="192.593" style="stroke:#000000;stroke-width:0.9370853351635781;" width="9.3709" x="598.329" y="464.8968"/><rect fill="#DCDCDC" filter="url(#f1nvkbmsahfy6g)" height="175.9231" style="stroke:#000000;stroke-width:0.9370853351635781;" width="9.3709" x="598.329" y="1089.9401"/><rect fill="#DCDCDC" filter="url(#f1nvkbmsahfy6g)" height="129.2665" style="stroke:#000000;stroke-width:0.9370853351635781;" width="9.3709" x="840.097" y="496.5601"/><rect fill="#DCDCDC" filter="url(#f1nvkbmsahfy6g)" height="112.5967" style="stroke:#000000;stroke-width:0.9370853351635781;" width="9.3709" x="840.097" y="1121.6033"/><rect fill="#DCDCDC" filter="url(#f1nvkbmsahfy6g)" height="996.6854" style="stroke:#000000;stroke-width:0.9370853351635781;" width="9.3709" x="1074.3683" y="1488.6406"/><rect fill="#DCDCDC" filter="url(#f1nvkbmsahfy6g)" height="94.0526" style="stroke:#000000;stroke-width:0.9370853351635781;" width="9.3709" x="1354.5569" y="2359.6102"/><rect fill="#DCDCDC" filter="url(#f1nvkbmsahfy6g)" height="684.4237" style="stroke:#000000;stroke-width:0.9370853351635781;" width="9.3709" x="1568.2123" y="712.5802"/><rect fill="#DCDCDC" filter="url(#f1nvkbmsahfy6g)" height="50.2073" style="stroke:#000000;stroke-width:0.9370853351635781;" width="9.3709" x="1839.9671" y="1748.1034"/><rect fill="#DCDCDC" filter="url(#f1nvkbmsahfy6g)" height="131.1407" style="stroke:#000000;stroke-width:0.9370853351635781;" width="9.3709" x="1839.9671" y="1932.8264"/><rect fill="#F0F8FF" filter="url(#f1nvkbmsahfy6g)" height="1055.1801" style="stroke:#000000;stroke-width:1.8741706703271561;" width="1835.2816" x="9.3709" y="379.3073"/><rect fill="#ADD8E6" filter="url(#f1nvkbmsahfy6g)" height="615.4747" style="stroke:#000000;stroke-width:1.8741706703271561;" width="1759.3777" x="18.7417" y="812.453"/><rect fill="#ADD8E6" height="423.4528" style="stroke:none;stroke-width:0.9370853351635781;" width="1759.3777" x="18.7417" y="1004.4749"/><rect fill="#FFE4E1" filter="url(#f1nvkbmsahfy6g)" height="51.1151" style="stroke:#000000;stroke-width:1.8741706703271561;" width="971.7575" x="218.8094" y="1593.3965"/><rect fill="#F0F8FF" filter="url(#f1nvkbmsahfy6g)" height="148.1766" style="stroke:#000000;stroke-width:1.8741706703271561;" width="988.625" x="967.5406" y="1681.0579"/><rect fill="#F0F8FF" filter="url(#f1nvkbmsahfy6g)" height="229.11" style="stroke:#000000;stroke-width:1.8741706703271561;" width="1068.2773" x="967.5406" y="1865.7808"/><rect fill="#FFE4E1" filter="url(#f1nvkbmsahfy6g)" height="69.6591" style="stroke:#000000;stroke-width:1.8741706703271561;" width="971.7575" x="218.8094" y="2217.2537"/><line style="stroke:#000000;stroke-width:0.9370853351635781;stroke-dasharray:5.0,5.0;" x1="118.0728" x2="118.0728" y1="111.1032" y2="2525.6207"/><line style="stroke:#000000;stroke-width:0.9370853351635781;stroke-dasharray:5.0,5.0;" x1="330.3226" x2="330.3226" y1="111.1032" y2="2525.6207"/><line style="stroke:#000000;stroke-width:0.9370853351635781;stroke-dasharray:5.0,5.0;" x1="603.0144" x2="603.0144" y1="111.1032" y2="2525.6207"/><line style="stroke:#000000;stroke-width:0.9370853351635781;stroke-dasharray:5.0,5.0;" x1="844.7824" x2="844.7824" y1="111.1032" y2="2525.6207"/><line style="stroke:#000000;stroke-width:0.9370853351635781;stroke-dasharray:5.0,5.0;" x1="1079.0538" x2="1079.0538" y1="111.1032" y2="2525.6207"/><line style="stroke:#000000;stroke-width:0.9370853351635781;stroke-dasharray:5.0,5.0;" x1="1359.2423" x2="1359.2423" y1="111.1032" y2="2525.6207"/><line style="stroke:#000000;stroke-width:0.9370853351635781;stroke-dasharray:5.0,5.0;" x1="1572.8977" x2="1572.8977" y1="111.1032" y2="2525.6207"/><line style="stroke:#000000;stroke-width:0.9370853351635781;stroke-dasharray:5.0,5.0;" x1="1844.6525" x2="1844.6525" y1="111.1032" y2="2525.6207"/><text fill="#000000" font-family="Aapex" font-size="18.7417" lengthAdjust="spacing" textLength="175.235" x="28.1126" y="84.8666">Akteur in der Rolle</text><text fill="#000000" font-family="Aapex" font-size="18.7417" lengthAdjust="spacing" textLength="148.9966" x="41.2318" y="106.6831">User / User-HBA</text><ellipse cx="118.5413" cy="14.0563" fill="#DCDCDC" filter="url(#f1nvkbmsahfy6g)" rx="7.4967" ry="7.4967" style="stroke:#000000;stroke-width:1.8741706703271561;"/><path d="M118.5413,21.553 L118.5413,46.8543 M106.3592,29.0496 L130.7234,29.0496 M118.5413,46.8543 L106.3592,60.9105 M118.5413,46.8543 L130.7234,60.9105 " fill="none" filter="url(#f1nvkbmsahfy6g)" style="stroke:#000000;stroke-width:1.8741706703271561;"/><text fill="#000000" font-family="Aapex" font-size="18.7417" lengthAdjust="spacing" textLength="175.235" x="28.1126" y="2542.0801">Akteur in der Rolle</text><text fill="#000000" font-family="Aapex" font-size="18.7417" lengthAdjust="spacing" textLength="148.9966" x="41.2318" y="2563.8966">User / User-HBA</text><ellipse cx="118.5413" cy="2577.6875" fill="#DCDCDC" filter="url(#f1nvkbmsahfy6g)" rx="7.4967" ry="7.4967" style="stroke:#000000;stroke-width:1.8741706703271561;"/><path d="M118.5413,2585.1842 L118.5413,2610.4855 M106.3592,2592.6809 L130.7234,2592.6809 M118.5413,2610.4855 L106.3592,2624.5418 M118.5413,2610.4855 L130.7234,2624.5418 " fill="none" filter="url(#f1nvkbmsahfy6g)" style="stroke:#000000;stroke-width:1.8741706703271561;"/><rect fill="#EFEFFF" filter="url(#f1nvkbmsahfy6g)" height="34.9357" style="stroke:#000000;stroke-width:1.4056280027453671;" width="200.5363" x="228.1803" y="71.482"/><text fill="#000000" font-family="Impact" font-size="18.7417" lengthAdjust="spacing" textLength="185.5429" x="235.677" y="95.4381">TI-Messenger-Client</text><rect fill="#EFEFFF" filter="url(#f1nvkbmsahfy6g)" height="34.9357" style="stroke:#000000;stroke-width:1.4056280027453671;" width="200.5363" x="228.1803" y="2524.6836"/><text fill="#000000" font-family="Impact" font-size="18.7417" lengthAdjust="spacing" textLength="185.5429" x="235.677" y="2548.6397">TI-Messenger-Client</text><rect fill="#EFEFFF" filter="url(#f1nvkbmsahfy6g)" height="34.9357" style="stroke:#000000;stroke-width:1.4056280027453671;" width="200.5363" x="500.8721" y="71.482"/><text fill="#000000" font-family="Impact" font-size="18.7417" lengthAdjust="spacing" textLength="156.4933" x="522.8936" y="95.4381">Messenger Proxy</text><rect fill="#EFEFFF" filter="url(#f1nvkbmsahfy6g)" height="34.9357" style="stroke:#000000;stroke-width:1.4056280027453671;" width="200.5363" x="500.8721" y="2524.6836"/><text fill="#000000" font-family="Impact" font-size="18.7417" lengthAdjust="spacing" textLength="156.4933" x="522.8936" y="2548.6397">Messenger Proxy</text><rect fill="#EFEFFF" filter="url(#f1nvkbmsahfy6g)" height="34.9357" style="stroke:#000000;stroke-width:1.4056280027453671;" width="200.5363" x="742.6401" y="71.482"/><text fill="#000000" font-family="Impact" font-size="18.7417" lengthAdjust="spacing" textLength="177.1091" x="754.3537" y="95.4381">Matrix-Homeserver</text><rect fill="#EFEFFF" filter="url(#f1nvkbmsahfy6g)" height="34.9357" style="stroke:#000000;stroke-width:1.4056280027453671;" width="200.5363" x="742.6401" y="2524.6836"/><text fill="#000000" font-family="Impact" font-size="18.7417" lengthAdjust="spacing" textLength="177.1091" x="754.3537" y="2548.6397">Matrix-Homeserver</text><rect fill="#EFEFFF" filter="url(#f1nvkbmsahfy6g)" height="34.9357" style="stroke:#000000;stroke-width:1.4056280027453671;" width="200.5363" x="976.9115" y="71.482"/><text fill="#000000" font-family="Impact" font-size="18.7417" lengthAdjust="spacing" textLength="101.2052" x="1026.577" y="95.4381">FHIR-Proxy</text><rect fill="#EFEFFF" filter="url(#f1nvkbmsahfy6g)" height="34.9357" style="stroke:#000000;stroke-width:1.4056280027453671;" width="200.5363" x="976.9115" y="2524.6836"/><text fill="#000000" font-family="Impact" font-size="18.7417" lengthAdjust="spacing" textLength="101.2052" x="1026.577" y="2548.6397">FHIR-Proxy</text><rect fill="#EFEFFF" filter="url(#f1nvkbmsahfy6g)" height="56.7522" style="stroke:#000000;stroke-width:1.4056280027453671;" width="200.5363" x="1257.1" y="49.6655"/><text fill="#000000" font-family="Impact" font-size="18.7417" lengthAdjust="spacing" textLength="97.4569" x="1308.6397" y="73.6216">PASSporT-</text><text fill="#000000" font-family="Impact" font-size="18.7417" lengthAdjust="spacing" textLength="68.4072" x="1323.1645" y="95.4381">Service</text><rect fill="#EFEFFF" filter="url(#f1nvkbmsahfy6g)" height="56.7522" style="stroke:#000000;stroke-width:1.4056280027453671;" width="200.5363" x="1257.1" y="2524.6836"/><text fill="#000000" font-family="Impact" font-size="18.7417" lengthAdjust="spacing" textLength="97.4569" x="1308.6397" y="2548.6397">PASSporT-</text><text fill="#000000" font-family="Impact" font-size="18.7417" lengthAdjust="spacing" textLength="68.4072" x="1323.1645" y="2570.4562">Service</text><rect fill="#EFEFFF" filter="url(#f1nvkbmsahfy6g)" height="34.9357" style="stroke:#000000;stroke-width:1.4056280027453671;" width="200.5363" x="1470.7554" y="71.482"/><text fill="#000000" font-family="Impact" font-size="18.7417" lengthAdjust="spacing" textLength="119.9469" x="1511.0501" y="95.4381">Auth-Service</text><rect fill="#EFEFFF" filter="url(#f1nvkbmsahfy6g)" height="34.9357" style="stroke:#000000;stroke-width:1.4056280027453671;" width="200.5363" x="1470.7554" y="2524.6836"/><text fill="#000000" font-family="Impact" font-size="18.7417" lengthAdjust="spacing" textLength="119.9469" x="1511.0501" y="2548.6397">Auth-Service</text><rect fill="#EFEFFF" filter="url(#f1nvkbmsahfy6g)" height="34.9357" style="stroke:#000000;stroke-width:1.4056280027453671;" width="200.5363" x="1742.5102" y="71.482"/><text fill="#000000" font-family="Impact" font-size="18.7417" lengthAdjust="spacing" textLength="135.8774" x="1774.8396" y="95.4381">FHIR-Directory</text><rect fill="#EFEFFF" filter="url(#f1nvkbmsahfy6g)" height="34.9357" style="stroke:#000000;stroke-width:1.4056280027453671;" width="200.5363" x="1742.5102" y="2524.6836"/><text fill="#000000" font-family="Impact" font-size="18.7417" lengthAdjust="spacing" textLength="135.8774" x="1774.8396" y="2548.6397">FHIR-Directory</text><rect fill="#DCDCDC" filter="url(#f1nvkbmsahfy6g)" height="2364.852" style="stroke:#000000;stroke-width:0.9370853351635781;" width="9.3709" x="325.6372" y="120.474"/><rect fill="#DCDCDC" filter="url(#f1nvkbmsahfy6g)" height="192.593" style="stroke:#000000;stroke-width:0.9370853351635781;" width="9.3709" x="598.329" y="464.8968"/><rect fill="#DCDCDC" filter="url(#f1nvkbmsahfy6g)" height="175.9231" style="stroke:#000000;stroke-width:0.9370853351635781;" width="9.3709" x="598.329" y="1089.9401"/><rect fill="#DCDCDC" filter="url(#f1nvkbmsahfy6g)" height="129.2665" style="stroke:#000000;stroke-width:0.9370853351635781;" width="9.3709" x="840.097" y="496.5601"/><rect fill="#DCDCDC" filter="url(#f1nvkbmsahfy6g)" height="112.5967" style="stroke:#000000;stroke-width:0.9370853351635781;" width="9.3709" x="840.097" y="1121.6033"/><rect fill="#DCDCDC" filter="url(#f1nvkbmsahfy6g)" height="996.6854" style="stroke:#000000;stroke-width:0.9370853351635781;" width="9.3709" x="1074.3683" y="1488.6406"/><rect fill="#DCDCDC" filter="url(#f1nvkbmsahfy6g)" height="94.0526" style="stroke:#000000;stroke-width:0.9370853351635781;" width="9.3709" x="1354.5569" y="2359.6102"/><rect fill="#DCDCDC" filter="url(#f1nvkbmsahfy6g)" height="684.4237" style="stroke:#000000;stroke-width:0.9370853351635781;" width="9.3709" x="1568.2123" y="712.5802"/><rect fill="#DCDCDC" filter="url(#f1nvkbmsahfy6g)" height="50.2073" style="stroke:#000000;stroke-width:0.9370853351635781;" width="9.3709" x="1839.9671" y="1748.1034"/><rect fill="#DCDCDC" filter="url(#f1nvkbmsahfy6g)" height="131.1407" style="stroke:#000000;stroke-width:0.9370853351635781;" width="9.3709" x="1839.9671" y="1932.8264"/><path d="M24.3642,148.5866 L24.3642,204.8117 L938.0224,204.8117 L938.0224,157.9574 L928.6516,148.5866 L24.3642,148.5866 " fill="#FBFB77" filter="url(#f1nvkbmsahfy6g)" style="stroke:#A80036;stroke-width:0.9370853351635781;"/><path d="M928.6516,148.5866 L928.6516,157.9574 L938.0224,157.9574 L928.6516,148.5866 " fill="#FBFB77" style="stroke:#A80036;stroke-width:0.9370853351635781;"/><text fill="#000000" font-family="sans-serif" font-size="12.1821" lengthAdjust="spacing" textLength="0" x="234.5056" y="164.5797"/><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="489.1585" x="230.7573" y="182.2398">Der Akteur ist erfolgreich beim Messenger Service angemeldet</text><text fill="#000000" font-family="sans-serif" font-size="12.1821" lengthAdjust="spacing" textLength="0" x="234.5056" y="197.3045"/><polygon fill="#000000" points="314.3921,257.1421,323.763,260.8904,314.3921,264.6388,318.1405,260.8904" style="stroke:#000000;stroke-width:0.9370853351635781;"/><line style="stroke:#000000;stroke-width:0.9370853351635781;" x1="118.5413" x2="320.0146" y1="260.8904" y2="260.8904"/><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="184.6058" x="125.1009" y="255.2592">gibt Suchparameter ein</text><line style="stroke:#000000;stroke-width:0.9370853351635781;" x1="335.008" x2="374.3656" y1="329.6417" y2="329.6417"/><line style="stroke:#000000;stroke-width:0.9370853351635781;" x1="374.3656" x2="374.3656" y1="329.6417" y2="341.8238"/><line style="stroke:#000000;stroke-width:0.9370853351635781;" x1="335.9451" x2="374.3656" y1="341.8238" y2="341.8238"/><polygon fill="#000000" points="345.3159,338.0755,335.9451,341.8238,345.3159,345.5722,341.5676,341.8238" style="stroke:#000000;stroke-width:0.9370853351635781;"/><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="173.3608" x="341.5676" y="286.9224">prüfe ob noch gültiges</text><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="182.7316" x="341.5676" y="305.4665">tim-search-accesstoken</text><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="59.9735" x="341.5676" y="324.0105">vorliegt</text><path d="M9.3709,379.3073 L69.3443,379.3073 L69.3443,385.8668 L59.9735,395.2377 L9.3709,395.2377 L9.3709,379.3073 " fill="#D3D3D3" style="stroke:#000000;stroke-width:0.9370853351635781;"/><rect fill="none" height="1055.1801" style="stroke:#000000;stroke-width:1.8741706703271561;" width="1835.2816" x="9.3709" y="379.3073"/><text fill="#000000" font-family="sans-serif" font-size="12.1821" font-weight="bold" lengthAdjust="spacing" textLength="17.8046" x="23.4271" y="391.552">alt</text><text fill="#000000" font-family="sans-serif" font-size="10.3079" font-weight="bold" lengthAdjust="spacing" textLength="4.6854" x="83.4006" y="396.2036">[</text><text fill="#000000" font-family="sans-serif" font-size="14.9934" font-weight="bold" lengthAdjust="spacing" textLength="406.695" x="88.086" y="395.0986">kein gültiges tim-search-accesstoken vorhanden</text><text fill="#000000" font-family="sans-serif" font-size="10.3079" font-weight="bold" lengthAdjust="spacing" textLength="4.6854" x="494.7811" y="396.2036">]</text><polygon fill="#000000" points="587.084,461.1485,596.4548,464.8968,587.084,468.6452,590.8323,464.8968" style="stroke:#000000;stroke-width:0.9370853351635781;"/><line style="stroke:#000000;stroke-width:0.9370853351635781;" x1="335.008" x2="592.7065" y1="464.8968" y2="464.8968"/><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="219.278" x="341.5676" y="440.7216">GET /_matrix/client/r0/user/</text><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="245.5164" x="341.5676" y="459.2656">{userId}/openid/request_token</text><polygon fill="#000000" points="828.852,492.8117,838.2228,496.5601,828.852,500.3084,832.6003,496.5601" style="stroke:#000000;stroke-width:0.9370853351635781;"/><line style="stroke:#000000;stroke-width:0.9370853351635781;" x1="607.6998" x2="834.4745" y1="496.5601" y2="496.5601"/><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="109.639" x="614.2594" y="490.9288">HTTP Forward</text><polygon fill="#000000" points="618.0078,622.0782,608.6369,625.8266,618.0078,629.5749,614.2594,625.8266" style="stroke:#000000;stroke-width:0.9370853351635781;"/><line style="stroke:#000000;stroke-width:0.9370853351635781;stroke-dasharray:2.0,2.0;" x1="612.3853" x2="843.8453" y1="625.8266" y2="625.8266"/><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="205.2217" x="628.3157" y="546.0192">HTTP 200 OK, Result body</text><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="133.0661" x="700.4713" y="564.5633">{"access_token":</text><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="188.3542" x="645.1833" y="583.1073">"Matrix-OpenID-Token",</text><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="183.6687" x="649.8687" y="601.6513">"matrix_server_name":</text><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="148.9966" x="689.2263" y="620.1954">"example.com",...}</text><polygon fill="#000000" points="345.3159,653.7415,335.9451,657.4898,345.3159,661.2382,341.5676,657.4898" style="stroke:#000000;stroke-width:0.9370853351635781;"/><line style="stroke:#000000;stroke-width:0.9370853351635781;stroke-dasharray:2.0,2.0;" x1="339.6934" x2="602.0773" y1="657.4898" y2="657.4898"/><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="109.639" x="486.8158" y="651.8586">HTTP Forward</text><polygon fill="#000000" points="1556.9673,708.8318,1566.3381,712.5802,1556.9673,716.3285,1560.7156,712.5802" style="stroke:#000000;stroke-width:0.9370853351635781;"/><line style="stroke:#000000;stroke-width:0.9370853351635781;" x1="335.008" x2="1562.5898" y1="712.5802" y2="712.5802"/><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="510.7115" x="341.5676" y="706.949">GET /tim-authenticate... (Auth Header mit Matrix-OpenID-Token)</text><line style="stroke:#000000;stroke-width:0.9370853351635781;" x1="1577.5832" x2="1616.9407" y1="762.7875" y2="762.7875"/><line style="stroke:#000000;stroke-width:0.9370853351635781;" x1="1616.9407" x2="1616.9407" y1="762.7875" y2="774.9696"/><line style="stroke:#000000;stroke-width:0.9370853351635781;" x1="1578.5202" x2="1616.9407" y1="774.9696" y2="774.9696"/><polygon fill="#000000" points="1587.8911,771.2212,1578.5202,774.9696,1587.8911,778.7179,1584.1428,774.9696" style="stroke:#000000;stroke-width:0.9370853351635781;"/><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="232.3972" x="1584.1428" y="738.6122">Prüfe ob matrix_server_name</text><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="249.2647" x="1584.1428" y="757.1563">in Föderationsliste enthalten ist</text><path d="M18.7417,812.453 L78.7152,812.453 L78.7152,819.0126 L69.3443,828.3834 L18.7417,828.3834 L18.7417,812.453 " fill="#D3D3D3" style="stroke:#000000;stroke-width:0.9370853351635781;"/><rect fill="none" height="615.4747" style="stroke:#000000;stroke-width:1.8741706703271561;" width="1759.3777" x="18.7417" y="812.453"/><text fill="#000000" font-family="sans-serif" font-size="12.1821" font-weight="bold" lengthAdjust="spacing" textLength="17.8046" x="32.798" y="824.6978">alt</text><text fill="#000000" font-family="sans-serif" font-size="10.3079" font-weight="bold" lengthAdjust="spacing" textLength="4.6854" x="92.7714" y="829.3493">[</text><text fill="#000000" font-family="sans-serif" font-size="14.9934" font-weight="bold" lengthAdjust="spacing" textLength="491.0327" x="97.4569" y="828.2443">matrix_server_name nicht in der Föderationsliste enthalten</text><text fill="#000000" font-family="sans-serif" font-size="10.3079" font-weight="bold" lengthAdjust="spacing" textLength="4.6854" x="588.4896" y="829.3493">]</text><polygon fill="#000000" points="345.3159,894.2942,335.9451,898.0426,345.3159,901.7909,341.5676,898.0426" style="stroke:#000000;stroke-width:0.9370853351635781;"/><line style="stroke:#000000;stroke-width:0.9370853351635781;stroke-dasharray:2.0,2.0;" x1="339.6934" x2="1567.2752" y1="898.0426" y2="898.0426"/><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="75.9039" x="1481.0634" y="873.8673">HTTP 401</text><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="105.8906" x="1455.7621" y="892.4113">Unauthorized</text><line style="stroke:#000000;stroke-width:0.9370853351635781;" x1="335.008" x2="374.3656" y1="929.7058" y2="929.7058"/><line style="stroke:#000000;stroke-width:0.9370853351635781;" x1="374.3656" x2="374.3656" y1="929.7058" y2="941.8879"/><line style="stroke:#000000;stroke-width:0.9370853351635781;" x1="335.9451" x2="374.3656" y1="941.8879" y2="941.8879"/><polygon fill="#000000" points="345.3159,938.1396,335.9451,941.8879,345.3159,945.6362,341.5676,941.8879" style="stroke:#000000;stroke-width:0.9370853351635781;"/><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="131.1919" x="341.5676" y="924.0746">Session beenden</text><polygon fill="#000000" points="128.8492,969.8028,119.4784,973.5511,128.8492,977.2995,125.1009,973.5511" style="stroke:#000000;stroke-width:0.9370853351635781;"/><line style="stroke:#000000;stroke-width:0.9370853351635781;stroke-dasharray:2.0,2.0;" x1="123.2267" x2="324.7001" y1="973.5511" y2="973.5511"/><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="179.9204" x="139.1572" y="967.9199">Suche nicht erfolgreich</text><line style="stroke:#000000;stroke-width:0.9370853351635781;stroke-dasharray:2.0,2.0;" x1="18.7417" x2="1778.1194" y1="1005.412" y2="1005.412"/><text fill="#000000" font-family="sans-serif" font-size="10.3079" font-weight="bold" lengthAdjust="spacing" textLength="4.6854" x="23.4271" y="1020.4342">[</text><text fill="#000000" font-family="sans-serif" font-size="14.9934" font-weight="bold" lengthAdjust="spacing" textLength="444.1784" x="28.1126" y="1019.3292">matrix_server_name in der Föderationsliste enthalten</text><text fill="#000000" font-family="sans-serif" font-size="10.3079" font-weight="bold" lengthAdjust="spacing" textLength="4.6854" x="472.291" y="1020.4342">]</text><polygon fill="#000000" points="618.0078,1086.1917,608.6369,1089.9401,618.0078,1093.6884,614.2594,1089.9401" style="stroke:#000000;stroke-width:0.9370853351635781;"/><line style="stroke:#000000;stroke-width:0.9370853351635781;" x1="612.3853" x2="1567.2752" y1="1089.9401" y2="1089.9401"/><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="178.0462" x="1383.6065" y="1065.7648">GET /openid/userinfo/?</text><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="290.4965" x="1271.1563" y="1084.3089">access_token=Matrix-OpenID-Token)</text><polygon fill="#000000" points="828.852,1117.855,838.2228,1121.6033,828.852,1125.3516,832.6003,1121.6033" style="stroke:#000000;stroke-width:0.9370853351635781;"/><line style="stroke:#000000;stroke-width:0.9370853351635781;" x1="607.6998" x2="834.4745" y1="1121.6033" y2="1121.6033"/><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="109.639" x="614.2594" y="1115.9721">HTTP Forward</text><line style="stroke:#000000;stroke-width:0.9370853351635781;" x1="849.4679" x2="888.8254" y1="1153.2665" y2="1153.2665"/><line style="stroke:#000000;stroke-width:0.9370853351635781;" x1="888.8254" x2="888.8254" y1="1153.2665" y2="1165.4486"/><line style="stroke:#000000;stroke-width:0.9370853351635781;" x1="850.4049" x2="888.8254" y1="1165.4486" y2="1165.4486"/><polygon fill="#000000" points="859.7758,1161.7003,850.4049,1165.4486,859.7758,1169.197,856.0275,1165.4486" style="stroke:#000000;stroke-width:0.9370853351635781;"/><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="211.7813" x="856.0275" y="1147.6353">prüfe Matrix-OpenID-token</text><polygon fill="#000000" points="618.0078,1230.4516,608.6369,1234.2,618.0078,1237.9483,614.2594,1234.2" style="stroke:#000000;stroke-width:0.9370853351635781;"/><line style="stroke:#000000;stroke-width:0.9370853351635781;stroke-dasharray:2.0,2.0;" x1="612.3853" x2="843.8453" y1="1234.2" y2="1234.2"/><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="104.0165" x="734.2064" y="1191.4807">HTTP 200 OK</text><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="100.2681" x="733.2693" y="1210.0247">(Result Body</text><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="146.1853" x="692.0375" y="1228.5687">MXID des Nutzers)</text><polygon fill="#000000" points="1556.9673,1262.1148,1566.3381,1265.8632,1556.9673,1269.6115,1560.7156,1265.8632" style="stroke:#000000;stroke-width:0.9370853351635781;"/><line style="stroke:#000000;stroke-width:0.9370853351635781;stroke-dasharray:2.0,2.0;" x1="603.0144" x2="1562.5898" y1="1265.8632" y2="1265.8632"/><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="109.639" x="609.574" y="1260.232">HTTP Forward</text><line style="stroke:#000000;stroke-width:0.9370853351635781;" x1="1577.5832" x2="1616.9407" y1="1316.0705" y2="1316.0705"/><line style="stroke:#000000;stroke-width:0.9370853351635781;" x1="1616.9407" x2="1616.9407" y1="1316.0705" y2="1328.2526"/><line style="stroke:#000000;stroke-width:0.9370853351635781;" x1="1578.5202" x2="1616.9407" y1="1328.2526" y2="1328.2526"/><polygon fill="#000000" points="1587.8911,1324.5042,1578.5202,1328.2526,1587.8911,1332.0009,1584.1428,1328.2526" style="stroke:#000000;stroke-width:0.9370853351635781;"/><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="61.8476" x="1584.1428" y="1291.8952">erzeuge</text><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="182.7316" x="1584.1428" y="1310.4393">tim-search-accesstoken</text><polygon fill="#000000" points="345.3159,1393.2555,335.9451,1397.0039,345.3159,1400.7522,341.5676,1397.0039" style="stroke:#000000;stroke-width:0.9370853351635781;"/><line style="stroke:#000000;stroke-width:0.9370853351635781;stroke-dasharray:2.0,2.0;" x1="339.6934" x2="1571.9606" y1="1397.0039" y2="1397.0039"/><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="108.7019" x="1452.9508" y="1354.2846">HTTP 200 OK,</text><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="182.7316" x="1378.9211" y="1372.8286">tim-search-accesstoken</text><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="227.7117" x="1338.6264" y="1391.3727">(inklusive MXID des Nutzers)</text><polygon fill="#000000" points="1063.1233,1484.8922,1072.4942,1488.6406,1063.1233,1492.3889,1066.8717,1488.6406" style="stroke:#000000;stroke-width:0.9370853351635781;"/><line style="stroke:#000000;stroke-width:0.9370853351635781;" x1="335.008" x2="1068.7458" y1="1488.6406" y2="1488.6406"/><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="570.685" x="341.5676" y="1483.0094">GET /tim-search?... (Auth Header mit tim-search-accesstoken inkl. MXID)</text><line style="stroke:#000000;stroke-width:0.9370853351635781;" x1="1083.7392" x2="1123.0968" y1="1543.731" y2="1543.731"/><line style="stroke:#000000;stroke-width:0.9370853351635781;" x1="1123.0968" x2="1123.0968" y1="1543.731" y2="1555.9131"/><line style="stroke:#000000;stroke-width:0.9370853351635781;" x1="1084.6763" x2="1123.0968" y1="1555.9131" y2="1555.9131"/><polygon fill="#000000" points="1094.0471,1552.1647,1084.6763,1555.9131,1094.0471,1559.6614,1090.2988,1555.9131" style="stroke:#000000;stroke-width:0.9370853351635781;"/><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="228.6488" x="1090.2988" y="1538.0997">prüfe tim-search-accesstoken</text><path d="M218.8094,1593.3965 L284.4054,1593.3965 L284.4054,1599.9561 L275.0345,1609.3269 L218.8094,1609.3269 L218.8094,1593.3965 " fill="#D3D3D3" style="stroke:#000000;stroke-width:0.9370853351635781;"/><rect fill="none" height="51.1151" style="stroke:#000000;stroke-width:1.8741706703271561;" width="971.7575" x="218.8094" y="1593.3965"/><text fill="#000000" font-family="sans-serif" font-size="12.1821" font-weight="bold" lengthAdjust="spacing" textLength="23.4271" x="232.8657" y="1605.6413">opt</text><text fill="#000000" font-family="sans-serif" font-size="10.3079" font-weight="bold" lengthAdjust="spacing" textLength="4.6854" x="298.4617" y="1610.2928">[</text><text fill="#000000" font-family="sans-serif" font-size="14.9934" font-weight="bold" lengthAdjust="spacing" textLength="69.3443" x="303.1471" y="1609.1878">Abbruch</text><text fill="#000000" font-family="sans-serif" font-size="10.3079" font-weight="bold" lengthAdjust="spacing" textLength="4.6854" x="372.4914" y="1610.2928">]</text><polygon fill="#000000" points="345.3159,1633.2665,335.9451,1637.0149,345.3159,1640.7632,341.5676,1637.0149" style="stroke:#000000;stroke-width:0.9370853351635781;"/><line style="stroke:#000000;stroke-width:0.9370853351635781;stroke-dasharray:2.0,2.0;" x1="339.6934" x2="1073.4313" y1="1637.0149" y2="1637.0149"/><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="310.1752" x="757.6335" y="1631.3837">kein tim-search-accesstoken vorhanden</text><path d="M967.5406,1681.0579 L1027.5141,1681.0579 L1027.5141,1687.6175 L1018.1432,1696.9883 L967.5406,1696.9883 L967.5406,1681.0579 " fill="#D3D3D3" style="stroke:#000000;stroke-width:0.9370853351635781;"/><rect fill="none" height="148.1766" style="stroke:#000000;stroke-width:1.8741706703271561;" width="988.625" x="967.5406" y="1681.0579"/><text fill="#000000" font-family="sans-serif" font-size="12.1821" font-weight="bold" lengthAdjust="spacing" textLength="17.8046" x="981.5969" y="1693.3027">alt</text><text fill="#000000" font-family="sans-serif" font-size="10.3079" font-weight="bold" lengthAdjust="spacing" textLength="4.6854" x="1041.5704" y="1697.9542">[</text><text fill="#000000" font-family="sans-serif" font-size="14.9934" font-weight="bold" lengthAdjust="spacing" textLength="382.3308" x="1046.2558" y="1696.8492">TIHealthcareService-Einträge werden gesucht</text><text fill="#000000" font-family="sans-serif" font-size="10.3079" font-weight="bold" lengthAdjust="spacing" textLength="4.6854" x="1428.5866" y="1697.9542">]</text><polygon fill="#000000" points="1828.722,1744.3551,1838.0929,1748.1034,1828.722,1751.8518,1832.4704,1748.1034" style="stroke:#000000;stroke-width:0.9370853351635781;"/><line style="stroke:#000000;stroke-width:0.9370853351635781;" x1="1083.7392" x2="1834.3445" y1="1748.1034" y2="1748.1034"/><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="64.6589" x="1090.2988" y="1742.4722">GET /?...</text><polygon fill="#000000" points="1094.0471,1794.5623,1084.6763,1798.3107,1094.0471,1802.059,1090.2988,1798.3107" style="stroke:#000000;stroke-width:0.9370853351635781;"/><line style="stroke:#000000;stroke-width:0.9370853351635781;stroke-dasharray:2.0,2.0;" x1="1088.4246" x2="1843.7154" y1="1798.3107" y2="1798.3107"/><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="104.0165" x="1734.0764" y="1774.1354">HTTP 200 OK</text><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="143.3741" x="1694.7188" y="1792.6795">(Result Body json)</text><path d="M967.5406,1865.7808 L1027.5141,1865.7808 L1027.5141,1872.3404 L1018.1432,1881.7113 L967.5406,1881.7113 L967.5406,1865.7808 " fill="#D3D3D3" style="stroke:#000000;stroke-width:0.9370853351635781;"/><rect fill="none" height="229.11" style="stroke:#000000;stroke-width:1.8741706703271561;" width="1068.2773" x="967.5406" y="1865.7808"/><text fill="#000000" font-family="sans-serif" font-size="12.1821" font-weight="bold" lengthAdjust="spacing" textLength="17.8046" x="981.5969" y="1878.0256">alt</text><text fill="#000000" font-family="sans-serif" font-size="10.3079" font-weight="bold" lengthAdjust="spacing" textLength="4.6854" x="1041.5704" y="1882.6772">[</text><text fill="#000000" font-family="sans-serif" font-size="14.9934" font-weight="bold" lengthAdjust="spacing" textLength="366.4004" x="1046.2558" y="1881.5722">TIPractitionerRole-Einträge werden gesucht</text><text fill="#000000" font-family="sans-serif" font-size="10.3079" font-weight="bold" lengthAdjust="spacing" textLength="4.6854" x="1412.6561" y="1882.6772">]</text><polygon fill="#000000" points="1828.722,1929.078,1838.0929,1932.8264,1828.722,1936.5747,1832.4704,1932.8264" style="stroke:#000000;stroke-width:0.9370853351635781;"/><line style="stroke:#000000;stroke-width:0.9370853351635781;" x1="1083.7392" x2="1834.3445" y1="1932.8264" y2="1932.8264"/><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="334.5395" x="1090.2988" y="1927.1951">GET /?...&lt;MXID des anfragenden Nutzers&gt;</text><line style="stroke:#000000;stroke-width:0.9370853351635781;" x1="1849.3379" x2="1888.6955" y1="2001.5777" y2="2001.5777"/><line style="stroke:#000000;stroke-width:0.9370853351635781;" x1="1888.6955" x2="1888.6955" y1="2001.5777" y2="2013.7598"/><line style="stroke:#000000;stroke-width:0.9370853351635781;" x1="1850.275" x2="1888.6955" y1="2013.7598" y2="2013.7598"/><polygon fill="#000000" points="1859.6458,2010.0114,1850.275,2013.7598,1859.6458,2017.5081,1855.8975,2013.7598" style="stroke:#000000;stroke-width:0.9370853351635781;"/><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="163.9899" x="1855.8975" y="1958.8584">Prüfung, ob MXID im</text><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="148.0595" x="1855.8975" y="1977.4024">TIEndpoint-Eintrag</text><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="107.7648" x="1855.8975" y="1995.9465">vorhanden ist</text><polygon fill="#000000" points="1094.0471,2060.2187,1084.6763,2063.9671,1094.0471,2067.7154,1090.2988,2063.9671" style="stroke:#000000;stroke-width:0.9370853351635781;"/><line style="stroke:#000000;stroke-width:0.9370853351635781;stroke-dasharray:2.0,2.0;" x1="1088.4246" x2="1843.7154" y1="2063.9671" y2="2063.9671"/><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="104.0165" x="1734.0764" y="2039.7918">HTTP 200 OK</text><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="348.5957" x="1489.4971" y="2058.3358">(Result Body json mit TIPractitioner-Eintrag)</text><line style="stroke:#000000;stroke-width:0.9370853351635781;" x1="1083.7392" x2="1123.0968" y1="2167.5882" y2="2167.5882"/><line style="stroke:#000000;stroke-width:0.9370853351635781;" x1="1123.0968" x2="1123.0968" y1="2167.5882" y2="2179.7703"/><line style="stroke:#000000;stroke-width:0.9370853351635781;" x1="1084.6763" x2="1123.0968" y1="2179.7703" y2="2179.7703"/><polygon fill="#000000" points="1094.0471,2176.022,1084.6763,2179.7703,1094.0471,2183.5186,1090.2988,2179.7703" style="stroke:#000000;stroke-width:0.9370853351635781;"/><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="160.2416" x="1090.2988" y="2143.4129">MXID enthalten und</text><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="220.2151" x="1090.2988" y="2161.957">TIEndpoint.status == active</text><path d="M218.8094,2217.2537 L284.4054,2217.2537 L284.4054,2223.8133 L275.0345,2233.1842 L218.8094,2233.1842 L218.8094,2217.2537 " fill="#D3D3D3" style="stroke:#000000;stroke-width:0.9370853351635781;"/><rect fill="none" height="69.6591" style="stroke:#000000;stroke-width:1.8741706703271561;" width="971.7575" x="218.8094" y="2217.2537"/><text fill="#000000" font-family="sans-serif" font-size="12.1821" font-weight="bold" lengthAdjust="spacing" textLength="23.4271" x="232.8657" y="2229.4985">opt</text><text fill="#000000" font-family="sans-serif" font-size="10.3079" font-weight="bold" lengthAdjust="spacing" textLength="4.6854" x="298.4617" y="2234.1501">[</text><text fill="#000000" font-family="sans-serif" font-size="14.9934" font-weight="bold" lengthAdjust="spacing" textLength="69.3443" x="303.1471" y="2233.0451">Abbruch</text><text fill="#000000" font-family="sans-serif" font-size="10.3079" font-weight="bold" lengthAdjust="spacing" textLength="4.6854" x="372.4914" y="2234.1501">]</text><polygon fill="#000000" points="345.3159,2275.6678,335.9451,2279.4162,345.3159,2283.1645,341.5676,2279.4162" style="stroke:#000000;stroke-width:0.9370853351635781;"/><line style="stroke:#000000;stroke-width:0.9370853351635781;stroke-dasharray:2.0,2.0;" x1="339.6934" x2="1073.4313" y1="2279.4162" y2="2279.4162"/><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="257.6985" x="805.4248" y="2255.2409">kein passender Eintrag gefunden</text><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="249.2647" x="818.544" y="2273.7849">oder TIEndpoint.status == false</text><polygon fill="#000000" points="1343.3118,2355.8618,1352.6827,2359.6102,1343.3118,2363.3585,1347.0602,2359.6102" style="stroke:#000000;stroke-width:0.9370853351635781;"/><line style="stroke:#000000;stroke-width:0.9370853351635781;" x1="1083.7392" x2="1348.9343" y1="2359.6102" y2="2359.6102"/><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="63.7218" x="1090.2988" y="2335.4349">Request</text><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="224.9005" x="1090.2988" y="2353.979">erzeuge PASSporT (MXIDs...)</text><line style="stroke:#000000;stroke-width:0.9370853351635781;" x1="1363.9277" x2="1403.2853" y1="2409.8174" y2="2409.8174"/><line style="stroke:#000000;stroke-width:0.9370853351635781;" x1="1403.2853" x2="1403.2853" y1="2409.8174" y2="2421.9995"/><line style="stroke:#000000;stroke-width:0.9370853351635781;" x1="1364.8648" x2="1403.2853" y1="2421.9995" y2="2421.9995"/><polygon fill="#000000" points="1374.2356,2418.2512,1364.8648,2421.9995,1374.2356,2425.7479,1370.4873,2421.9995" style="stroke:#000000;stroke-width:0.9370853351635781;"/><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="142.437" x="1370.4873" y="2385.6422">Erzeuge PASSporT</text><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="150.8707" x="1370.4873" y="2404.1862">(Attribut orig, dest)</text><polygon fill="#000000" points="1094.0471,2449.9144,1084.6763,2453.6628,1094.0471,2457.4111,1090.2988,2453.6628" style="stroke:#000000;stroke-width:0.9370853351635781;"/><line style="stroke:#000000;stroke-width:0.9370853351635781;stroke-dasharray:2.0,2.0;" x1="1088.4246" x2="1358.3052" y1="2453.6628" y2="2453.6628"/><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="248.3276" x="1104.3551" y="2448.0316">/?PASSporT=[PASSporT-String].</text><polygon fill="#000000" points="340.6305,2481.5777,331.2597,2485.326,340.6305,2489.0744,336.8822,2485.326" style="stroke:#000000;stroke-width:0.9370853351635781;"/><line style="stroke:#000000;stroke-width:0.9370853351635781;stroke-dasharray:2.0,2.0;" x1="335.008" x2="1078.1167" y1="2485.326" y2="2485.326"/><text fill="#000000" font-family="sans-serif" font-size="15.9305" lengthAdjust="spacing" textLength="280.1885" x="792.3057" y="2479.6948">HTTP 200 OK (MXID und PASSporT)</text><!--MD5=[08cd0fd26fdcc83dc3fe42ced43d7737]
@startuml
skinparam sequenceMessageAlign direction
skinparam minClassWidth 200
skinparam BoxPadding 1
skinparam sequenceReferenceHeaderBackgroundColor palegreen
scale max 2048 width

skinparam sequence {
ArrowColor black
ArrowFontSize 17
ActorBorderColor black
LifeLineBorderColor black
LifeLineBackgroundColor Gainsboro

ParticipantBorderColor Motivation
ParticipantBackgroundColor Motivation
ParticipantFontName Impact
ParticipantFontSize 20
ParticipantFontColor black
ParticipantBorderColor Black
ParticipantBackgroundColor MOTIVATION

ActorBackgroundColor Gainsboro
ActorFontColor black
ActorFontSize 20
ActorFontName Aapex
}
    actor U as "Akteur in der Rolle\nUser / User-HBA"
    participant cl as "TI-Messenger-Client"
    participant mp as "Messenger Proxy"
    participant hs as "Matrix-Homeserver"
    box <size:18>VZD-FHIR-Directory</size> #WhiteSmoke
      participant fp as "FHIR-Proxy"
      participant pp as "PASSporT-\nService"
      participant au as "Auth-Service"
      participant fd as "FHIR-Directory"
    end box

|||
note over U, hs: \n<size:17>Der Akteur ist erfolgreich beim Messenger Service angemeldet</size>\n
|||

      activate cl
    U->cl:gibt Suchparameter ein
    cl->cl: prüfe ob noch gültiges \ntim-search-accesstoken\nvorliegt

|||
alt#LightGrey #AliceBlue <size:16>kein gültiges tim-search-accesstoken vorhanden</size>
|||
      

    cl->mp: GET /_matrix/client/r0/user/\n{userId}/openid/request_token 
      activate mp
    mp->hs: HTTP Forward 

      activate hs
    |||
    hs- ->mp: HTTP 200 OK, Result body \n{"access_token": \n"Matrix-OpenID-Token", \n"matrix_server_name": \n"example.com",...}
      deactivate hs
    mp- ->cl: HTTP Forward
      deactivate mp
      
    |||
    cl->au: GET /tim-authenticate... (Auth Header mit Matrix-OpenID-Token)
      activate au
    au->au: Prüfe ob matrix_server_name\nin Föderationsliste enthalten ist

|||
alt#LightGrey #LightBlue <size:16>matrix_server_name nicht in der Föderationsliste enthalten</size>
|||    

    au- ->cl: HTTP 401 \nUnauthorized
    cl->cl: Session beenden
    cl- ->U: Suche nicht erfolgreich
    
    |||
    else <size:16>matrix_server_name in der Föderationsliste enthalten</size>
    |||
        au->mp: GET /openid/userinfo/?\naccess_token=Matrix-OpenID-Token)
          activate mp
        mp->hs: HTTP Forward
          activate hs
        hs->hs: prüfe Matrix-OpenID-token
        hs- ->mp: HTTP 200 OK\n(Result Body \nMXID des Nutzers)
          deactivate hs
        mp- ->au: HTTP Forward
          deactivate mp
        au->au: erzeuge \ntim-search-accesstoken 
        au- ->cl: HTTP 200 OK, \ntim-search-accesstoken \n(inklusive MXID des Nutzers)
          deactivate au
          deactivate fp
    |||
    end
end

    |||
    cl->fp: GET /tim-search?... (Auth Header mit tim-search-accesstoken inkl. MXID)
    |||
      activate fp
    fp->fp: prüfe tim-search-accesstoken
    |||
    opt#LightGrey #MistyRose <size:16>Abbruch</size>
      fp- ->cl: kein tim-search-accesstoken vorhanden
    end
   
|||
alt#LightGrey #AliceBlue <size:16>TIHealthcareService-Einträge werden gesucht</size>
|||
    fp->fd: GET /?...
      activate fd
    fd- ->fp: HTTP 200 OK\n(Result Body json)
      deactivate fd
|||
end

|||
alt#LightGrey #AliceBlue <size:16>TIPractitionerRole-Einträge werden gesucht</size>
|||
    fp->fd: GET /?...<MXID des anfragenden Nutzers>
      activate fd
    fd->fd: Prüfung, ob MXID im \nTIEndpoint-Eintrag \nvorhanden ist
    fd- ->fp: HTTP 200 OK\n(Result Body json mit TIPractitioner-Eintrag)
      deactivate fd
|||
end
|||

  fp->fp: MXID enthalten und \nTIEndpoint.status == active
  |||
  opt#LightGrey #MistyRose <size:16>Abbruch</size>
    fp- ->cl: kein passender Eintrag gefunden \noder TIEndpoint.status == false
  end
  |||
  fp->pp: Request \nerzeuge PASSporT (MXIDs...)
    activate pp
  pp->pp: Erzeuge PASSporT \n(Attribut orig, dest)
  pp- ->fp: /?PASSporT=[PASSporT-String].
    deactivate pp
  fp- ->cl: HTTP 200 OK (MXID und PASSporT)
   |||
    deactivate fp
    deactivate cl

@enduml

PlantUML version 1.2021.16(Wed Dec 08 17:25:22 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>