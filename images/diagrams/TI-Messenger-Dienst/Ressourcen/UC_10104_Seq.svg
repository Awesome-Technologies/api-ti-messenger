<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1772px" preserveAspectRatio="none" style="width:1814px;height:1772px;background:#FFFFFF;" version="1.1" viewBox="0 0 1814 1772" width="1814px" zoomAndPan="magnify"><defs><filter height="300%" id="f108t5a056yvcn" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#F5F5F5" height="1760.3438" style="stroke:#A80036;stroke-width:1.0;" width="773" x="546" y="6"/><text fill="#000000" font-family="sans-serif" font-size="18" font-weight="bold" lengthAdjust="spacing" textLength="193" x="833.5" y="22.708">Messenger-Service</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="0" x="1031.5" y="23.8872"/><rect fill="#F0F8FF" filter="url(#f108t5a056yvcn)" height="1227.8281" style="stroke:#000000;stroke-width:1.0;" width="10" x="360" y="306.1641"/><rect fill="#DCDCDC" filter="url(#f108t5a056yvcn)" height="1227.8281" style="stroke:#000000;stroke-width:1.0;" width="10" x="654" y="339.9531"/><rect fill="#DCDCDC" filter="url(#f108t5a056yvcn)" height="33.7891" style="stroke:#000000;stroke-width:1.0;" width="10" x="927.5" y="420.5313"/><rect fill="#DCDCDC" filter="url(#f108t5a056yvcn)" height="585.8672" style="stroke:#000000;stroke-width:1.0;" width="10" x="927.5" y="914.3359"/><rect fill="#DCDCDC" filter="url(#f108t5a056yvcn)" height="67.5781" style="stroke:#000000;stroke-width:1.0;" width="10" x="1201" y="1021.3906"/><rect fill="#C9FFC9" filter="url(#f108t5a056yvcn)" height="330.1016" style="stroke:#000000;stroke-width:1.0;" width="10" x="1430" y="1237.6797"/><rect fill="#FFFFFF" filter="url(#f108t5a056yvcn)" height="236.4922" style="stroke:#000000;stroke-width:2.0;" width="1087" x="10" y="259.6172"/><rect fill="#FFE4E1" filter="url(#f108t5a056yvcn)" height="167.4922" style="stroke:#000000;stroke-width:2.0;" width="768" x="10" y="689.0547"/><rect fill="#FFFFFF" filter="url(#f108t5a056yvcn)" height="678.4453" style="stroke:#000000;stroke-width:2.0;" width="1564" x="236" y="954.3359"/><rect fill="#FFFFFF" filter="url(#f108t5a056yvcn)" height="143.5" style="stroke:#000000;stroke-width:2.0;" width="786" x="768" y="978.4688"/><rect fill="#FFFFFF" filter="url(#f108t5a056yvcn)" height="439.8125" style="stroke:#000000;stroke-width:2.0;" width="1544" x="246" y="1160.9688"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="133" x2="133" y1="118.5625" y2="1649.7813"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="365" x2="365" y1="118.5625" y2="1649.7813"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="659" x2="659" y1="118.5625" y2="1649.7813"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="932" x2="932" y1="118.5625" y2="1649.7813"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1206" x2="1206" y1="118.5625" y2="1649.7813"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1435" x2="1435" y1="118.5625" y2="1649.7813"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1667" x2="1667" y1="118.5625" y2="1649.7813"/><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="220" x="20" y="90.5645">Akteur - A in der Rolle</text><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="159" x="50.5" y="113.8457">User / User-HBA</text><ellipse cx="133" cy="15" fill="#DCDCDC" filter="url(#f108t5a056yvcn)" rx="8" ry="8" style="stroke:#000000;stroke-width:2.0;"/><path d="M133,23 L133,50 M120,31 L146,31 M133,50 L120,65 M133,50 L146,65 " fill="none" filter="url(#f108t5a056yvcn)" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="220" x="20" y="1667.3457">Akteur - A in der Rolle</text><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="159" x="50.5" y="1690.627">User / User-HBA</text><ellipse cx="133" cy="1705.3438" fill="#DCDCDC" filter="url(#f108t5a056yvcn)" rx="8" ry="8" style="stroke:#000000;stroke-width:2.0;"/><path d="M133,1713.3438 L133,1740.3438 M120,1721.3438 L146,1721.3438 M133,1740.3438 L120,1755.3438 M133,1740.3438 L146,1755.3438 " fill="none" filter="url(#f108t5a056yvcn)" style="stroke:#000000;stroke-width:2.0;"/><rect fill="#F0F8FF" filter="url(#f108t5a056yvcn)" height="60.5625" style="stroke:#000000;stroke-width:1.5;" width="214" x="256" y="53"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="139" x="293.5" y="78.5645">TI-Messenger-</text><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="79" x="323.5" y="101.8457">Client A</text><rect fill="#F0F8FF" filter="url(#f108t5a056yvcn)" height="60.5625" style="stroke:#000000;stroke-width:1.5;" width="214" x="256" y="1648.7813"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="139" x="293.5" y="1674.3457">TI-Messenger-</text><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="79" x="323.5" y="1697.627">Client A</text><rect fill="#EFEFFF" filter="url(#f108t5a056yvcn)" height="60.5625" style="stroke:#000000;stroke-width:1.5;" width="214" x="550" y="53"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="114" x="600" y="78.5645">Messenger-</text><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="54" x="630" y="101.8457">Proxy</text><rect fill="#EFEFFF" filter="url(#f108t5a056yvcn)" height="60.5625" style="stroke:#000000;stroke-width:1.5;" width="214" x="550" y="1648.7813"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="114" x="600" y="1674.3457">Messenger-</text><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="54" x="630" y="1697.627">Proxy</text><rect fill="#EFEFFF" filter="url(#f108t5a056yvcn)" height="60.5625" style="stroke:#000000;stroke-width:1.5;" width="305" x="778" y="53"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="189" x="833" y="78.5645">Matrix-Homeserver</text><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="291" x="785" y="101.8457">(inklusive Nutzerverzeichnis)</text><rect fill="#EFEFFF" filter="url(#f108t5a056yvcn)" height="60.5625" style="stroke:#000000;stroke-width:1.5;" width="305" x="778" y="1648.7813"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="189" x="833" y="1674.3457">Matrix-Homeserver</text><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="291" x="785" y="1697.627">(inklusive Nutzerverzeichnis)</text><rect fill="#EFEFFF" filter="url(#f108t5a056yvcn)" height="37.2813" style="stroke:#000000;stroke-width:1.5;" width="214" x="1097" y="76.2813"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="143" x="1132.5" y="101.8457">Push-Gateway</text><rect fill="#EFEFFF" filter="url(#f108t5a056yvcn)" height="37.2813" style="stroke:#000000;stroke-width:1.5;" width="214" x="1097" y="1648.7813"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="143" x="1132.5" y="1674.3457">Push-Gateway</text><rect fill="#C9FFC9" filter="url(#f108t5a056yvcn)" height="60.5625" style="stroke:#000000;stroke-width:1.5;" width="214" x="1326" y="53"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="139" x="1363.5" y="78.5645">TI-Messenger-</text><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="79" x="1393.5" y="101.8457">Client B</text><rect fill="#C9FFC9" filter="url(#f108t5a056yvcn)" height="60.5625" style="stroke:#000000;stroke-width:1.5;" width="214" x="1326" y="1648.7813"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="139" x="1363.5" y="1674.3457">TI-Messenger-</text><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="79" x="1393.5" y="1697.627">Client B</text><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="220" x="1554" y="90.5645">Akteur - B in der Rolle</text><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="159" x="1584.5" y="113.8457">User / User-HBA</text><ellipse cx="1667" cy="15" fill="#DCDCDC" filter="url(#f108t5a056yvcn)" rx="8" ry="8" style="stroke:#000000;stroke-width:2.0;"/><path d="M1667,23 L1667,50 M1654,31 L1680,31 M1667,50 L1654,65 M1667,50 L1680,65 " fill="none" filter="url(#f108t5a056yvcn)" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="220" x="1554" y="1667.3457">Akteur - B in der Rolle</text><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="159" x="1584.5" y="1690.627">User / User-HBA</text><ellipse cx="1667" cy="1705.3438" fill="#DCDCDC" filter="url(#f108t5a056yvcn)" rx="8" ry="8" style="stroke:#000000;stroke-width:2.0;"/><path d="M1667,1713.3438 L1667,1740.3438 M1654,1721.3438 L1680,1721.3438 M1667,1740.3438 L1654,1755.3438 M1667,1740.3438 L1680,1755.3438 " fill="none" filter="url(#f108t5a056yvcn)" style="stroke:#000000;stroke-width:2.0;"/><rect fill="#F0F8FF" filter="url(#f108t5a056yvcn)" height="1227.8281" style="stroke:#000000;stroke-width:1.0;" width="10" x="360" y="306.1641"/><rect fill="#DCDCDC" filter="url(#f108t5a056yvcn)" height="1227.8281" style="stroke:#000000;stroke-width:1.0;" width="10" x="654" y="339.9531"/><rect fill="#DCDCDC" filter="url(#f108t5a056yvcn)" height="33.7891" style="stroke:#000000;stroke-width:1.0;" width="10" x="927.5" y="420.5313"/><rect fill="#DCDCDC" filter="url(#f108t5a056yvcn)" height="585.8672" style="stroke:#000000;stroke-width:1.0;" width="10" x="927.5" y="914.3359"/><rect fill="#DCDCDC" filter="url(#f108t5a056yvcn)" height="67.5781" style="stroke:#000000;stroke-width:1.0;" width="10" x="1201" y="1021.3906"/><rect fill="#C9FFC9" filter="url(#f108t5a056yvcn)" height="330.1016" style="stroke:#000000;stroke-width:1.0;" width="10" x="1430" y="1237.6797"/><path d="M22,158.5625 L22,218.5625 L1777,218.5625 L1777,168.5625 L1767,158.5625 L22,158.5625 " fill="#FBFB77" filter="url(#f108t5a056yvcn)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1767,158.5625 L1767,168.5625 L1777,168.5625 L1767,158.5625 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="396" y="175.6294"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="1002" x="392" y="194.4751">Die Akteure sind auf dem selben Messenger-Service angemeldet und im Besitz eines zugelassenen TI-Messenger-Clients</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="396" y="210.5513"/><path d="M10,259.6172 L80,259.6172 L80,266.6172 L70,276.6172 L10,276.6172 L10,259.6172 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="236.4922" style="stroke:#000000;stroke-width:2.0;" width="1087" x="10" y="259.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="25" x="25" y="272.6841">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="95" y="277.6479">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="131" x="100" y="276.4688">Akteur suchen</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="231" y="277.6479">]</text><polygon fill="#000000" points="348,302.1641,358,306.1641,348,310.1641,352,306.1641" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="133" x2="354" y1="306.1641" y2="306.1641"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="129" x="140" y="300.1548">Suche Akteur B</text><polygon fill="#000000" points="642,335.9531,652,339.9531,642,343.9531,646,339.9531" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="370" x2="648" y1="339.9531" y2="339.9531"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="233" x="377" y="333.9438">GET /search (display_name)</text><line style="stroke:#000000;stroke-width:1.0;" x1="664" x2="706" y1="373.7422" y2="373.7422"/><line style="stroke:#000000;stroke-width:1.0;" x1="706" x2="706" y1="373.7422" y2="386.7422"/><line style="stroke:#000000;stroke-width:1.0;" x1="665" x2="706" y1="386.7422" y2="386.7422"/><polygon fill="#000000" points="675,382.7422,665,386.7422,675,390.7422,671,386.7422" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="150" x="671" y="367.7329">TLS-Terminierung</text><polygon fill="#000000" points="915.5,416.5313,925.5,420.5313,915.5,424.5313,919.5,420.5313" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="664" x2="921.5" y1="420.5313" y2="420.5313"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="117" x="671" y="414.522">HTTP Forward</text><polygon fill="#000000" points="675,450.3203,665,454.3203,675,458.3203,671,454.3203" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="669" x2="931.5" y1="454.3203" y2="454.3203"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="57" x="868.5" y="448.311">user-id</text><polygon fill="#000000" points="381,484.1094,371,488.1094,381,492.1094,377,488.1094" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="375" x2="653" y1="488.1094" y2="488.1094"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="117" x="530" y="482.1001">HTTP Forward</text><polygon fill="#000000" points="348,524.8984,358,528.8984,348,532.8984,352,528.8984" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="133" x2="354" y1="528.8984" y2="528.8984"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="150" x="140" y="522.8892">Akteur B einladen</text><polygon fill="#000000" points="642,578.4766,652,582.4766,642,586.4766,646,582.4766" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="370" x2="648" y1="582.4766" y2="582.4766"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="260" x="377" y="556.6782">POST /_matrix/client/r0/rooms/</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="136" x="377" y="576.4673">{roomId}/invite</text><line style="stroke:#000000;stroke-width:1.0;" x1="664" x2="706" y1="636.0547" y2="636.0547"/><line style="stroke:#000000;stroke-width:1.0;" x1="706" x2="706" y1="636.0547" y2="649.0547"/><line style="stroke:#000000;stroke-width:1.0;" x1="665" x2="706" y1="649.0547" y2="649.0547"/><polygon fill="#000000" points="675,645.0547,665,649.0547,675,653.0547,671,649.0547" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="180" x="671" y="610.2563">Domainzugehörigkeit</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="55" x="671" y="630.0454">prüfen</text><path d="M10,689.0547 L80,689.0547 L80,696.0547 L70,706.0547 L10,706.0547 L10,689.0547 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="167.4922" style="stroke:#000000;stroke-width:2.0;" width="768" x="10" y="689.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="25" x="25" y="702.1216">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="95" y="707.0854">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="74" x="100" y="705.9063">Abbruch</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="174" y="707.0854">]</text><polygon fill="#000000" points="381,771.1797,371,775.1797,381,779.1797,377,775.1797" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="375" x2="653" y1="775.1797" y2="775.1797"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="145" x="497" y="729.5923">Domain nicht auf</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="112" x="530" y="749.3813">dem gleichen</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="162" x="485" y="769.1704">Matrix-Homeserver</text><polygon fill="#000000" points="144,844.5469,134,848.5469,144,852.5469,140,848.5469" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="138" x2="359" y1="848.5469" y2="848.5469"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="120" x="228" y="802.9595">Akteur B kann</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="139" x="209" y="822.7485">nicht eingeladen</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="63" x="290" y="842.5376">werden</text><polygon fill="#000000" points="915.5,910.3359,925.5,914.3359,915.5,918.3359,919.5,914.3359" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="664" x2="921.5" y1="914.3359" y2="914.3359"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="110" x="671" y="908.3267">HTTP Foward</text><path d="M236,954.3359 L306,954.3359 L306,961.3359 L296,971.3359 L236,971.3359 L236,954.3359 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="678.4453" style="stroke:#000000;stroke-width:2.0;" width="1564" x="236" y="954.3359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="25" x="251" y="967.4028">par</text><path d="M768,978.4688 L849,978.4688 L849,985.4688 L839,995.4688 L768,995.4688 L768,978.4688 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="143.5" style="stroke:#000000;stroke-width:2.0;" width="786" x="768" y="978.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="36" x="783" y="991.5356">push</text><polygon fill="#000000" points="1189,1017.3906,1199,1021.3906,1189,1025.3906,1193,1021.3906" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="937.5" x2="1195" y1="1021.3906" y2="1021.3906"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="97" x="944.5" y="1015.3813">Notification</text><polygon fill="#000000" points="1423,1051.1797,1433,1055.1797,1423,1059.1797,1427,1055.1797" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="1211" x2="1429" y1="1055.1797" y2="1055.1797"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="97" x="1218" y="1049.1704">Notification</text><polygon fill="#000000" points="948.5,1084.9688,938.5,1088.9688,948.5,1092.9688,944.5,1088.9688" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="942.5" x2="1205" y1="1088.9688" y2="1088.9688"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="54" x="1145" y="1082.9595">Status</text><path d="M246,1160.9688 L329,1160.9688 L329,1167.9688 L319,1177.9688 L246,1177.9688 L246,1160.9688 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="439.8125" style="stroke:#000000;stroke-width:2.0;" width="1544" x="246" y="1160.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="38" x="261" y="1174.0356">/sync</text><polygon fill="#000000" points="675,1199.8906,665,1203.8906,675,1207.8906,671,1203.8906" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="669" x2="926.5" y1="1203.8906" y2="1203.8906"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="122" x="798.5" y="1197.8813">Invite Request</text><polygon fill="#000000" points="1418,1233.6797,1428,1237.6797,1418,1241.6797,1422,1237.6797" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="664" x2="1424" y1="1237.6797" y2="1237.6797"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="117" x="671" y="1231.6704">HTTP Forward</text><polygon fill="#000000" points="1655,1267.4688,1665,1271.4688,1655,1275.4688,1659,1271.4688" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="1440" x2="1661" y1="1271.4688" y2="1271.4688"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="164" x="1447" y="1265.4595">Einladung anzeigen</text><polygon fill="#000000" points="1451,1301.2578,1441,1305.2578,1451,1309.2578,1447,1305.2578" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1445" x2="1666" y1="1305.2578" y2="1305.2578"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="177" x="1483" y="1299.2485">Einladung bestätigen</text><polygon fill="#000000" points="675,1335.0469,665,1339.0469,675,1343.0469,671,1339.0469" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="669" x2="1429" y1="1339.0469" y2="1339.0469"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="64" x="1359" y="1333.0376">commit</text><line style="stroke:#000000;stroke-width:1.0;" x1="664" x2="706" y1="1372.8359" y2="1372.8359"/><line style="stroke:#000000;stroke-width:1.0;" x1="706" x2="706" y1="1372.8359" y2="1385.8359"/><line style="stroke:#000000;stroke-width:1.0;" x1="665" x2="706" y1="1385.8359" y2="1385.8359"/><polygon fill="#000000" points="675,1381.8359,665,1385.8359,675,1389.8359,671,1385.8359" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="149" x="671" y="1366.8267">TLS Terminierung</text><polygon fill="#000000" points="915.5,1415.625,925.5,1419.625,915.5,1423.625,919.5,1419.625" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="664" x2="921.5" y1="1419.625" y2="1419.625"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="117" x="671" y="1413.6157">HTTP Forward</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="937.5" x2="979.5" y1="1453.4141" y2="1453.4141"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="979.5" x2="979.5" y1="1453.4141" y2="1466.4141"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="938.5" x2="979.5" y1="1466.4141" y2="1466.4141"/><polygon fill="#000000" points="948.5,1462.4141,938.5,1466.4141,948.5,1470.4141,944.5,1466.4141" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="127" x="944.5" y="1447.4048">Invite auslösen</text><polygon fill="#000000" points="675,1496.2031,665,1500.2031,675,1504.2031,671,1500.2031" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="669" x2="931.5" y1="1500.2031" y2="1500.2031"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="54" x="871.5" y="1494.1938">Status</text><polygon fill="#000000" points="376,1529.9922,366,1533.9922,376,1537.9922,372,1533.9922" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="370" x2="653" y1="1533.9922" y2="1533.9922"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="54" x="593" y="1527.9829">Status</text><polygon fill="#000000" points="1423,1563.7813,1433,1567.7813,1423,1571.7813,1427,1567.7813" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="659" x2="1429" y1="1567.7813" y2="1567.7813"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="54" x="666" y="1561.772">Status</text><!--MD5=[7a340d7da774d73a716892ae5d12d246]
@startuml
skinparam sequenceMessageAlign direction
skinparam minClassWidth 200
skinparam BoxPadding 1
skinparam sequenceReferenceHeaderBackgroundColor palegreen
scale max 2048 width

skinparam sequence {
ArrowColor black
ArrowFontSize 17
ActorBorderColor black
LifeLineBorderColor black
LifeLineBackgroundColor Gainsboro

ParticipantBorderColor Motivation
ParticipantBackgroundColor Motivation
ParticipantFontName Impact
ParticipantFontSize 20
ParticipantFontColor black
ParticipantBorderColor Black
ParticipantBackgroundColor MOTIVATION

ActorBackgroundColor Gainsboro
ActorFontColor black
ActorFontSize 20
ActorFontName Aapex
}
    actor U1 as "Akteur - A in der Rolle\nUser / User-HBA"
    participant C1 as "TI-Messenger-\nClient A" #AliceBlue
    box <size:18>Messenger-Service</size> #WhiteSmoke
      participant MP as "Messenger-\nProxy"
      participant MH as "Matrix-Homeserver \n(inklusive Nutzerverzeichnis)"
      participant PG as "Push-Gateway"
    end box
    participant C2 as "TI-Messenger-\nClient B"#TECHNOLOGY
    actor U2 as "Akteur - B in der Rolle\nUser / User-HBA"
    
|||
note over U1, U2: \n<size:17>Die Akteure sind auf dem selben Messenger-Service angemeldet und im Besitz eines zugelassenen TI-Messenger-Clients</size>\n
|||

    opt#LightGrey <size:16>Akteur suchen</size>
    U1->C1: Suche Akteur B
      activate C1 #AliceBlue
    C1->MP: GET /search (display_name)
      activate MP
    MP->MP: TLS-Terminierung
    MP->MH: HTTP Forward
      activate MH
    MH- ->MP: user-id
      deactivate MH
    MP- ->C1: HTTP Forward
    end
    U1->C1: Akteur B einladen
    C1->MP: POST /_matrix/client/r0/rooms/\n{roomId}/invite
    MP->MP: Domainzugehörigkeit \nprüfen
    |||
    opt#LightGrey #MistyRose <size:16>Abbruch</size>
      MP- ->C1: Domain nicht auf \ndem gleichen \nMatrix-Homeserver
      C1- ->U1: Akteur B kann \nnicht eingeladen \nwerden
    end
    |||
    MP->MH: HTTP Foward
      activate MH
    |||
    group par 
      group push
        MH->PG: Notification
          activate PG
        PG->C2: Notification
        PG- ->MH: Status
          deactivate PG
      |||
      end
      |||
      group /sync
        MH->MP: Invite Request
        MP->C2: HTTP Forward
          activate C2 #TECHNOLOGY
        C2->U2: Einladung anzeigen
        U2- ->C2: Einladung bestätigen
        C2->MP: commit
        MP->MP: TLS Terminierung
        MP- ->MH: HTTP Forward
        MH- ->MH: Invite auslösen
        MH- ->MP: Status
          deactivate MH
        MP- ->C1: Status
          deactivate C1
        MP- ->C2: Status
          deactivate C2
          deactivate MP
          |||
      end
|||
    end
@enduml

PlantUML version 1.2021.16(Wed Dec 08 17:25:22 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>