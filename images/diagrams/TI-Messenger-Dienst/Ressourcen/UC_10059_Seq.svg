<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="3105px" preserveAspectRatio="none" style="width:1956px;height:3105px;background:#FFFFFF;" version="1.1" viewBox="0 0 1956 3105" width="1956px" zoomAndPan="magnify"><defs/><g><rect fill="#F5F5F5" height="3093.6094" style="stroke:#181818;stroke-width:0.5;" width="465" x="240" y="6"/><text fill="#000000" font-family="sans-serif" font-size="18" font-weight="bold" lengthAdjust="spacing" textLength="93" x="426" y="22.708">Endgerät</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="5" x="426" y="39.02"> </text><rect fill="#F5F5F5" height="3093.6094" style="stroke:#181818;stroke-width:0.5;" width="745" x="933" y="6"/><text fill="#000000" font-family="sans-serif" font-size="18" font-weight="bold" lengthAdjust="spacing" textLength="200" x="1203" y="22.708">VZD-FHIR-Directory</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="5" x="1403" y="23.8872"> </text><rect fill="#DCDCDC" height="2664.1719" style="stroke:#000000;stroke-width:1.0;" width="10" x="346" y="315.875"/><rect fill="#DCDCDC" height="291.3125" style="stroke:#000000;stroke-width:1.0;" width="10" x="589" y="1347.3438"/><rect fill="#DCDCDC" height="350.1016" style="stroke:#000000;stroke-width:1.0;" width="10" x="814" y="1347.3438"/><rect fill="#DCDCDC" height="33.7891" style="stroke:#000000;stroke-width:1.0;" width="10" x="814" y="1815.0234"/><rect fill="#DCDCDC" height="214.7344" style="stroke:#000000;stroke-width:1.0;" width="10" x="1039" y="2256.5859"/><rect fill="#DCDCDC" height="214.7344" style="stroke:#000000;stroke-width:1.0;" width="10" x="1039" y="2634.5234"/><rect fill="#DCDCDC" height="1165.8516" style="stroke:#000000;stroke-width:1.0;" width="10" x="1263" y="855.1172"/><rect fill="#DCDCDC" height="80.5781" style="stroke:#000000;stroke-width:1.0;" width="10" x="1562" y="2356.9531"/><rect fill="#DCDCDC" height="80.5781" style="stroke:#000000;stroke-width:1.0;" width="10" x="1562" y="2734.8906"/><rect fill="#DCDCDC" height="33.7891" style="stroke:#000000;stroke-width:1.0;" width="10" x="1804" y="730.5391"/><rect fill="#DCDCDC" height="53.5781" style="stroke:#000000;stroke-width:1.0;" width="10" x="1804" y="908.6953"/><rect fill="#F0F8FF" height="1611.7266" style="stroke:#000000;stroke-width:1.5;" width="1940" x="10" y="442.2422"/><rect height="694.1875" style="stroke:#000000;stroke-width:1.5;fill:none;" width="1920" x="20" y="495"/><rect fill="#F0F8FF" height="138.3359" style="stroke:#000000;stroke-width:1.5;" width="1696" x="234" y="658.9922"/><rect fill="#FFE4E1" height="113.3359" style="stroke:#000000;stroke-width:1.5;" width="1355" x="30" y="1043.8516"/><rect height="855.0781" style="stroke:#000000;stroke-width:1.5;fill:none;" width="1731" x="30" y="2092.9688"/><rect height="358.7266" style="stroke:#000000;stroke-width:1.5;fill:none;" width="1471" x="234" y="2145.5938"/><rect height="338.9375" style="stroke:#000000;stroke-width:1.5;fill:none;" width="1517" x="234" y="2543.3203"/><line style="stroke:#000000;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="136" x2="136" y1="130.9297" y2="2990.0469"/><line style="stroke:#000000;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="351" x2="351" y1="130.9297" y2="2990.0469"/><line style="stroke:#000000;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="594" x2="594" y1="130.9297" y2="2990.0469"/><line style="stroke:#000000;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="819" x2="819" y1="130.9297" y2="2990.0469"/><line style="stroke:#000000;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1044" x2="1044" y1="130.9297" y2="2990.0469"/><line style="stroke:#000000;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1268" x2="1268" y1="130.9297" y2="2990.0469"/><line style="stroke:#000000;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1567" x2="1567" y1="130.9297" y2="2990.0469"/><line style="stroke:#000000;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1809" x2="1809" y1="130.9297" y2="2990.0469"/><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="187" x="40" y="102.9316">Akteur in der Rolle</text><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="110" x="78.5" y="126.2129">Org-Admin</text><ellipse cx="136.5" cy="32.8672" fill="#DCDCDC" rx="8" ry="8" style="stroke:#000000;stroke-width:0.5;"/><path d="M136.5,40.8672 L136.5,67.8672 M123.5,48.8672 L149.5,48.8672 M136.5,67.8672 L123.5,82.8672 M136.5,67.8672 L149.5,82.8672 " fill="none" style="stroke:#000000;stroke-width:0.5;"/><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="187" x="40" y="3007.6113">Akteur in der Rolle</text><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="110" x="78.5" y="3030.8926">Org-Admin</text><ellipse cx="136.5" cy="3044.1094" fill="#DCDCDC" rx="8" ry="8" style="stroke:#000000;stroke-width:0.5;"/><path d="M136.5,3052.1094 L136.5,3079.1094 M123.5,3060.1094 L149.5,3060.1094 M136.5,3079.1094 L123.5,3094.1094 M136.5,3079.1094 L149.5,3094.1094 " fill="none" style="stroke:#000000;stroke-width:0.5;"/><rect fill="#EFEFFF" height="83.8438" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="244" y="46.0859"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="198" x="252" y="71.6504">TI-Messenger-Client</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="150" x="276" y="94.9316">mit Org-Admin</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="141" x="280.5" y="118.2129">Funktionalität</text><rect fill="#EFEFFF" height="83.8438" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="244" y="2989.0469"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="198" x="252" y="3014.6113">TI-Messenger-Client</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="150" x="276" y="3037.8926">mit Org-Admin</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="141" x="280.5" y="3061.1738">Funktionalität</text><rect fill="#EFEFFF" height="60.5625" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="487" y="69.3672"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="138" x="522" y="94.9316">Authenticator</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="145" x="521.5" y="118.2129">des IDP-Dienst</text><rect fill="#EFEFFF" height="60.5625" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="487" y="2989.0469"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="138" x="522" y="3014.6113">Authenticator</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="145" x="521.5" y="3037.8926">des IDP-Dienst</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="712" y="92.6484"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="104" x="767" y="118.2129">IDP-Dienst</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="712" y="2989.0469"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="104" x="767" y="3014.6113">IDP-Dienst</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="937" y="92.6484"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="108" x="990" y="118.2129">FHIR-Proxy</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="937" y="2989.0469"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="108" x="990" y="3014.6113">FHIR-Proxy</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="1161" y="92.6484"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="128" x="1204" y="118.2129">Auth-Service</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="1161" y="2989.0469"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="128" x="1204" y="3014.6113">Auth-Service</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="1460" y="92.6484"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="145" x="1494.5" y="118.2129">FHIR-Directory</text><rect fill="#EFEFFF" height="37.2813" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="1460" y="2989.0469"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="145" x="1494.5" y="3014.6113">FHIR-Directory</text><rect fill="#EFEFFF" height="60.5625" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="222" x="1698" y="69.3672"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="132" x="1743" y="94.9316">TI-Messenger</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="208" x="1705" y="118.2129">Registrierungsdienst</text><rect fill="#EFEFFF" height="60.5625" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="222" x="1698" y="2989.0469"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="132" x="1743" y="3014.6113">TI-Messenger</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="208" x="1705" y="3037.8926">Registrierungsdienst</text><rect fill="#DCDCDC" height="2664.1719" style="stroke:#000000;stroke-width:1.0;" width="10" x="346" y="315.875"/><rect fill="#DCDCDC" height="291.3125" style="stroke:#000000;stroke-width:1.0;" width="10" x="589" y="1347.3438"/><rect fill="#DCDCDC" height="350.1016" style="stroke:#000000;stroke-width:1.0;" width="10" x="814" y="1347.3438"/><rect fill="#DCDCDC" height="33.7891" style="stroke:#000000;stroke-width:1.0;" width="10" x="814" y="1815.0234"/><rect fill="#DCDCDC" height="214.7344" style="stroke:#000000;stroke-width:1.0;" width="10" x="1039" y="2256.5859"/><rect fill="#DCDCDC" height="214.7344" style="stroke:#000000;stroke-width:1.0;" width="10" x="1039" y="2634.5234"/><rect fill="#DCDCDC" height="1165.8516" style="stroke:#000000;stroke-width:1.0;" width="10" x="1263" y="855.1172"/><rect fill="#DCDCDC" height="80.5781" style="stroke:#000000;stroke-width:1.0;" width="10" x="1562" y="2356.9531"/><rect fill="#DCDCDC" height="80.5781" style="stroke:#000000;stroke-width:1.0;" width="10" x="1562" y="2734.8906"/><rect fill="#DCDCDC" height="33.7891" style="stroke:#000000;stroke-width:1.0;" width="10" x="1804" y="730.5391"/><rect fill="#DCDCDC" height="53.5781" style="stroke:#000000;stroke-width:1.0;" width="10" x="1804" y="908.6953"/><path d="M37,170.9297 L37,219.9297 L918,219.9297 L918,180.9297 L908,170.9297 L37,170.9297 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M908,170.9297 L908,180.9297 L918,180.9297 L908,170.9297 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="607" x="167" y="191.7095">Die Organisation hat einen Messenger-Service bereitgestellt bekommen,</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="214" x="167" y="211.4985">der Teil der Föderation ist</text><polygon fill="#000000" points="334,311.875,344,315.875,334,319.875,338,315.875" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="136.5" x2="340" y1="315.875" y2="315.875"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="168" x="143.5" y="270.2876">FHIR Ressourcen im</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="166" x="143.5" y="290.0767">VZD-FHIR-Directory</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="94" x="143.5" y="309.8657">hinzufügen</text><line style="stroke:#000000;stroke-width:1.0;" x1="356" x2="398" y1="389.2422" y2="389.2422"/><line style="stroke:#000000;stroke-width:1.0;" x1="398" x2="398" y1="389.2422" y2="402.2422"/><line style="stroke:#000000;stroke-width:1.0;" x1="357" x2="398" y1="402.2422" y2="402.2422"/><polygon fill="#000000" points="367,398.2422,357,402.2422,367,406.2422,363,402.2422" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="167" x="363" y="343.6548">Prüfung, ob gültiges</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="159" x="363" y="363.4438">owner-accesstoken</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="64" x="363" y="383.2329">vorliegt</text><path d="M10,442.2422 L80,442.2422 L80,449.375 L70,459.375 L10,459.375 L10,442.2422 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="1611.7266" style="stroke:#000000;stroke-width:1.5;" width="1940" x="10" y="442.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="25" x="25" y="455.3091">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="95" y="460.2729">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="295" x="100" y="459.0938">kein gültiges owner-accesstoken</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="395" y="460.2729">]</text><path d="M20,495 L347,495 L347,505.625 L337,515.625 L20,515.625 L20,495 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="694.1875" style="stroke:#000000;stroke-width:1.5;" width="1920" x="20" y="495"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="282" x="35" y="510.8516">Prüfung valider Org-Admin User</text><line style="stroke:#000000;stroke-width:1.0;" x1="356" x2="398" y1="605.9922" y2="605.9922"/><line style="stroke:#000000;stroke-width:1.0;" x1="398" x2="398" y1="605.9922" y2="618.9922"/><line style="stroke:#000000;stroke-width:1.0;" x1="357" x2="398" y1="618.9922" y2="618.9922"/><polygon fill="#000000" points="367,614.9922,357,618.9922,367,622.9922,363,618.9922" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="167" x="363" y="560.4048">Prüfung, ob gültiges</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="219" x="363" y="580.1938">RegService-OpenID-Token</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="64" x="363" y="599.9829">vorliegt</text><path d="M234,658.9922 L304,658.9922 L304,666.125 L294,676.125 L234,676.125 L234,658.9922 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="138.3359" style="stroke:#000000;stroke-width:1.5;" width="1696" x="234" y="658.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="25" x="249" y="672.0591">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="319" y="677.0229">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="353" x="324" y="675.8438">kein gültiges RegService-OpenID-Token</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="677" y="677.0229">]</text><polygon fill="#000000" points="1792,726.5391,1802,730.5391,1792,734.5391,1796,730.5391" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="356" x2="1798" y1="730.5391" y2="730.5391"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="388" x="363" y="724.5298">POST /regservice/user/{userId}/request_token</text><polygon fill="#000000" points="367,760.3281,357,764.3281,367,768.3281,363,764.3281" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="361" x2="1808" y1="764.3281" y2="764.3281"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="1424" x="378" y="758.3188">HTTP 200 OK, Result body {"access_token": "RegService-OpenID-Token",..., "reg_server_url": "https://regserver.example.com/openid/userinfo/"; "userid": "admin-userid"}</text><polygon fill="#000000" points="1251,851.1172,1261,855.1172,1251,859.1172,1255,855.1172" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="356" x2="1257" y1="855.1172" y2="855.1172"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="593" x="363" y="849.1079">GET /owner-authenticate (Auth Header mit RegService-OpenID-Token)</text><polygon fill="#000000" points="1792,904.6953,1802,908.6953,1792,912.6953,1796,908.6953" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="1273" x2="1798" y1="908.6953" y2="908.6953"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="190" x="1280" y="882.897">GET /openid/userinfo/?</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="349" x="1280" y="902.686">access_token=RegService-OpenID-Token)</text><polygon fill="#000000" points="1284,958.2734,1274,962.2734,1284,966.2734,1280,962.2734" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1278" x2="1808" y1="962.2734" y2="962.2734"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="111" x="1609" y="936.4751">HTTP 200 OK</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="193" x="1609" y="956.2642">(userid des Org-Admin)</text><line style="stroke:#000000;stroke-width:1.0;" x1="1273" x2="1315" y1="1015.8516" y2="1015.8516"/><line style="stroke:#000000;stroke-width:1.0;" x1="1315" x2="1315" y1="1015.8516" y2="1028.8516"/><line style="stroke:#000000;stroke-width:1.0;" x1="1274" x2="1315" y1="1028.8516" y2="1028.8516"/><polygon fill="#000000" points="1284,1024.8516,1274,1028.8516,1284,1032.8516,1280,1028.8516" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="202" x="1280" y="990.0532">verify Response.userid=</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="275" x="1280" y="1009.8423">RegService-OpenID-Token.userid</text><path d="M30,1043.8516 L100,1043.8516 L100,1050.9844 L90,1060.9844 L30,1060.9844 L30,1043.8516 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="113.3359" style="stroke:#000000;stroke-width:1.5;" width="1355" x="30" y="1043.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="25" x="45" y="1056.9185">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="115" y="1061.8823">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="74" x="120" y="1060.7031">Abbruch</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="5" x="194" y="1061.8823">]</text><polygon fill="#000000" points="367,1086.3984,357,1090.3984,367,1094.3984,363,1090.3984" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="361" x2="1262" y1="1090.3984" y2="1090.3984"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="159" x="1097" y="1084.3892">Unbekannte userid</text><polygon fill="#000000" points="147.5,1120.1875,137.5,1124.1875,147.5,1128.1875,143.5,1124.1875" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="141.5" x2="345" y1="1124.1875" y2="1124.1875"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="163" x="176" y="1118.1782">keine Berechtigung</text><line style="stroke:#000000;stroke-width:1.0;" x1="1273" x2="1315" y1="1266.7656" y2="1266.7656"/><line style="stroke:#000000;stroke-width:1.0;" x1="1315" x2="1315" y1="1266.7656" y2="1279.7656"/><line style="stroke:#000000;stroke-width:1.0;" x1="1274" x2="1315" y1="1279.7656" y2="1279.7656"/><polygon fill="#000000" points="1284,1275.7656,1274,1279.7656,1284,1283.7656,1280,1279.7656" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="164" x="1280" y="1240.9673">Erzeuge PKCE Code</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="211" x="1280" y="1260.7563">für verifier und challenge</text><polygon fill="#000000" points="367,1309.5547,357,1313.5547,367,1317.5547,363,1313.5547" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="361" x2="1262" y1="1313.5547" y2="1313.5547"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="434" x="822" y="1307.5454">Redirect to IDP Authorization Endpoint (PKCE Code)</text><polygon fill="#000000" points="802,1343.3438,812,1347.3438,802,1351.3438,806,1347.3438" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="356" x2="808" y1="1347.3438" y2="1347.3438"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="124" x="363" y="1341.3345">GET /authorize</text><polygon fill="#000000" points="367,1396.9219,357,1400.9219,367,1404.9219,363,1400.9219" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="361" x2="813" y1="1400.9219" y2="1400.9219"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="124" x="678" y="1375.1235">Authentication</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="80" x="678" y="1394.9126">challenge</text><polygon fill="#000000" points="147.5,1475.5,137.5,1479.5,147.5,1483.5,143.5,1479.5" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="141.5" x2="588" y1="1479.5" y2="1479.5"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="141" x="436" y="1453.7017">Aufforderung zur</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="146" x="436" y="1473.4907">Authentifizierung</text><polygon fill="#000000" points="577,1509.2891,587,1513.2891,577,1517.2891,581,1513.2891" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="136.5" x2="583" y1="1513.2891" y2="1513.2891"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="132" x="143.5" y="1507.2798">Eingabe tätigen</text><line style="stroke:#000000;stroke-width:1.0;" x1="599" x2="641" y1="1572.0781" y2="1572.0781"/><line style="stroke:#000000;stroke-width:1.0;" x1="641" x2="641" y1="1572.0781" y2="1585.0781"/><line style="stroke:#000000;stroke-width:1.0;" x1="600" x2="641" y1="1585.0781" y2="1585.0781"/><polygon fill="#000000" points="610,1581.0781,600,1585.0781,610,1589.0781,606,1585.0781" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="124" x="606" y="1566.0688">Authentication</text><polygon fill="#000000" points="802,1634.6563,812,1638.6563,802,1642.6563,806,1638.6563" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="594" x2="808" y1="1638.6563" y2="1638.6563"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="124" x="601" y="1612.8579">Authentication</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="159" x="601" y="1632.647">challenge response</text><polygon fill="#000000" points="367,1693.4453,357,1697.4453,367,1701.4453,363,1697.4453" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="361" x2="818" y1="1697.4453" y2="1697.4453"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="405" x="407" y="1691.436">Authorization Response with Authorization Code</text><polygon fill="#000000" points="1251,1752.2344,1261,1756.2344,1251,1760.2344,1255,1756.2344" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="356" x2="1257" y1="1756.2344" y2="1756.2344"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="526" x="363" y="1750.2251">GET /owner-authenticate with Authorization code (PKCE Code)</text><polygon fill="#000000" points="835,1811.0234,825,1815.0234,835,1819.0234,831,1815.0234" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="829" x2="1262" y1="1815.0234" y2="1815.0234"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="352" x="904" y="1809.0142">POST /tokenEndpoint (authorization code)</text><polygon fill="#000000" points="1251,1844.8125,1261,1848.8125,1251,1852.8125,1255,1848.8125" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="819" x2="1257" y1="1848.8125" y2="1848.8125"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="72" x="826" y="1842.8032">id_token</text><line style="stroke:#000000;stroke-width:1.0;" x1="1273" x2="1315" y1="1882.6016" y2="1882.6016"/><line style="stroke:#000000;stroke-width:1.0;" x1="1315" x2="1315" y1="1882.6016" y2="1895.6016"/><line style="stroke:#000000;stroke-width:1.0;" x1="1274" x2="1315" y1="1895.6016" y2="1895.6016"/><polygon fill="#000000" points="1284,1891.6016,1274,1895.6016,1284,1899.6016,1280,1895.6016" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="121" x="1280" y="1876.5923">prüfe id_token</text><line style="stroke:#000000;stroke-width:1.0;" x1="1273" x2="1315" y1="1974.1797" y2="1974.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="1315" x2="1315" y1="1974.1797" y2="1987.1797"/><line style="stroke:#000000;stroke-width:1.0;" x1="1274" x2="1315" y1="1987.1797" y2="1987.1797"/><polygon fill="#000000" points="1284,1983.1797,1274,1987.1797,1284,1991.1797,1280,1987.1797" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="66" x="1280" y="1948.3813">erzeuge</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="159" x="1280" y="1968.1704">owner-accesstoken</text><polygon fill="#000000" points="367,2016.9688,357,2020.9688,367,2024.9688,363,2020.9688" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="361" x2="1267" y1="2020.9688" y2="2020.9688"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="159" x="1102" y="2014.9595">owner-accesstoken</text><path d="M30,2092.9688 L357,2092.9688 L357,2103.5938 L347,2113.5938 L30,2113.5938 L30,2092.9688 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="855.0781" style="stroke:#000000;stroke-width:1.5;" width="1731" x="30" y="2092.9688"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="282" x="45" y="2108.8203">FHIR-Directory Eintrag erstellen</text><path d="M234,2145.5938 L658,2145.5938 L658,2156.2188 L648,2166.2188 L234,2166.2188 L234,2145.5938 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="358.7266" style="stroke:#000000;stroke-width:1.5;" width="1471" x="234" y="2145.5938"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="379" x="249" y="2161.4453">FHIR-Ressource der Organisation anzeigen</text><polygon fill="#000000" points="1027,2252.5859,1037,2256.5859,1027,2260.5859,1031,2256.5859" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="356" x2="1033" y1="2256.5859" y2="2256.5859"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="296" x="363" y="2210.9985">POST /owner/HealthcareService/?...</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="333" x="363" y="2230.7876">Finde Datensatz für eigene TelematikID</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="338" x="363" y="2250.5767">Authorization Bearer owner-accesstoken</text><line style="stroke:#000000;stroke-width:1.0;" x1="1049" x2="1091" y1="2310.1641" y2="2310.1641"/><line style="stroke:#000000;stroke-width:1.0;" x1="1091" x2="1091" y1="2310.1641" y2="2323.1641"/><line style="stroke:#000000;stroke-width:1.0;" x1="1050" x2="1091" y1="2323.1641" y2="2323.1641"/><polygon fill="#000000" points="1060,2319.1641,1050,2323.1641,1060,2327.1641,1056,2323.1641" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="44" x="1056" y="2284.3657">prüfe</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="159" x="1056" y="2304.1548">owner-accesstoken</text><polygon fill="#000000" points="1550,2352.9531,1560,2356.9531,1550,2360.9531,1554,2356.9531" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="1049" x2="1556" y1="2356.9531" y2="2356.9531"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="128" x="1056" y="2350.9438">HTTPS Forward</text><line style="stroke:#000000;stroke-width:1.0;" x1="1572" x2="1614" y1="2390.7422" y2="2390.7422"/><line style="stroke:#000000;stroke-width:1.0;" x1="1614" x2="1614" y1="2390.7422" y2="2403.7422"/><line style="stroke:#000000;stroke-width:1.0;" x1="1573" x2="1614" y1="2403.7422" y2="2403.7422"/><polygon fill="#000000" points="1583,2399.7422,1573,2403.7422,1583,2407.7422,1579,2403.7422" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="114" x="1579" y="2384.7329">suche Eintrag</text><polygon fill="#000000" points="1060,2433.5313,1050,2437.5313,1060,2441.5313,1056,2437.5313" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1054" x2="1566" y1="2437.5313" y2="2437.5313"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="132" x="1428" y="2431.522">result body json</text><polygon fill="#000000" points="367,2467.3203,357,2471.3203,367,2475.3203,363,2471.3203" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="361" x2="1043" y1="2471.3203" y2="2471.3203"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="128" x="909" y="2465.311">HTTPS Forward</text><path d="M234,2543.3203 L726,2543.3203 L726,2553.9453 L716,2563.9453 L234,2563.9453 L234,2543.3203 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="338.9375" style="stroke:#000000;stroke-width:1.5;" width="1517" x="234" y="2543.3203"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="447" x="249" y="2559.1719">FHIR-Ressource der Organisation erstellen/ändern</text><polygon fill="#000000" points="1027,2630.5234,1037,2634.5234,1027,2638.5234,1031,2634.5234" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="356" x2="1033" y1="2634.5234" y2="2634.5234"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="459" x="363" y="2608.7251">FHIR-Operationen um eigenen Datensatz zu verwalten</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="338" x="363" y="2628.5142">Authorization Bearer owner-accesstoken</text><line style="stroke:#000000;stroke-width:1.0;" x1="1049" x2="1091" y1="2688.1016" y2="2688.1016"/><line style="stroke:#000000;stroke-width:1.0;" x1="1091" x2="1091" y1="2688.1016" y2="2701.1016"/><line style="stroke:#000000;stroke-width:1.0;" x1="1050" x2="1091" y1="2701.1016" y2="2701.1016"/><polygon fill="#000000" points="1060,2697.1016,1050,2701.1016,1060,2705.1016,1056,2701.1016" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="44" x="1056" y="2662.3032">prüfe</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="159" x="1056" y="2682.0923">owner-accesstoken</text><polygon fill="#000000" points="1550,2730.8906,1560,2734.8906,1550,2738.8906,1554,2734.8906" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="1049" x2="1556" y1="2734.8906" y2="2734.8906"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="128" x="1056" y="2728.8813">HTTPS Forward</text><line style="stroke:#000000;stroke-width:1.0;" x1="1572" x2="1614" y1="2768.6797" y2="2768.6797"/><line style="stroke:#000000;stroke-width:1.0;" x1="1614" x2="1614" y1="2768.6797" y2="2781.6797"/><line style="stroke:#000000;stroke-width:1.0;" x1="1573" x2="1614" y1="2781.6797" y2="2781.6797"/><polygon fill="#000000" points="1583,2777.6797,1573,2781.6797,1583,2785.6797,1579,2781.6797" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="160" x="1579" y="2762.6704">Eintrag hinzufügen</text><polygon fill="#000000" points="1060,2811.4688,1050,2815.4688,1060,2819.4688,1056,2815.4688" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1054" x2="1566" y1="2815.4688" y2="2815.4688"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="132" x="1428" y="2809.4595">result body json</text><polygon fill="#000000" points="367,2845.2578,357,2849.2578,367,2853.2578,363,2849.2578" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="361" x2="1043" y1="2849.2578" y2="2849.2578"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="128" x="909" y="2843.2485">HTTPS Forward</text><polygon fill="#000000" points="147.5,2911.0469,137.5,2915.0469,147.5,2919.0469,143.5,2915.0469" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="141.5" x2="345" y1="2915.0469" y2="2915.0469"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="51" x="288" y="2909.0376">status</text><!--MD5=[a74a0f2d6383e11a775feda346707b11]
@startuml
skinparam sequenceMessageAlign direction
skinparam minClassWidth 200
skinparam BoxPadding 1
skinparam sequenceReferenceHeaderBackgroundColor palegreen
scale max 2048 width

skinparam sequence {
ArrowColor black
ArrowFontSize 17
ActorBorderColor black
LifeLineBorderColor black
LifeLineBackgroundColor Gainsboro

ParticipantBorderColor Motivation
ParticipantBackgroundColor Motivation
ParticipantFontSize 20
ParticipantFontColor black
ParticipantBorderColor Black
ParticipantBackgroundColor MOTIVATION

ActorBackgroundColor Gainsboro
ActorFontColor black
ActorFontSize 20
ActorFontName Aapex
}
    actor U as "Akteur in der Rolle\nOrg-Admin"
    box <size:18>Endgerät</size>\n #WhiteSmoke 
    participant C as "TI-Messenger-Client\n mit Org-Admin \nFunktionalität"
    participant A as "Authenticator \ndes IDP-Dienst"
    end box
    participant I as "IDP-Dienst" 
    box <size:18>VZD-FHIR-Directory</size> #WhiteSmoke
      participant FP as "FHIR-Proxy"
      participant Auth as "Auth-Service"
      participant VZD as "FHIR-Directory"
    end box
    participant RD as "TI-Messenger\nRegistrierungsdienst"

|||
note over U, I: <size:17>Die Organisation hat einen Messenger-Service bereitgestellt bekommen, \n<size:17>der Teil der Föderation ist</size>
|||

U->C: FHIR Ressourcen im \nVZD-FHIR-Directory \nhinzufügen
  Activate C
C->C: Prüfung, ob gültiges \nowner-accesstoken \nvorliegt

|||
opt#LightGrey #AliceBlue <size:16>kein gültiges owner-accesstoken</size>
|||
group <size:16>Prüfung valider Org-Admin User</size>
|||
C->C: Prüfung, ob gültiges \nRegService-OpenID-Token\nvorliegt
|||
opt#LightGrey #AliceBlue <size:16>kein gültiges RegService-OpenID-Token</size>
|||
  C -> RD: POST /regservice/user/{userId}/request_token
  activate RD
  RD - -> C: HTTP 200 OK, Result body {"access_token": "RegService-OpenID-Token",..., "reg_server_url": "https://regserver.example.com/openid/userinfo/"; "userid": "admin-userid"}
  deactivate RD
|||
  end
|||
  C->Auth: GET /owner-authenticate (Auth Header mit RegService-OpenID-Token)
    Activate Auth
  Auth -> RD: GET /openid/userinfo/?\naccess_token=RegService-OpenID-Token)
  activate RD
  RD - -> Auth: HTTP 200 OK\n(userid des Org-Admin)
  deactivate RD
  Auth -> Auth: verify Response.userid=\nRegService-OpenID-Token.userid
  opt#LightGrey #MistyRose <size:16>Abbruch</size>
  Auth - -> C: Unbekannte userid
  C - -> U: keine Berechtigung
  |||
  end
  |||
end group
|||
  Auth->Auth: Erzeuge PKCE Code \nfür verifier und challenge
  Auth- ->C: Redirect to IDP Authorization Endpoint (PKCE Code)

  C->I: GET /authorize
    Activate A
    Activate I
  I- ->C: Authentication \nchallenge
  |||
  A->U: Aufforderung zur \nAuthentifizierung
  U->A: Eingabe tätigen
  |||
  A->A: Authentication
  A->I: Authentication \nchallenge response
    Deactivate A
  |||
  I- ->C: Authorization Response with Authorization Code
    Deactivate I
      
  |||    
  C->Auth: GET /owner-authenticate with Authorization code (PKCE Code)
  |||
  Auth- ->I: POST /tokenEndpoint (authorization code)
    Activate I
  I- ->Auth: id_token
    Deactivate I
  Auth->Auth: prüfe id_token
  |||
  Auth->Auth: erzeuge \nowner-accesstoken
  Auth- ->C: owner-accesstoken
  ||| 
    
    Deactivate Auth
end
      
|||

group <size:16>FHIR-Directory Eintrag erstellen</size>
  |||
  group <size:16>FHIR-Ressource der Organisation anzeigen</size>
  |||
  C->FP: POST /owner/HealthcareService/?... \nFinde Datensatz für eigene TelematikID \nAuthorization Bearer owner-accesstoken
    Activate FP
  FP->FP: prüfe \nowner-accesstoken
  FP->VZD: HTTPS Forward
    Activate VZD
  VZD->VZD: suche Eintrag
  VZD- ->FP: result body json
    Deactivate VZD
  FP- ->C: HTTPS Forward
    Deactivate FP
  |||
  end

  |||
  group <size:16>FHIR-Ressource der Organisation erstellen/ändern</size>
  |||
  C->FP: FHIR-Operationen um eigenen Datensatz zu verwalten \nAuthorization Bearer owner-accesstoken
    Activate FP
  FP->FP: prüfe \nowner-accesstoken
  FP->VZD: HTTPS Forward
    Activate VZD
  VZD->VZD: Eintrag hinzufügen
  VZD- ->FP: result body json
    Deactivate VZD
  FP- ->C: HTTPS Forward
     Deactivate FP
  |||
  end
  C- ->U: status    
  |||
end
|||

  Deactivate C
@enduml

PlantUML version 1.2022.5(Sat Apr 30 10:55:52 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>